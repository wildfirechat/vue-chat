import*as e from"../../../config.js";import*as s from"../../../platform.js";import*as o from"../../messages/messageContentType";import*as t from"../../model/conversationType";import*as r from"../../model/nullUserInfo";import*as n from"../../util/longUtil.js";import*as i from"../engine/avenginekit";import*as l from"../engine/avenginekitproxy";import*as a from"../engine/callEndReason";import*as d from"../engine/callSession";import*as c from"../engine/callState";import*as u from"../engine/participantProfile";import*as m from"../engine/subscriber";import*as f from"../messages/addParticipantsMessageContent";import*as _ from"../messages/callAnswerMessageContent";import*as j from"../messages/callByeMessageContent";import*as p from"../messages/callModifyMessageContent";import*as y from"../messages/callSignalMessageContent";import*as h from"../messages/callStartMessageContent";import*as b from"../messages/muteVideoMessageContent";var g={"./av/internal/avenginekitImpl.js":(e,s,o)=>{o.r(s),o.d(s,{WfcAVEngineKitImpl:()=>S,default:()=>C});var t=o("./node_modules/babel-runtime/core-js/json/stringify.js"),r=o.n(t),n=o("./node_modules/babel-runtime/core-js/map.js"),i=o.n(n),l=o("../../messages/messageContentType"),a=o("../messages/callSignalMessageContent"),d=o("../messages/callByeMessageContent"),c=o("../messages/callAnswerMessageContent"),u=o("../messages/callStartMessageContent"),m=o("../messages/callModifyMessageContent"),f=o("../../model/conversationType"),_=o("../engine/callEndReason"),j=o("../engine/avenginekitproxy"),p=o("../engine/callState"),y=o("./av/internal/callSessionImpl.js"),h=o("../messages/addParticipantsMessageContent"),b=o("../engine/avenginekit"),g=o("../../util/longUtil.js");class S extends b.default{constructor(){super(),this.sendMessageId=0,this._fixLongSerializedIssue=e=>("string"!=typeof e||"string"==typeof(e=JSON.parse(e))&&(e=JSON.parse(e)),e),this.onSendMessage=(e,s)=>{s=this._fixLongSerializedIssue(s);let o=this.sendMessageCallbackMap.get(s.sendMessageId);o&&o(s.error,s.messageUid,s.timestamp),this.sendMessageCallbackMap.delete(s.sendMessageId)},this.onReceiveMessage=(e,s)=>{if(s=this._fixLongSerializedIssue(s),console.log("receive voip message ",s.messageContent.type,s.messageContent.callId,s),!(s.conversation.type!==f.default.Single&&s.conversation.type!==f.default.Group||1!==s.direction&&s.messageContent.type!==l.default.VOIP_CONTENT_TYPE_ACCEPT&&s.messageContent.type!==l.default.VOIP_CONTENT_TYPE_END)){let e=s.messageContent;if(s.messageContent.type===l.default.VOIP_CONTENT_TYPE_SIGNAL){if(!v.currentSession||v.currentSession.status===p.default.STATUS_IDLE)return;let o=s.messageContent;o.callId!==v.currentSession.callId?v.rejectOtherCall(s.conversation,e.callId,null,s.messageUid):!v.currentSession||v.currentSession.status!==p.default.STATUS_CONNECTING&&v.currentSession.status!==p.default.STATUS_CONNECTED&&v.currentSession.status!==p.default.STATUS_OUTGOING||v.onReceiveData(s.from,o.payload)}else if(s.messageContent.type===l.default.VOIP_CONTENT_TYPE_START){console.log("callstart",s);let o=s.messageContent.targetIds;if(o.findIndex(e=>e===s.selfUserInfo.uid)<0)return;o=o.filter(e=>e!==s.selfUserInfo.uid),o=o.push(s.from),v.currentSession&&v.currentSession.status!==p.default.STATUS_IDLE?v.rejectOtherCall(s.conversation,e.callId,o,s.messageUid):(v.currentSession=y.default.newSession(s.conversation,s.from,e.callId,e.audioOnly,v.sessionCallback),v.currentSession.startMsgUid=s.messageUid,v.currentSession.initSession(!1,s.selfUserInfo,s.participantUserInfos,s.groupMemberUserInfos),v.currentSession.setState(p.default.STATUS_INCOMING),v.currentSession.joinTime=s.timestamp,v.currentSession.setUserJoinTime(s.from,s.timestamp),s.participantUserInfos.forEach(e=>{v.currentSession.setUserJoinTime(e.uid,s.timestamp)}),v.currentSession.setUserAcceptTime(s.from,s.timestamp))}else if(s.messageContent.type===l.default.VOIP_CONTENT_TYPE_ACCEPT||s.messageContent.type===l.default.VOIP_CONTENT_TYPE_ACCEPT_T){if(v.currentSession&&v.currentSession.status!==p.default.STATUS_IDLE){if(e.callId!==v.currentSession.callId)return void(1===s.direction&&v.rejectOtherCall(s.conversation,e.callId,[s.selfUserInfo.uid]));if(0===s.direction&&v.currentSession.status===p.default.STATUS_INCOMING)return void v.currentSession.endCall(_.default.REASON_AcceptByOtherClient);v.currentSession.status===p.default.STATUS_OUTGOING&&v.currentSession.setState(p.default.STATUS_CONNECTING),!v.currentSession.audioOnly&&e.audioOnly&&v.currentSession.setAudioOnly(!0),v.currentSession.setUserAcceptTime(s.from,s.timestamp);let o=v.queueOfferMessageMap.get(s.from);o&&o.forEach(e=>{v.processSignalingMessage(s.from,e)}),v.queueOfferMessageMap.delete(s.from)}}else if(s.messageContent.type===l.default.VOIP_CONTENT_TYPE_END)if(v.currentSession&&v.currentSession.status!==p.default.STATUS_IDLE&&v.currentSession.callId===e.callId){let o=e.reason;if(1===s.direction){switch(e.reason){case _.default.REASON_Unknown:o=_.default.REASON_Unknown;break;case _.default.REASON_Busy:o=_.default.RemoteBusy;break;case _.default.REASON_SignalError:o=_.default.RemoteNetworkError;break;case _.default.REASON_Hangup:o=_.default.REASON_RemoteHangup;break;case _.default.REASON_MediaError:o=_.default.RemoteNetworkError;break;case _.default.REASON_RemoteHangup:o=_.default.REASON_Hangup;break;case _.default.REASON_OpenCameraFailure:o=_.default.RemoteNetworkError;break;case _.default.REASON_Timeout:o=_.default.RemoteTimeout;break;case _.default.REASON_AcceptByOtherClient:o=_.default.REASON_AcceptByOtherClient;break;case _.default.REASON_AllLeft:o=_.default.REASON_AllLeft;break;case _.default.RemoteBusy:o=_.default.REASON_Busy;break;case _.default.RemoteTimeout:o=_.default.REASON_Timeout;break;case _.default.RemoteNetworkError:o=_.default.REASON_SignalError;break;case _.default.RoomDestroyed:o=_.default.RoomDestroyed;break;case _.default.RoomNotExist:o=_.default.RoomNotExist;break;case _.default.RoomParticipantsFull:o=_.default.RoomParticipantsFull;break;default:o=_.default.RemoteNetworkError}v.currentSession.endUserCall(s.from,o)}else v.currentSession.endCall(o)}else console.log("invalid bye message, ignore it");else if(s.messageContent.type===l.default.VOIP_CONTENT_TYPE_MODIFY)v.currentSession&&v.currentSession.status===p.default.STATUS_CONNECTED&&v.currentSession.callId===e.callId&&(e.audioOnly?(v.currentSession.audioOnly=!0,v.currentSession.downgrade2Voice(!0)):console.log("cannot modify voice call to video call"));else if(s.messageContent.type===l.default.VOIP_CONTENT_TYPE_ADD_PARTICIPANT)if(e.participants.indexOf(s.selfUserInfo.uid)>-1){if(v.currentSession&&v.currentSession.status!==p.default.STATUS_IDLE){let o=[];return o.push(...s.messageContent.participants),s.messageContent.existParticipants&&o.push(...s.messageContent.existParticipants),o.push(s.from),o=o.filter(e=>e!==s.selfUserInfo.uid),void v.rejectOtherCall(s.conversation,e.callId,o)}v.currentSession=y.default.newSession(s.conversation,s.from,e.callId,e.audioOnly,v.sessionCallback),v.currentSession.startMsgUid=s.messageUid;let o=s.participantUserInfos.filter(e=>e.uid!==s.selfUserInfo.uid);v.currentSession.initSession(!1,s.selfUserInfo,o,s.groupMemberUserInfos),v.currentSession.joinTime=s.timestamp,o.forEach(e=>{v.currentSession.setUserJoinTime(e.uid,s.timestamp)}),v.currentSession.updateExistParticipant(e.existParticipants,s.timestamp)}else if(v.currentSession&&v.currentSession.status!==p.default.STATUS_IDLE&&v.currentSession.callId===e.callId){let o=s.participantUserInfos.filter(s=>e.participants.indexOf(s.uid)>-1);v.currentSession.didAddNewParticipants(e.participants,o),o.forEach(e=>{v.currentSession.setUserJoinTime(e.uid,s.timestamp)})}else{let o=[];o.push(...s.messageContent.participants),s.messageContent.existParticipants&&o.push(...s.messageContent.existParticipants),o.push(s.from),o=o.filter(e=>e!==s.selfUserInfo.uid),v.rejectOtherCall(s.conversation,e.callId,o)}else if(s.messageContent.type===l.default.VOIP_CONTENT_TYPE_MUTE_VIDEO){let e=s.messageContent;v.currentSession&&v.currentSession.callId===e.callId&&v.currentSession.status!==p.default.STATUS_IDLE&&v.currentSession.updateVideoMute(s.from,e.videoMuted)}}},this.startCall=(e,s)=>{let o=(s=this._fixLongSerializedIssue(s)).conversation,t=s.audioOnly;if(this.currentSession)return;this.currentSession=y.default.newSession(o,s.selfUserInfo.uid,s.callId,t,v.sessionCallback),this.currentSession.initSession(!0,s.selfUserInfo,s.participantUserInfos,s.groupMemberUserInfos),this.currentSession.setState(p.default.STATUS_OUTGOING);let r=new u.default;r.audioOnly=t,r.callId=s.callId,r.targetIds=this.currentSession.getParticipantIds(),this.sendSignalMessage(r,this.currentSession.getParticipantIds(),!0,(e,s,o)=>{v.currentSession&&(0!==e?this.currentSession.endCall(_.default.REASON_SignalError):(this.currentSession.startMsgUid=s,console.log("start call startMsgUid",this.currentSession.startMsgUid,s,(new Date).valueOf(),(0,g.numberValue)(o)),this.currentSession.joinTime=o,this.currentSession.setAcceptTime(o),r.targetIds.forEach(e=>{this.currentSession.setUserJoinTime(e,o)},this)))})}}setup(){console.log("wfc avengine-multi"),j.default.listenVoipEvent("message",this.onReceiveMessage),j.default.listenVoipEvent("sendMessageResult",this.onSendMessage),j.default.listenVoipEvent("startCall",this.startCall),this.sendMessageCallbackMap=new(i()),this.queueOfferMessageMap=new(i())}getCurrentSession(){return v.currentSession}onCreateAnswerOffer(e,s){console.log("send engine answer/offer"),v.sendSignalingMessage(s,[e],!0)}onIceCandidate(e,s){console.log("send engine candidate",s),v.sendSignalingMessage(s,[e],!0)}inviteNewParticipants(e){let s=v.currentSession;if(!s)return;let o=new h.default;o.callId=s.callId,o.initiator=s.selfUserInfo.uid,console.log("inviteNewParticipants","initiator "+s.selfUserInfo),o.audioOnly=s.audioOnly,o.participants=e,o.existParticipants=s.getExistParticipantsStatus();let t=[...s.getParticipantIds()];t.push(...e),this.sendSignalMessage(o,t,!0,(o,t,r)=>{if(console.log("send invite message success"),0!==o)return void console.log("send invite message error",o);let n=s.groupMemberUserInfos.filter(s=>e.findIndex(e=>e===s.uid)>-1);console.log("didAddNewParticipants av",e,n),s.didAddNewParticipants(e,n),e.forEach(e=>{s.setUserJoinTime(e,r)})})}updateCallStartMessageContent(e,s){let o={messageUid:e,content:s};j.default.emitToMain("update-call-start-message",o)}clearInviteUnreadStatus(e){}sendSignalMessageEx(e,s,o,t,r){console.log("send signal message",s.type,s.callId,s);let n={conversation:e,content:s.encode(),toUsers:o};r&&(this.sendMessageId++,n.sendMessageId=this.sendMessageId,this.sendMessageCallbackMap.set(this.sendMessageId,r)),j.default.emitToMain("voip-message",n)}sendSignalMessage(e,s,o,t){this.sendSignalMessageEx(v.currentSession.conversation,e,s,o,t)}sendSignalingMessage(e,s,o){let t=new a.default;t.callId=this.currentSession.callId,t.payload=r()(e),this.sendSignalMessage(t,s,o)}rejectOtherCall(e,s,o,t){let r=new d.default;r.callId=s,r.inviteMsgUid=t,r.reason=_.default.REASON_Busy,console.log("reject other call");let n={conversation:e,content:r.encode(),toUsers:o};j.default.emitToMain("voip-message",n)}onReceiveData(e,s){let o=JSON.parse(s);if(v.currentSession.getPeerConnection(e))v.processSignalingMessage(e,o);else{console.log("queue signal",e,o);let s=this.queueOfferMessageMap.get(e);s||(s=[],this.queueOfferMessageMap.set(e,s)),"answer"===o.type||"offer"===o.type?s.unshift(o):s.push(o)}}processSignalingMessage(e,s){console.log("process remote signal:"+e+" "+s.type),"offer"===s.type?(console.log("set remote offer"),v.currentSession.onReceiveRemoteCreateOffer(e,s)):"answer"===s.type?(console.log("set remote answer"),v.currentSession.onReceiveRemoteAnswerOffer(e,s)):"candidate"===s.type?(console.log("set remote candidate"),s.sdpMLineIndex=s.label,s.sdpMid=s.id,v.currentSession.setRemoteIceCandidate(e,s)):"remove-candidates"===s.type||console.log("unknown type:"+s.type)}answerCurrentCall(){let e=new c.default;e.audioOnly=v.currentSession.audioOnly,e.callId=v.currentSession.callId,e.inviteMessageUid=v.currentSession.startMsgUid,this.sendSignalMessage(e,this.currentSession.getParticipantIds(),!0,(e,s,o)=>{0===e?this.currentSession.setAcceptTime(o):this.currentSession.endCall(_.default.REASON_SignalError)})}downgrade2VoiceCall(){let e=new m.default;v.currentSession.audioOnly=!0,e.audioOnly=v.currentSession.audioOnly,e.callId=v.currentSession.callId,this.sendSignalMessage(e,this.currentSession.getParticipantIds(),!0)}}const v=new S,C=v},"./av/internal/callSessionImpl.js":(e,s,o)=>{o.r(s),o.d(s,{default:()=>C});var t=o("./node_modules/babel-runtime/core-js/json/stringify.js"),r=o.n(t),n=o("./node_modules/babel-runtime/helpers/extends.js"),i=o("./node_modules/babel-runtime/core-js/map.js"),l=o.n(i),a=o("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),d=o("../../../config.js"),c=o("../engine/callState"),u=o("./av/internal/avenginekitImpl.js"),m=o("../engine/callEndReason"),f=o("../messages/callByeMessageContent"),_=o("../engine/subscriber"),j=o("../../../platform.js"),p=o("../engine/callSession"),y=o("../../util/longUtil.js"),h=o("../engine/avenginekitproxy"),b=o("../messages/muteVideoMessageContent"),g=o("../../model/nullUserInfo"),S=o("./av/internal/soundMeter.js"),v=o("../engine/participantProfile");class C extends p.default{constructor(...e){var s;return s=super(...e),this.joinTime=0,this.acceptTime=0,this.status=0,this.getOnlyAudioStream=!1,this.onVoipWindowClose=e=>{this.endCall(m.default.RemoteNetworkError),window.removeEventListener("beforeunload",this.onVoipWindowClose)},this.callTimeout=()=>{let e=(new Date).valueOf();this.callTimer||(this.callTimer=setInterval(this.callTimeout,1e3));let s=(0,y.numberValue)(this.joinTime);if(0!==s){if(this.status===c.default.STATUS_INCOMING){if(e-s>6e4)return void this.endCall(m.default.REASON_Timeout)}else if(this.status!==c.default.STATUS_CONNECTED&&e-s>6e4)return void this.endCall(m.default.RemoteTimeout);this.peerConnectionClientMap.forEach((s,o)=>{let t=(0,y.gt)(s.acceptTime,s.acceptTime)?s.acceptTime:s.joinTime;s.status!==c.default.STATUS_CONNECTED&&(0,y.gt)(t,0)&&e-(0,y.numberValue)(t)>6e4&&this.endUserCall(o,m.default.RemoteTimeout)})}},this.gotRemoteStream=(e,s)=>{if(this.remoteStream!==s.streams[0]){this.sessionCallback&&this.sessionCallback.didReceiveRemoteVideoTrack(e,s.streams[0]);let o=s.streams[0],t=this.getClient(e);if(o.getAudioTracks().length>0){let e=new S.SoundMeter(window.audioContext);e.connectToSource(o,e=>{console.log("connect to soundMeter",e)}),t.soundMeter=e}t.stream=s.streams[0],console.log("pc received remote stream",s.streams[0])}},this.onIceCandidate=(e,s,o)=>{if(o.candidate){try{let t={type:"candidate",label:o.candidate.sdpMLineIndex,id:o.candidate.sdpMid,candidate:o.candidate.candidate};u.default.onIceCandidate(e,t),this.onAddIceCandidateSuccess(e,s)}catch(o){this.onAddIceCandidateError(e,s,o)}console.log(`ICE candidate:\n${o.candidate?o.candidate.candidate:"(null)"}`)}},this.onIceStateChange=(e,s,o)=>{if(console.log(`ICE state: ${s.iceConnectionState}`,e,s),console.log("ICE state change event: ",e,o),s){let o=this.getClient(e);"disconnected"===s.iceConnectionState||("connected"===s.iceConnectionState?(o.status=c.default.STATUS_CONNECTED,e!==this.selfUserInfo.uid&&this.sessionCallback&&this.sessionCallback.didParticipantConnected(e),this.setState(c.default.STATUS_CONNECTED)):"failed"===s.iceConnectionState&&this.endUserCall(e,m.default.REASON_MediaError))}},s}static newSession(e,s,o,t,r){console.log("newSession, multi");let n=new C;return n.conversation=e,n.initiatorId=s,n.callId=o,n.audioOnly=t,n.sessionCallback=r,n}getClient(e){return this.peerConnectionClientMap.get(e)}getParticipantIds(){let e=[];return this.participantUserInfos.forEach(s=>{e.push(s.uid)}),e}setAcceptTime(e){this.acceptTime=e,this.tryStartMedia()}setUserAcceptTime(e,s){if(e===this.selfUserInfo.uid)return;console.log("setUserAcceptTime",e,s),this.getClient(e).acceptTime=s,this.tryStartMedia()}setUserJoinTime(e,s){this.getClient(e).joinTime=s}tryStartMedia(){var e=this;return(0,a.default)((function*(){if((0,y.gt)(e.acceptTime,0))for(const[s,o]of e.peerConnectionClientMap)!(0,y.gt)(o.acceptTime,0)||o.status!==c.default.STATUS_INCOMING&&o.status!==c.default.STATUS_OUTGOING||((0,y.gt)(e.acceptTime,o.acceptTime)?yield e.startMedia(s,!0):yield e.startMedia(s,!1))}))()}getPeerConnection(e){return this.peerConnectionClientMap.get(e).peerConnection}getParticipantProfiles(){let e=[];for(const s of this.peerConnectionClientMap.values()){let o=new v.default;o.userId=s.userId,o.status=s.status,o.joinTime=s.joinTime,o.acceptTime=s.acceptTime,o.audioMuted=s.audioMuted,o.videoMuted=s.videoMuted,e.push(o)}return e}getSelfProfile(){let e=new v.default;return e.userId=this.selfUserInfo.uid,e.status=this.status,e.joinTime=this.joinTime,e.acceptTime=this.acceptTime,e.audioMuted=this.audioMuted,e.videoMuted=this.videoMuted,e}answerCall(e){this.status===c.default.STATUS_INCOMING&&(this.setState(c.default.STATUS_CONNECTING),this.audioOnly&&!e&&(e=!0),this.audioOnly=e,u.default.answerCurrentCall())}setState(e){if(this.status!==e){if(this.status!==c.default.STATUS_CONNECTED||e!==c.default.STATUS_CONNECTING){if(this.status=e,console.log("set status",e,this.startMsgUid),e===c.default.STATUS_IDLE||e===c.default.STATUS_CONNECTED){if(this.startMsgUid){let s={audioOnly:this.audioOnly};s.status=this.endReason?this.endReason:0,e===c.default.STATUS_CONNECTED?(s.connectTime=(new Date).getTime(),this.startTime=s.connectTime):s.endTime=(new Date).getTime(),u.default.updateCallStartMessageContent(this.startMsgUid,s)}this.getOnlyAudioStream&&e===c.default.STATUS_CONNECTED&&(this.muteVideo(!0),this.sessionCallback&&this.sessionCallback.didVideoMuted(this.selfUserInfo.uid,!0))}this.sessionCallback&&this.sessionCallback.didChangeState(e)}}else e===c.default.STATUS_CONNECTED&&this.sessionCallback&&this.sessionCallback.didChangeState(e)}setAudioOnly(e){this.audioOnly=e,this.sessionCallback&&this.sessionCallback.didChangeMode(e)}initSession(e,s,o=[],t=[]){this.moCall=e,this.selfUserInfo=s,this.participantUserInfos=o,this.singleCall=1===o.length,this.groupMemberUserInfos=t;let r=s;e||(r=o.filter(e=>e.uid===this.initiatorId)[0]),this.sessionCallback&&this.sessionCallback.onInitial(this,s,r,o,t);let n=[];o.forEach(e=>{n.push(e.uid)}),this.initParticipantClientMap(n),e?(this.setState(c.default.STATUS_OUTGOING),this.startPreview(this.audioOnly)):(this.setState(c.default.STATUS_INCOMING),this.playIncomingRing()),this.callTimeout(),setTimeout(()=>{window.addEventListener("beforeunload",this.onVoipWindowClose)},500),window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audioContext=new AudioContext,this.soundMeterTimer=setInterval(()=>{this.peerConnectionClientMap&&this.sessionCallback&&this.peerConnectionClientMap.forEach((e,s)=>{if(!e.soundMeter)return;let o=e.soundMeter.instant.toFixed(2);e.soundMeter.slow.toFixed(2),e.soundMeter.clip;this.sessionCallback.didReportAudioVolume(s,Number(o))})},100)}initParticipantClientMap(e){console.log("initParticipantClientMap",e),this.peerConnectionClientMap||(this.peerConnectionClientMap=new(l())),e.forEach(e=>{let s=new _.default(e);e===this.selfUserInfo.uid?s.status=c.default.STATUS_OUTGOING:s.status=c.default.STATUS_INCOMING,this.peerConnectionClientMap.set(e,s)},this)}inviteNewParticipants(e){e.length&&(e=e.filter(e=>e!==this.selfUserInfo.uid&&this.participantUserInfos.findIndex(s=>s.uid===e)<0)).length&&(this.singleCall=!1,u.default.inviteNewParticipants(e))}getExistParticipantsStatus(){let e=[];return e.push({userId:this.selfUserInfo.uid,acceptTime:this.acceptTime?(0,y.numberValue)(this.acceptTime):0,joinTime:this.joinTime?(0,y.numberValue)(this.joinTime):0,videoMuted:this.videoMuted}),this.participantUserInfos.forEach(s=>{let o=this.getClient(s.uid);e.push({userId:o.userId,acceptTime:o.acceptTime?(0,y.numberValue)(o.acceptTime):0,joinTime:o.joinTime?(0,y.numberValue)(o.joinTime):0,videoMuted:o.videoMuted})},this),e}didAddNewParticipants(e,s){e.forEach(e=>{-1===s.findIndex(s=>s.uid===e)&&s.push(new g.default(e))}),console.log("didAddNewParticipants",e,s),e.forEach(e=>{let s=new _.default(e,this);s.status=c.default.STATUS_INCOMING,this.peerConnectionClientMap.set(e,s)},this),s.forEach(e=>{this.participantUserInfos.push(e),this.sessionCallback&&this.sessionCallback.didParticipantJoined(e.uid,e)},this)}updateExistParticipant(e,s){e.forEach(e=>{let o=this.getClient(e.userId);o.status=c.default.STATUS_INCOMING,o.joinTime=s,o.videoMuted=e.videoMuted,o.acceptTime=e.acceptTime})}updateVideoMute(e,s){let o=this.getClient(e);o&&o.videoMuted!==s&&(o.videoMuted=s,this.sessionCallback&&this.sessionCallback.didVideoMuted(e,s))}defaultVideoConstraints(e){let s;return s=e?{audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1}:{audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:{width:{max:1280},height:{max:720}}},s}startPreview(e){var s=this;return(0,a.default)((function*(){console.log("start preview");try{s.cameraVideoStream=yield navigator.mediaDevices.getUserMedia(s.defaultVideoConstraints(e)),console.log("Received local stream",s.cameraVideoStream)}catch(e){console.error("getUserMedia error",e)}if(!s.cameraVideoStream)try{const e={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1};s.cameraVideoStream=yield navigator.mediaDevices.getUserMedia(e),console.log("Received local stream audioOnly",s.cameraVideoStream),s.getOnlyAudioStream=!0}catch(e){console.error("getUserMedia error",e),alert(`getUserMedia() error: ${e.name}`),s.endCall(m.default.REASON_MediaError)}s.sessionCallback&&s.sessionCallback.didCreateLocalVideoTrack(s.cameraVideoStream,s.getOnlyAudioStream);const o=s.cameraVideoStream.getVideoTracks();e?o&&o.length>0&&o.forEach((function(e){return e.stop()})):o&&o.length>0&&console.log(`Using video device: ${o[0].label}`);const t=s.cameraVideoStream.getAudioTracks();t.length>0&&console.log(`Using audio device: ${t[0].label}`)}))()}startMedia(e,s){var o=this;return(0,a.default)((function*(){console.log("start media",s),o.setState(c.default.STATUS_CONNECTING),o.startTime=window.performance.now(),o.getClient(e).status=c.default.STATUS_CONNECTING,o.cameraVideoStream?(console.log("start pc 1"),yield o.createPeerConnection(e,s)):(yield o.startPreview(o.audioOnly),console.log("start pc 0"),yield o.createPeerConnection(e,s))}))()}getDesktopSources(e){return j.desktopCapturer?j.desktopCapturer.getSources({types:e}):null}startScreenShare(e){var s=this;return(0,a.default)((function*(){console.log("start screen share"),s.screenShareStream||(console.log("desktopCapturer ",j.desktopCapturer),j.desktopCapturer?(s.screenShareStream=yield navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:(0,n.default)({chromeMediaSource:"desktop"},e)}}),console.log("desktopCapturer screen share stream",s.screenShareStream)):s.screenShareStream=yield navigator.mediaDevices.getDisplayMedia({audio:!1,video:!0})),s.sessionCallback&&s.sessionCallback.didCreateLocalVideoTrack(s.screenShareStream),(0,y.gt)(s.acceptTime,0)&&s.peerConnectionClientMap.forEach((function(e,o){e.videoSender&&e.videoSender&&e.videoSender.replaceTrack(s.screenShareStream.getVideoTracks()[0])}),s)}))()}isScreenSharing(){return null!==this.screenShareStream}stopScreenShare(){this.screenShareStream=null,this.sessionCallback&&this.cameraVideoStream&&this.sessionCallback.didCreateLocalVideoTrack(this.cameraVideoStream),(0,y.gt)(this.acceptTime,0)&&this.peerConnectionClientMap.forEach((e,s)=>{e.videoSender&&e.videoSender&&e.videoSender.replaceTrack(this.cameraVideoStream.getVideoTracks()[0])},this)}createPeerConnection(e,s){var o=this;return(0,a.default)((function*(){let t=o.getClient(e),n=o.getSelectedSdpSemantics();n.iceServers=[];let i=d.default.ICE_SERVERS;i&&i.forEach((function(e){n.iceServers.push({urls:[e[0]],username:e[1],credential:e[2]})})),console.log("RTCPeerConnection configuration:",n);let l=new RTCPeerConnection(n);t.peerConnection=l,t.isInitiator=s,console.log("Created local peer connection object pc",e),l.addEventListener("icecandidate",(function(s){return o.onIceCandidate(e,l,s)})),l.addEventListener("iceconnectionstatechange",(function(s){return o.onIceStateChange(e,l,s)})),l.addEventListener("track",(function(s){return o.gotRemoteStream(e,s)})),l.addEventListener("connectionstatechange",(function(s){return o.onConnectionStateChange(e,s)}));let a=o.screenShareStream?o.screenShareStream:o.cameraVideoStream;if(o.audioOnly?a.getAudioTracks().forEach((function(e){return l.addTrack(e,a)}),o):(l.addTrack(a.getAudioTracks()[0],a),o.getOnlyAudioStream||(t.videoSender=l.addTrack(a.getVideoTracks()[0],a))),console.log("Added local stream to pc"),s)try{console.log("pc createOffer start");let s={offerToReceiveAudio:!0,offerToReceiveVideo:!o.audioOnly};const t=yield l.createOffer(s);JSON.parse(r()(t)).type="offer",yield o.onCreateOfferSuccess(e,t)}catch(s){o.onCreateSessionDescriptionError(e,s)}console.log("createPeerConnection",e,o.getClient(e))}))()}getSelectedSdpSemantics(){return{}}call(){console.log("voip on call button click"),this.stopIncomingRing(),console.log("on call button call"),this.answerCall(this.audioOnly)}onCreateSessionDescriptionError(e,s){console.log("Failed to create session description"),this.endUserCall(e,m.default.REASON_MediaError)}onReceiveRemoteCreateOffer(e,s){var o=this;return(0,a.default)((function*(){let t=o.peerConnectionClientMap.get(e);if(t.isInitiator)return;console.log("onReceiveRemoteCreateOffer",e,s);let n=o.getPeerConnection(e);try{yield n.setRemoteDescription(s),o.onSetRemoteSuccess(n)}catch(s){o.onSetSessionDescriptionError(e,s)}t.quequedCandidates&&t.quequedCandidates.length>0&&(console.log("process pending ice candidates"),t.quequedCandidates.forEach((function(s){o.setRemoteIceCandidate(e,s)})),t.quequedCandidates.length=0),console.log("pc createAnswer start");try{const s=yield n.createAnswer();JSON.parse(r()(s)).type="answer",yield o.onCreateAnswerSuccess(e,s)}catch(e){o.onCreateSessionDescriptionError(e)}}))()}onCreateOfferSuccess(e,s){var o=this;return(0,a.default)((function*(){if(console.log("pc setLocalDescription start"),!o.peerConnectionClientMap.get(e).isInitiator)return;let t=o.getPeerConnection(e);try{yield t.setLocalDescription(s),o.onSetLocalSuccess(t)}catch(s){o.onSetSessionDescriptionError(e,s)}console.log(s),u.default.onCreateAnswerOffer(e,s)}))()}onSetLocalSuccess(e){console.log("setLocalDescription complete")}onSetRemoteSuccess(e){console.log("setRemoteDescription complete")}onSetSessionDescriptionError(e,s){}onReceiveRemoteAnswerOffer(e,s){var o=this;return(0,a.default)((function*(){console.log("onReceiveRemoteAnswerOffer",e,s);try{let t=o.peerConnectionClientMap.get(e),r=t.peerConnection;yield r.setRemoteDescription(s),o.onSetRemoteSuccess(r),t.quequedCandidates&&t.quequedCandidates.length>0&&(console.log("process pending ice candidates"),t.quequedCandidates.forEach((function(s){o.setRemoteIceCandidate(e,s)})),t.quequedCandidates.length=0)}catch(s){o.onSetSessionDescriptionError(e,s)}}))()}setRemoteIceCandidate(e,s){var o=this;return(0,a.default)((function*(){console.log("handle the candidate"),o.onReceiveRemoteIceCandidate(e,s)}))()}onCreateAnswerSuccess(e,s){var o=this;return(0,a.default)((function*(){console.log("pc setLocalDescription start");try{let t=o.getPeerConnection(e);yield t.setLocalDescription(s),o.onSetLocalSuccess(t)}catch(s){o.onSetSessionDescriptionError(e,s)}console.log(s),u.default.onCreateAnswerOffer(e,s)}))()}onReceiveRemoteIceCandidate(e,s){var o=this;return(0,a.default)((function*(){console.log("on receive remote ice candidate");let t=o.peerConnectionClientMap.get(e);if(t.peerConnection.remoteDescription){console.log("pc rdp is set");let e=t.peerConnection;yield e.addIceCandidate(s)}else console.log("pc rdp is null"),t.quequedCandidates||(t.quequedCandidates=[]),t.quequedCandidates.push(s)}))()}onAddIceCandidateSuccess(e,s){console.log("send Ice Candidate success")}onAddIceCandidateError(e,s,o){console.log(`failed to add ICE Candidate: ${e} ${o.toString()}`),this.endUserCall(e,m.default.REASON_MediaError)}onConnectionStateChange(e,s,o){console.log("onConnectionStateChange",e,s,o)}hangup(){console.log("Ending call"),this.endCall(m.default.REASON_Hangup)}downgrade2Voice(e=!1){if(this.status!==c.default.STATUS_CONNECTED)return;const s=this.cameraVideoStream.getVideoTracks();s&&s.length>0&&s.forEach(e=>e.stop()),e&&this.downToVoice()}downToVoice(){if(console.log("down to voice"),this.stopIncomingRing(),this.status===c.default.STATUS_INCOMING)return this.setAudioOnly(!0),void this.answerCall(!0);this.status===c.default.STATUS_CONNECTED&&(this.audioOnly||(this.setAudioOnly(!0),u.default.downgrade2VoiceCall()))}muteVideo(e){this.setVideoEnabled(!e)}setVideoEnabled(e){if(this.audioOnly)return;this.videoMuted=!e;const s=this.cameraVideoStream.getVideoTracks();s&&s.length>0&&s.forEach(s=>s.enabled=e);let o=new b.default;o.callId=this.callId,o.videoMuted=this.videoMuted,o.existParticipants=this.getExistParticipantsStatus(),u.default.sendSignalMessage(o,this.getParticipantIds(),!0)}muteAudio(e){this.setAudioEnabled(!e)}setAudioEnabled(e){if(this.cameraVideoStream){const s=this.cameraVideoStream.getAudioTracks();s&&s.length>0&&(s[0].enabled=!s[0].enabled,this.audioMuted=!e)}}endMedia(){console.log("Ending media"),this.setState(c.default.STATUS_IDLE),this.stopIncomingRing(),this.cameraVideoStream&&(console.log("to stop stream",this.cameraVideoStream),void 0===this.cameraVideoStream.getTracks?this.cameraVideoStream.stop():this.cameraVideoStream.getTracks().forEach((function(e){e.stop(),console.log("stop track",e)})),this.cameraVideoStream=null);for(const e of this.peerConnectionClientMap.values())console.log("close pc",e.peerConnection),e.soundMeter&&e.soundMeter.stop(),e.peerConnection&&e.peerConnection.close();this.peerConnectionClientMap=null}endUserCall(e,s){if(console.log("endUserCall",e,s),e===this.selfUserInfo.uid)return void this.endCall(s);let o=this.getClient(e);if(this.peerConnectionClientMap.delete(e),this.participantUserInfos=this.participantUserInfos.filter(s=>s.uid!==e),o){if(o.peerConnection){o.peerConnection.getSenders().forEach(e=>o.peerConnection.removeTrack(e)),o.peerConnection.close()}this.sessionCallback&&this.peerConnectionClientMap.size>0&&this.sessionCallback.didParticipantLeft(e,s)}0===this.peerConnectionClientMap.size&&(0===this.conversation.type||this.singleCall?this.endCall(s):this.endCall(m.default.REASON_AllLeft))}endCall(e){if(this.endReason=e,this.status!==c.default.STATUS_IDLE){if(this.setState(c.default.STATUS_IDLE),e!==m.default.REASON_AcceptByOtherClient&&e!==m.default.REASON_AllLeft){let s=new f.default;s.callId=this.callId,s.inviteMsgUid=this.startMsgUid,s.reason=e,u.default.sendSignalMessage(s,this.getParticipantIds(),!1)}this.endTime=(new Date).valueOf(),u.default.currentSession=null,clearInterval(this.callTimer),clearInterval(this.soundMeterTimer),this.endMedia(),this.sessionCallback&&this.sessionCallback.didCallEndWithReason(e)}}closeVoipWindow(){this.status=c.default.STATUS_IDLE,u.default.currentSession=null,localStorage.getItem("enable_voip_debug")||h.default.useIframe||(j.currentWindow?j.currentWindow.close():h.default.emitToMain("close-voip-div"))}}},"./av/internal/soundMeter.js":(e,s,o)=>{function t(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);const s=this;this.script.onaudioprocess=function(e){const o=e.inputBuffer.getChannelData(0);let t,r=0,n=0;for(t=0;t<o.length;++t)r+=o[t]*o[t],Math.abs(o[t])>.99&&(n+=1);s.instant=Math.sqrt(r/o.length),s.slow=.95*s.slow+.05*s.instant,s.clip=n/o.length}}o.r(s),o.d(s,{SoundMeter:()=>t}),t.prototype.connectToSource=function(e,s){console.log("SoundMeter connecting");try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==s&&s(null)}catch(e){console.error(e),void 0!==s&&s(e)}},t.prototype.stop=function(){console.log("SoundMeter stopping"),this.mic.disconnect(),this.script.disconnect()}},"./node_modules/babel-runtime/core-js/json/stringify.js":(e,s,o)=>{e.exports={default:o("./node_modules/core-js/library/fn/json/stringify.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/map.js":(e,s,o)=>{e.exports={default:o("./node_modules/core-js/library/fn/map.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/assign.js":(e,s,o)=>{e.exports={default:o("./node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/promise.js":(e,s,o)=>{e.exports={default:o("./node_modules/core-js/library/fn/promise.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/asyncToGenerator.js":(e,s,o)=>{s.__esModule=!0;var t,r=o("./node_modules/babel-runtime/core-js/promise.js"),n=(t=r)&&t.__esModule?t:{default:t};s.default=function(e){return function(){var s=e.apply(this,arguments);return new n.default((function(e,o){return function t(r,i){try{var l=s[r](i),a=l.value}catch(e){return void o(e)}if(!l.done)return n.default.resolve(a).then((function(e){t("next",e)}),(function(e){t("throw",e)}));e(a)}("next")}))}}},"./node_modules/babel-runtime/helpers/extends.js":(e,s,o)=>{s.__esModule=!0;var t,r=o("./node_modules/babel-runtime/core-js/object/assign.js"),n=(t=r)&&t.__esModule?t:{default:t};s.default=n.default||function(e){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e}},"./node_modules/core-js/library/fn/json/stringify.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_core.js"),r=t.JSON||(t.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},"./node_modules/core-js/library/fn/map.js":(e,s,o)=>{o("./node_modules/core-js/library/modules/es6.object.to-string.js"),o("./node_modules/core-js/library/modules/es6.string.iterator.js"),o("./node_modules/core-js/library/modules/web.dom.iterable.js"),o("./node_modules/core-js/library/modules/es6.map.js"),o("./node_modules/core-js/library/modules/es7.map.to-json.js"),o("./node_modules/core-js/library/modules/es7.map.of.js"),o("./node_modules/core-js/library/modules/es7.map.from.js"),e.exports=o("./node_modules/core-js/library/modules/_core.js").Map},"./node_modules/core-js/library/fn/object/assign.js":(e,s,o)=>{o("./node_modules/core-js/library/modules/es6.object.assign.js"),e.exports=o("./node_modules/core-js/library/modules/_core.js").Object.assign},"./node_modules/core-js/library/fn/promise.js":(e,s,o)=>{o("./node_modules/core-js/library/modules/es6.object.to-string.js"),o("./node_modules/core-js/library/modules/es6.string.iterator.js"),o("./node_modules/core-js/library/modules/web.dom.iterable.js"),o("./node_modules/core-js/library/modules/es6.promise.js"),o("./node_modules/core-js/library/modules/es7.promise.finally.js"),o("./node_modules/core-js/library/modules/es7.promise.try.js"),e.exports=o("./node_modules/core-js/library/modules/_core.js").Promise},"./node_modules/core-js/library/modules/_a-function.js":e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/library/modules/_add-to-unscopables.js":e=>{e.exports=function(){}},"./node_modules/core-js/library/modules/_an-instance.js":e=>{e.exports=function(e,s,o,t){if(!(e instanceof s)||void 0!==t&&t in e)throw TypeError(o+": incorrect invocation!");return e}},"./node_modules/core-js/library/modules/_an-object.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!t(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/core-js/library/modules/_array-from-iterable.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_for-of.js");e.exports=function(e,s){var o=[];return t(e,!1,o.push,o,s),o}},"./node_modules/core-js/library/modules/_array-includes.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_to-iobject.js"),r=o("./node_modules/core-js/library/modules/_to-length.js"),n=o("./node_modules/core-js/library/modules/_to-absolute-index.js");e.exports=function(e){return function(s,o,i){var l,a=t(s),d=r(a.length),c=n(i,d);if(e&&o!=o){for(;d>c;)if((l=a[c++])!=l)return!0}else for(;d>c;c++)if((e||c in a)&&a[c]===o)return e||c||0;return!e&&-1}}},"./node_modules/core-js/library/modules/_array-methods.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_ctx.js"),r=o("./node_modules/core-js/library/modules/_iobject.js"),n=o("./node_modules/core-js/library/modules/_to-object.js"),i=o("./node_modules/core-js/library/modules/_to-length.js"),l=o("./node_modules/core-js/library/modules/_array-species-create.js");e.exports=function(e,s){var o=1==e,a=2==e,d=3==e,c=4==e,u=6==e,m=5==e||u,f=s||l;return function(s,l,_){for(var j,p,y=n(s),h=r(y),b=t(l,_,3),g=i(h.length),S=0,v=o?f(s,g):a?f(s,0):void 0;g>S;S++)if((m||S in h)&&(p=b(j=h[S],S,y),e))if(o)v[S]=p;else if(p)switch(e){case 3:return!0;case 5:return j;case 6:return S;case 2:v.push(j)}else if(c)return!1;return u?-1:d||c?c:v}}},"./node_modules/core-js/library/modules/_array-species-constructor.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_is-object.js"),r=o("./node_modules/core-js/library/modules/_is-array.js"),n=o("./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e){var s;return r(e)&&("function"!=typeof(s=e.constructor)||s!==Array&&!r(s.prototype)||(s=void 0),t(s)&&null===(s=s[n])&&(s=void 0)),void 0===s?Array:s}},"./node_modules/core-js/library/modules/_array-species-create.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_array-species-constructor.js");e.exports=function(e,s){return new(t(e))(s)}},"./node_modules/core-js/library/modules/_classof.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_cof.js"),r=o("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),n="Arguments"==t(function(){return arguments}());e.exports=function(e){var s,o,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,s){try{return e[s]}catch(e){}}(s=Object(e),r))?o:n?t(s):"Object"==(i=t(s))&&"function"==typeof s.callee?"Arguments":i}},"./node_modules/core-js/library/modules/_cof.js":e=>{var s={}.toString;e.exports=function(e){return s.call(e).slice(8,-1)}},"./node_modules/core-js/library/modules/_collection-strong.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_object-dp.js").f,r=o("./node_modules/core-js/library/modules/_object-create.js"),n=o("./node_modules/core-js/library/modules/_redefine-all.js"),i=o("./node_modules/core-js/library/modules/_ctx.js"),l=o("./node_modules/core-js/library/modules/_an-instance.js"),a=o("./node_modules/core-js/library/modules/_for-of.js"),d=o("./node_modules/core-js/library/modules/_iter-define.js"),c=o("./node_modules/core-js/library/modules/_iter-step.js"),u=o("./node_modules/core-js/library/modules/_set-species.js"),m=o("./node_modules/core-js/library/modules/_descriptors.js"),f=o("./node_modules/core-js/library/modules/_meta.js").fastKey,_=o("./node_modules/core-js/library/modules/_validate-collection.js"),j=m?"_s":"size",p=function(e,s){var o,t=f(s);if("F"!==t)return e._i[t];for(o=e._f;o;o=o.n)if(o.k==s)return o};e.exports={getConstructor:function(e,s,o,d){var c=e((function(e,t){l(e,c,s,"_i"),e._t=s,e._i=r(null),e._f=void 0,e._l=void 0,e[j]=0,null!=t&&a(t,o,e[d],e)}));return n(c.prototype,{clear:function(){for(var e=_(this,s),o=e._i,t=e._f;t;t=t.n)t.r=!0,t.p&&(t.p=t.p.n=void 0),delete o[t.i];e._f=e._l=void 0,e[j]=0},delete:function(e){var o=_(this,s),t=p(o,e);if(t){var r=t.n,n=t.p;delete o._i[t.i],t.r=!0,n&&(n.n=r),r&&(r.p=n),o._f==t&&(o._f=r),o._l==t&&(o._l=n),o[j]--}return!!t},forEach:function(e){_(this,s);for(var o,t=i(e,arguments.length>1?arguments[1]:void 0,3);o=o?o.n:this._f;)for(t(o.v,o.k,this);o&&o.r;)o=o.p},has:function(e){return!!p(_(this,s),e)}}),m&&t(c.prototype,"size",{get:function(){return _(this,s)[j]}}),c},def:function(e,s,o){var t,r,n=p(e,s);return n?n.v=o:(e._l=n={i:r=f(s,!0),k:s,v:o,p:t=e._l,n:void 0,r:!1},e._f||(e._f=n),t&&(t.n=n),e[j]++,"F"!==r&&(e._i[r]=n)),e},getEntry:p,setStrong:function(e,s,o){d(e,s,(function(e,o){this._t=_(e,s),this._k=o,this._l=void 0}),(function(){for(var e=this._k,s=this._l;s&&s.r;)s=s.p;return this._t&&(this._l=s=s?s.n:this._t._f)?c(0,"keys"==e?s.k:"values"==e?s.v:[s.k,s.v]):(this._t=void 0,c(1))}),o?"entries":"values",!o,!0),u(s)}}},"./node_modules/core-js/library/modules/_collection-to-json.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_classof.js"),r=o("./node_modules/core-js/library/modules/_array-from-iterable.js");e.exports=function(e){return function(){if(t(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},"./node_modules/core-js/library/modules/_collection.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_global.js"),r=o("./node_modules/core-js/library/modules/_export.js"),n=o("./node_modules/core-js/library/modules/_meta.js"),i=o("./node_modules/core-js/library/modules/_fails.js"),l=o("./node_modules/core-js/library/modules/_hide.js"),a=o("./node_modules/core-js/library/modules/_redefine-all.js"),d=o("./node_modules/core-js/library/modules/_for-of.js"),c=o("./node_modules/core-js/library/modules/_an-instance.js"),u=o("./node_modules/core-js/library/modules/_is-object.js"),m=o("./node_modules/core-js/library/modules/_set-to-string-tag.js"),f=o("./node_modules/core-js/library/modules/_object-dp.js").f,_=o("./node_modules/core-js/library/modules/_array-methods.js")(0),j=o("./node_modules/core-js/library/modules/_descriptors.js");e.exports=function(e,s,o,p,y,h){var b=t[e],g=b,S=y?"set":"add",v=g&&g.prototype,C={};return j&&"function"==typeof g&&(h||v.forEach&&!i((function(){(new g).entries().next()})))?(g=s((function(s,o){c(s,g,e,"_c"),s._c=new b,null!=o&&d(o,y,s[S],s)})),_("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var s="add"==e||"set"==e;e in v&&(!h||"clear"!=e)&&l(g.prototype,e,(function(o,t){if(c(this,g,e),!s&&h&&!u(o))return"get"==e&&void 0;var r=this._c[e](0===o?0:o,t);return s?this:r}))})),h||f(g.prototype,"size",{get:function(){return this._c.size}})):(g=p.getConstructor(s,e,y,S),a(g.prototype,o),n.NEED=!0),m(g,e),C[e]=g,r(r.G+r.W+r.F,C),h||p.setStrong(g,e,y),g}},"./node_modules/core-js/library/modules/_core.js":e=>{var s=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=s)},"./node_modules/core-js/library/modules/_ctx.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_a-function.js");e.exports=function(e,s,o){if(t(e),void 0===s)return e;switch(o){case 1:return function(o){return e.call(s,o)};case 2:return function(o,t){return e.call(s,o,t)};case 3:return function(o,t,r){return e.call(s,o,t,r)}}return function(){return e.apply(s,arguments)}}},"./node_modules/core-js/library/modules/_defined.js":e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"./node_modules/core-js/library/modules/_descriptors.js":(e,s,o)=>{e.exports=!o("./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_dom-create.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_is-object.js"),r=o("./node_modules/core-js/library/modules/_global.js").document,n=t(r)&&t(r.createElement);e.exports=function(e){return n?r.createElement(e):{}}},"./node_modules/core-js/library/modules/_enum-bug-keys.js":e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/library/modules/_export.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_global.js"),r=o("./node_modules/core-js/library/modules/_core.js"),n=o("./node_modules/core-js/library/modules/_ctx.js"),i=o("./node_modules/core-js/library/modules/_hide.js"),l=o("./node_modules/core-js/library/modules/_has.js"),a=function(e,s,o){var d,c,u,m=e&a.F,f=e&a.G,_=e&a.S,j=e&a.P,p=e&a.B,y=e&a.W,h=f?r:r[s]||(r[s]={}),b=h.prototype,g=f?t:_?t[s]:(t[s]||{}).prototype;for(d in f&&(o=s),o)(c=!m&&g&&void 0!==g[d])&&l(h,d)||(u=c?g[d]:o[d],h[d]=f&&"function"!=typeof g[d]?o[d]:p&&c?n(u,t):y&&g[d]==u?function(e){var s=function(s,o,t){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(s);case 2:return new e(s,o)}return new e(s,o,t)}return e.apply(this,arguments)};return s.prototype=e.prototype,s}(u):j&&"function"==typeof u?n(Function.call,u):u,j&&((h.virtual||(h.virtual={}))[d]=u,e&a.R&&b&&!b[d]&&i(b,d,u)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},"./node_modules/core-js/library/modules/_fails.js":e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},"./node_modules/core-js/library/modules/_for-of.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_ctx.js"),r=o("./node_modules/core-js/library/modules/_iter-call.js"),n=o("./node_modules/core-js/library/modules/_is-array-iter.js"),i=o("./node_modules/core-js/library/modules/_an-object.js"),l=o("./node_modules/core-js/library/modules/_to-length.js"),a=o("./node_modules/core-js/library/modules/core.get-iterator-method.js"),d={},c={},u=e.exports=function(e,s,o,u,m){var f,_,j,p,y=m?function(){return e}:a(e),h=t(o,u,s?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(n(y)){for(f=l(e.length);f>b;b++)if((p=s?h(i(_=e[b])[0],_[1]):h(e[b]))===d||p===c)return p}else for(j=y.call(e);!(_=j.next()).done;)if((p=r(j,h,_.value,s))===d||p===c)return p};u.BREAK=d,u.RETURN=c},"./node_modules/core-js/library/modules/_global.js":e=>{var s=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=s)},"./node_modules/core-js/library/modules/_has.js":e=>{var s={}.hasOwnProperty;e.exports=function(e,o){return s.call(e,o)}},"./node_modules/core-js/library/modules/_hide.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_object-dp.js"),r=o("./node_modules/core-js/library/modules/_property-desc.js");e.exports=o("./node_modules/core-js/library/modules/_descriptors.js")?function(e,s,o){return t.f(e,s,r(1,o))}:function(e,s,o){return e[s]=o,e}},"./node_modules/core-js/library/modules/_html.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_global.js").document;e.exports=t&&t.documentElement},"./node_modules/core-js/library/modules/_ie8-dom-define.js":(e,s,o)=>{e.exports=!o("./node_modules/core-js/library/modules/_descriptors.js")&&!o("./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty(o("./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_invoke.js":e=>{e.exports=function(e,s,o){var t=void 0===o;switch(s.length){case 0:return t?e():e.call(o);case 1:return t?e(s[0]):e.call(o,s[0]);case 2:return t?e(s[0],s[1]):e.call(o,s[0],s[1]);case 3:return t?e(s[0],s[1],s[2]):e.call(o,s[0],s[1],s[2]);case 4:return t?e(s[0],s[1],s[2],s[3]):e.call(o,s[0],s[1],s[2],s[3])}return e.apply(o,s)}},"./node_modules/core-js/library/modules/_iobject.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==t(e)?e.split(""):Object(e)}},"./node_modules/core-js/library/modules/_is-array-iter.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_iterators.js"),r=o("./node_modules/core-js/library/modules/_wks.js")("iterator"),n=Array.prototype;e.exports=function(e){return void 0!==e&&(t.Array===e||n[r]===e)}},"./node_modules/core-js/library/modules/_is-array.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_cof.js");e.exports=Array.isArray||function(e){return"Array"==t(e)}},"./node_modules/core-js/library/modules/_is-object.js":e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/core-js/library/modules/_iter-call.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_an-object.js");e.exports=function(e,s,o,r){try{return r?s(t(o)[0],o[1]):s(o)}catch(s){var n=e.return;throw void 0!==n&&t(n.call(e)),s}}},"./node_modules/core-js/library/modules/_iter-create.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_object-create.js"),r=o("./node_modules/core-js/library/modules/_property-desc.js"),n=o("./node_modules/core-js/library/modules/_set-to-string-tag.js"),i={};o("./node_modules/core-js/library/modules/_hide.js")(i,o("./node_modules/core-js/library/modules/_wks.js")("iterator"),(function(){return this})),e.exports=function(e,s,o){e.prototype=t(i,{next:r(1,o)}),n(e,s+" Iterator")}},"./node_modules/core-js/library/modules/_iter-define.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_library.js"),r=o("./node_modules/core-js/library/modules/_export.js"),n=o("./node_modules/core-js/library/modules/_redefine.js"),i=o("./node_modules/core-js/library/modules/_hide.js"),l=o("./node_modules/core-js/library/modules/_iterators.js"),a=o("./node_modules/core-js/library/modules/_iter-create.js"),d=o("./node_modules/core-js/library/modules/_set-to-string-tag.js"),c=o("./node_modules/core-js/library/modules/_object-gpo.js"),u=o("./node_modules/core-js/library/modules/_wks.js")("iterator"),m=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,s,o,_,j,p,y){a(o,s,_);var h,b,g,S=function(e){if(!m&&e in M)return M[e];switch(e){case"keys":case"values":return function(){return new o(this,e)}}return function(){return new o(this,e)}},v=s+" Iterator",C="values"==j,T=!1,M=e.prototype,E=M[u]||M["@@iterator"]||j&&M[j],I=E||S(j),O=j?C?S("entries"):I:void 0,w="Array"==s&&M.entries||E;if(w&&(g=c(w.call(new e)))!==Object.prototype&&g.next&&(d(g,v,!0),t||"function"==typeof g[u]||i(g,u,f)),C&&E&&"values"!==E.name&&(T=!0,I=function(){return E.call(this)}),t&&!y||!m&&!T&&M[u]||i(M,u,I),l[s]=I,l[v]=f,j)if(h={values:C?I:S("values"),keys:p?I:S("keys"),entries:O},y)for(b in h)b in M||n(M,b,h[b]);else r(r.P+r.F*(m||T),s,h);return h}},"./node_modules/core-js/library/modules/_iter-detect.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_wks.js")("iterator"),r=!1;try{var n=[7][t]();n.return=function(){r=!0},Array.from(n,(function(){throw 2}))}catch(e){}e.exports=function(e,s){if(!s&&!r)return!1;var o=!1;try{var n=[7],i=n[t]();i.next=function(){return{done:o=!0}},n[t]=function(){return i},e(n)}catch(e){}return o}},"./node_modules/core-js/library/modules/_iter-step.js":e=>{e.exports=function(e,s){return{value:s,done:!!e}}},"./node_modules/core-js/library/modules/_iterators.js":e=>{e.exports={}},"./node_modules/core-js/library/modules/_library.js":e=>{e.exports=!0},"./node_modules/core-js/library/modules/_meta.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_uid.js")("meta"),r=o("./node_modules/core-js/library/modules/_is-object.js"),n=o("./node_modules/core-js/library/modules/_has.js"),i=o("./node_modules/core-js/library/modules/_object-dp.js").f,l=0,a=Object.isExtensible||function(){return!0},d=!o("./node_modules/core-js/library/modules/_fails.js")((function(){return a(Object.preventExtensions({}))})),c=function(e){i(e,t,{value:{i:"O"+ ++l,w:{}}})},u=e.exports={KEY:t,NEED:!1,fastKey:function(e,s){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,t)){if(!a(e))return"F";if(!s)return"E";c(e)}return e[t].i},getWeak:function(e,s){if(!n(e,t)){if(!a(e))return!0;if(!s)return!1;c(e)}return e[t].w},onFreeze:function(e){return d&&u.NEED&&a(e)&&!n(e,t)&&c(e),e}}},"./node_modules/core-js/library/modules/_microtask.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_global.js"),r=o("./node_modules/core-js/library/modules/_task.js").set,n=t.MutationObserver||t.WebKitMutationObserver,i=t.process,l=t.Promise,a="process"==o("./node_modules/core-js/library/modules/_cof.js")(i);e.exports=function(){var e,s,o,d=function(){var t,r;for(a&&(t=i.domain)&&t.exit();e;){r=e.fn,e=e.next;try{r()}catch(t){throw e?o():s=void 0,t}}s=void 0,t&&t.enter()};if(a)o=function(){i.nextTick(d)};else if(!n||t.navigator&&t.navigator.standalone)if(l&&l.resolve){var c=l.resolve(void 0);o=function(){c.then(d)}}else o=function(){r.call(t,d)};else{var u=!0,m=document.createTextNode("");new n(d).observe(m,{characterData:!0}),o=function(){m.data=u=!u}}return function(t){var r={fn:t,next:void 0};s&&(s.next=r),e||(e=r,o()),s=r}}},"./node_modules/core-js/library/modules/_new-promise-capability.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_a-function.js");function r(e){var s,o;this.promise=new e((function(e,t){if(void 0!==s||void 0!==o)throw TypeError("Bad Promise constructor");s=e,o=t})),this.resolve=t(s),this.reject=t(o)}e.exports.f=function(e){return new r(e)}},"./node_modules/core-js/library/modules/_object-assign.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_descriptors.js"),r=o("./node_modules/core-js/library/modules/_object-keys.js"),n=o("./node_modules/core-js/library/modules/_object-gops.js"),i=o("./node_modules/core-js/library/modules/_object-pie.js"),l=o("./node_modules/core-js/library/modules/_to-object.js"),a=o("./node_modules/core-js/library/modules/_iobject.js"),d=Object.assign;e.exports=!d||o("./node_modules/core-js/library/modules/_fails.js")((function(){var e={},s={},o=Symbol(),t="abcdefghijklmnopqrst";return e[o]=7,t.split("").forEach((function(e){s[e]=e})),7!=d({},e)[o]||Object.keys(d({},s)).join("")!=t}))?function(e,s){for(var o=l(e),d=arguments.length,c=1,u=n.f,m=i.f;d>c;)for(var f,_=a(arguments[c++]),j=u?r(_).concat(u(_)):r(_),p=j.length,y=0;p>y;)f=j[y++],t&&!m.call(_,f)||(o[f]=_[f]);return o}:d},"./node_modules/core-js/library/modules/_object-create.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_an-object.js"),r=o("./node_modules/core-js/library/modules/_object-dps.js"),n=o("./node_modules/core-js/library/modules/_enum-bug-keys.js"),i=o("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),l=function(){},a=function(){var e,s=o("./node_modules/core-js/library/modules/_dom-create.js")("iframe"),t=n.length;for(s.style.display="none",o("./node_modules/core-js/library/modules/_html.js").appendChild(s),s.src="javascript:",(e=s.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),a=e.F;t--;)delete a.prototype[n[t]];return a()};e.exports=Object.create||function(e,s){var o;return null!==e?(l.prototype=t(e),o=new l,l.prototype=null,o[i]=e):o=a(),void 0===s?o:r(o,s)}},"./node_modules/core-js/library/modules/_object-dp.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_an-object.js"),r=o("./node_modules/core-js/library/modules/_ie8-dom-define.js"),n=o("./node_modules/core-js/library/modules/_to-primitive.js"),i=Object.defineProperty;s.f=o("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(e,s,o){if(t(e),s=n(s,!0),t(o),r)try{return i(e,s,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[s]=o.value),e}},"./node_modules/core-js/library/modules/_object-dps.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_object-dp.js"),r=o("./node_modules/core-js/library/modules/_an-object.js"),n=o("./node_modules/core-js/library/modules/_object-keys.js");e.exports=o("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function(e,s){r(e);for(var o,i=n(s),l=i.length,a=0;l>a;)t.f(e,o=i[a++],s[o]);return e}},"./node_modules/core-js/library/modules/_object-gops.js":(e,s)=>{s.f=Object.getOwnPropertySymbols},"./node_modules/core-js/library/modules/_object-gpo.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_has.js"),r=o("./node_modules/core-js/library/modules/_to-object.js"),n=o("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),t(e,n)?e[n]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},"./node_modules/core-js/library/modules/_object-keys-internal.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_has.js"),r=o("./node_modules/core-js/library/modules/_to-iobject.js"),n=o("./node_modules/core-js/library/modules/_array-includes.js")(!1),i=o("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,s){var o,l=r(e),a=0,d=[];for(o in l)o!=i&&t(l,o)&&d.push(o);for(;s.length>a;)t(l,o=s[a++])&&(~n(d,o)||d.push(o));return d}},"./node_modules/core-js/library/modules/_object-keys.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_object-keys-internal.js"),r=o("./node_modules/core-js/library/modules/_enum-bug-keys.js");e.exports=Object.keys||function(e){return t(e,r)}},"./node_modules/core-js/library/modules/_object-pie.js":(e,s)=>{s.f={}.propertyIsEnumerable},"./node_modules/core-js/library/modules/_perform.js":e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},"./node_modules/core-js/library/modules/_promise-resolve.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_an-object.js"),r=o("./node_modules/core-js/library/modules/_is-object.js"),n=o("./node_modules/core-js/library/modules/_new-promise-capability.js");e.exports=function(e,s){if(t(e),r(s)&&s.constructor===e)return s;var o=n.f(e);return(0,o.resolve)(s),o.promise}},"./node_modules/core-js/library/modules/_property-desc.js":e=>{e.exports=function(e,s){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:s}}},"./node_modules/core-js/library/modules/_redefine-all.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_hide.js");e.exports=function(e,s,o){for(var r in s)o&&e[r]?e[r]=s[r]:t(e,r,s[r]);return e}},"./node_modules/core-js/library/modules/_redefine.js":(e,s,o)=>{e.exports=o("./node_modules/core-js/library/modules/_hide.js")},"./node_modules/core-js/library/modules/_set-collection-from.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_export.js"),r=o("./node_modules/core-js/library/modules/_a-function.js"),n=o("./node_modules/core-js/library/modules/_ctx.js"),i=o("./node_modules/core-js/library/modules/_for-of.js");e.exports=function(e){t(t.S,e,{from:function(e){var s,o,t,l,a=arguments[1];return r(this),(s=void 0!==a)&&r(a),null==e?new this:(o=[],s?(t=0,l=n(a,arguments[2],2),i(e,!1,(function(e){o.push(l(e,t++))}))):i(e,!1,o.push,o),new this(o))}})}},"./node_modules/core-js/library/modules/_set-collection-of.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_export.js");e.exports=function(e){t(t.S,e,{of:function(){for(var e=arguments.length,s=new Array(e);e--;)s[e]=arguments[e];return new this(s)}})}},"./node_modules/core-js/library/modules/_set-species.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_global.js"),r=o("./node_modules/core-js/library/modules/_core.js"),n=o("./node_modules/core-js/library/modules/_object-dp.js"),i=o("./node_modules/core-js/library/modules/_descriptors.js"),l=o("./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e){var s="function"==typeof r[e]?r[e]:t[e];i&&s&&!s[l]&&n.f(s,l,{configurable:!0,get:function(){return this}})}},"./node_modules/core-js/library/modules/_set-to-string-tag.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_object-dp.js").f,r=o("./node_modules/core-js/library/modules/_has.js"),n=o("./node_modules/core-js/library/modules/_wks.js")("toStringTag");e.exports=function(e,s,o){e&&!r(e=o?e:e.prototype,n)&&t(e,n,{configurable:!0,value:s})}},"./node_modules/core-js/library/modules/_shared-key.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_shared.js")("keys"),r=o("./node_modules/core-js/library/modules/_uid.js");e.exports=function(e){return t[e]||(t[e]=r(e))}},"./node_modules/core-js/library/modules/_shared.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_core.js"),r=o("./node_modules/core-js/library/modules/_global.js"),n=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,s){return n[e]||(n[e]=void 0!==s?s:{})})("versions",[]).push({version:t.version,mode:o("./node_modules/core-js/library/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/library/modules/_species-constructor.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_an-object.js"),r=o("./node_modules/core-js/library/modules/_a-function.js"),n=o("./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e,s){var o,i=t(e).constructor;return void 0===i||null==(o=t(i)[n])?s:r(o)}},"./node_modules/core-js/library/modules/_string-at.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_to-integer.js"),r=o("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return function(s,o){var n,i,l=String(r(s)),a=t(o),d=l.length;return a<0||a>=d?e?"":void 0:(n=l.charCodeAt(a))<55296||n>56319||a+1===d||(i=l.charCodeAt(a+1))<56320||i>57343?e?l.charAt(a):n:e?l.slice(a,a+2):i-56320+(n-55296<<10)+65536}}},"./node_modules/core-js/library/modules/_task.js":(e,s,o)=>{var t,r,n,i=o("./node_modules/core-js/library/modules/_ctx.js"),l=o("./node_modules/core-js/library/modules/_invoke.js"),a=o("./node_modules/core-js/library/modules/_html.js"),d=o("./node_modules/core-js/library/modules/_dom-create.js"),c=o("./node_modules/core-js/library/modules/_global.js"),u=c.process,m=c.setImmediate,f=c.clearImmediate,_=c.MessageChannel,j=c.Dispatch,p=0,y={},h=function(){var e=+this;if(y.hasOwnProperty(e)){var s=y[e];delete y[e],s()}},b=function(e){h.call(e.data)};m&&f||(m=function(e){for(var s=[],o=1;arguments.length>o;)s.push(arguments[o++]);return y[++p]=function(){l("function"==typeof e?e:Function(e),s)},t(p),p},f=function(e){delete y[e]},"process"==o("./node_modules/core-js/library/modules/_cof.js")(u)?t=function(e){u.nextTick(i(h,e,1))}:j&&j.now?t=function(e){j.now(i(h,e,1))}:_?(n=(r=new _).port2,r.port1.onmessage=b,t=i(n.postMessage,n,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(t=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):t="onreadystatechange"in d("script")?function(e){a.appendChild(d("script")).onreadystatechange=function(){a.removeChild(this),h.call(e)}}:function(e){setTimeout(i(h,e,1),0)}),e.exports={set:m,clear:f}},"./node_modules/core-js/library/modules/_to-absolute-index.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_to-integer.js"),r=Math.max,n=Math.min;e.exports=function(e,s){return(e=t(e))<0?r(e+s,0):n(e,s)}},"./node_modules/core-js/library/modules/_to-integer.js":e=>{var s=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:s)(e)}},"./node_modules/core-js/library/modules/_to-iobject.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_iobject.js"),r=o("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return t(r(e))}},"./node_modules/core-js/library/modules/_to-length.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_to-integer.js"),r=Math.min;e.exports=function(e){return e>0?r(t(e),9007199254740991):0}},"./node_modules/core-js/library/modules/_to-object.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return Object(t(e))}},"./node_modules/core-js/library/modules/_to-primitive.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,s){if(!t(e))return e;var o,r;if(s&&"function"==typeof(o=e.toString)&&!t(r=o.call(e)))return r;if("function"==typeof(o=e.valueOf)&&!t(r=o.call(e)))return r;if(!s&&"function"==typeof(o=e.toString)&&!t(r=o.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/_uid.js":e=>{var s=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++s+o).toString(36))}},"./node_modules/core-js/library/modules/_user-agent.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_global.js").navigator;e.exports=t&&t.userAgent||""},"./node_modules/core-js/library/modules/_validate-collection.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,s){if(!t(e)||e._t!==s)throw TypeError("Incompatible receiver, "+s+" required!");return e}},"./node_modules/core-js/library/modules/_wks.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_shared.js")("wks"),r=o("./node_modules/core-js/library/modules/_uid.js"),n=o("./node_modules/core-js/library/modules/_global.js").Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:r)("Symbol."+e))}).store=t},"./node_modules/core-js/library/modules/core.get-iterator-method.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_classof.js"),r=o("./node_modules/core-js/library/modules/_wks.js")("iterator"),n=o("./node_modules/core-js/library/modules/_iterators.js");e.exports=o("./node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||n[t(e)]}},"./node_modules/core-js/library/modules/es6.array.iterator.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_add-to-unscopables.js"),r=o("./node_modules/core-js/library/modules/_iter-step.js"),n=o("./node_modules/core-js/library/modules/_iterators.js"),i=o("./node_modules/core-js/library/modules/_to-iobject.js");e.exports=o("./node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",(function(e,s){this._t=i(e),this._i=0,this._k=s}),(function(){var e=this._t,s=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,r(1)):r(0,"keys"==s?o:"values"==s?e[o]:[o,e[o]])}),"values"),n.Arguments=n.Array,t("keys"),t("values"),t("entries")},"./node_modules/core-js/library/modules/es6.map.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_collection-strong.js"),r=o("./node_modules/core-js/library/modules/_validate-collection.js");e.exports=o("./node_modules/core-js/library/modules/_collection.js")("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var s=t.getEntry(r(this,"Map"),e);return s&&s.v},set:function(e,s){return t.def(r(this,"Map"),0===e?0:e,s)}},t,!0)},"./node_modules/core-js/library/modules/es6.object.assign.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_export.js");t(t.S+t.F,"Object",{assign:o("./node_modules/core-js/library/modules/_object-assign.js")})},"./node_modules/core-js/library/modules/es6.object.to-string.js":()=>{},"./node_modules/core-js/library/modules/es6.promise.js":(e,s,o)=>{var t,r,n,i,l=o("./node_modules/core-js/library/modules/_library.js"),a=o("./node_modules/core-js/library/modules/_global.js"),d=o("./node_modules/core-js/library/modules/_ctx.js"),c=o("./node_modules/core-js/library/modules/_classof.js"),u=o("./node_modules/core-js/library/modules/_export.js"),m=o("./node_modules/core-js/library/modules/_is-object.js"),f=o("./node_modules/core-js/library/modules/_a-function.js"),_=o("./node_modules/core-js/library/modules/_an-instance.js"),j=o("./node_modules/core-js/library/modules/_for-of.js"),p=o("./node_modules/core-js/library/modules/_species-constructor.js"),y=o("./node_modules/core-js/library/modules/_task.js").set,h=o("./node_modules/core-js/library/modules/_microtask.js")(),b=o("./node_modules/core-js/library/modules/_new-promise-capability.js"),g=o("./node_modules/core-js/library/modules/_perform.js"),S=o("./node_modules/core-js/library/modules/_user-agent.js"),v=o("./node_modules/core-js/library/modules/_promise-resolve.js"),C=a.TypeError,T=a.process,M=T&&T.versions,E=M&&M.v8||"",I=a.Promise,O="process"==c(T),w=function(){},x=r=b.f,A=!!function(){try{var e=I.resolve(1),s=(e.constructor={})[o("./node_modules/core-js/library/modules/_wks.js")("species")]=function(e){e(w,w)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(w)instanceof s&&0!==E.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),k=function(e){var s;return!(!m(e)||"function"!=typeof(s=e.then))&&s},N=function(e,s){if(!e._n){e._n=!0;var o=e._c;h((function(){for(var t=e._v,r=1==e._s,n=0,i=function(s){var o,n,i,l=r?s.ok:s.fail,a=s.resolve,d=s.reject,c=s.domain;try{l?(r||(2==e._h&&R(e),e._h=1),!0===l?o=t:(c&&c.enter(),o=l(t),c&&(c.exit(),i=!0)),o===s.promise?d(C("Promise-chain cycle")):(n=k(o))?n.call(o,a,d):a(o)):d(t)}catch(e){c&&!i&&c.exit(),d(e)}};o.length>n;)i(o[n++]);e._c=[],e._n=!1,s&&!e._h&&U(e)}))}},U=function(e){y.call(a,(function(){var s,o,t,r=e._v,n=P(e);if(n&&(s=g((function(){O?T.emit("unhandledRejection",r,e):(o=a.onunhandledrejection)?o({promise:e,reason:r}):(t=a.console)&&t.error&&t.error("Unhandled promise rejection",r)})),e._h=O||P(e)?2:1),e._a=void 0,n&&s.e)throw s.v}))},P=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){y.call(a,(function(){var s;O?T.emit("rejectionHandled",e):(s=a.onrejectionhandled)&&s({promise:e,reason:e._v})}))},V=function(e){var s=this;s._d||(s._d=!0,(s=s._w||s)._v=e,s._s=2,s._a||(s._a=s._c.slice()),N(s,!0))},D=function(e){var s,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===e)throw C("Promise can't be resolved itself");(s=k(e))?h((function(){var t={_w:o,_d:!1};try{s.call(e,d(D,t,1),d(V,t,1))}catch(e){V.call(t,e)}})):(o._v=e,o._s=1,N(o,!1))}catch(e){V.call({_w:o,_d:!1},e)}}};A||(I=function(e){_(this,I,"Promise","_h"),f(e),t.call(this);try{e(d(D,this,1),d(V,this,1))}catch(e){V.call(this,e)}},(t=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=o("./node_modules/core-js/library/modules/_redefine-all.js")(I.prototype,{then:function(e,s){var o=x(p(this,I));return o.ok="function"!=typeof e||e,o.fail="function"==typeof s&&s,o.domain=O?T.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&N(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new t;this.promise=e,this.resolve=d(D,e,1),this.reject=d(V,e,1)},b.f=x=function(e){return e===I||e===i?new n(e):r(e)}),u(u.G+u.W+u.F*!A,{Promise:I}),o("./node_modules/core-js/library/modules/_set-to-string-tag.js")(I,"Promise"),o("./node_modules/core-js/library/modules/_set-species.js")("Promise"),i=o("./node_modules/core-js/library/modules/_core.js").Promise,u(u.S+u.F*!A,"Promise",{reject:function(e){var s=x(this);return(0,s.reject)(e),s.promise}}),u(u.S+u.F*(l||!A),"Promise",{resolve:function(e){return v(l&&this===i?I:this,e)}}),u(u.S+u.F*!(A&&o("./node_modules/core-js/library/modules/_iter-detect.js")((function(e){I.all(e).catch(w)}))),"Promise",{all:function(e){var s=this,o=x(s),t=o.resolve,r=o.reject,n=g((function(){var o=[],n=0,i=1;j(e,!1,(function(e){var l=n++,a=!1;o.push(void 0),i++,s.resolve(e).then((function(e){a||(a=!0,o[l]=e,--i||t(o))}),r)})),--i||t(o)}));return n.e&&r(n.v),o.promise},race:function(e){var s=this,o=x(s),t=o.reject,r=g((function(){j(e,!1,(function(e){s.resolve(e).then(o.resolve,t)}))}));return r.e&&t(r.v),o.promise}})},"./node_modules/core-js/library/modules/es6.string.iterator.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_string-at.js")(!0);o("./node_modules/core-js/library/modules/_iter-define.js")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,s=this._t,o=this._i;return o>=s.length?{value:void 0,done:!0}:(e=t(s,o),this._i+=e.length,{value:e,done:!1})}))},"./node_modules/core-js/library/modules/es7.map.from.js":(e,s,o)=>{o("./node_modules/core-js/library/modules/_set-collection-from.js")("Map")},"./node_modules/core-js/library/modules/es7.map.of.js":(e,s,o)=>{o("./node_modules/core-js/library/modules/_set-collection-of.js")("Map")},"./node_modules/core-js/library/modules/es7.map.to-json.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_export.js");t(t.P+t.R,"Map",{toJSON:o("./node_modules/core-js/library/modules/_collection-to-json.js")("Map")})},"./node_modules/core-js/library/modules/es7.promise.finally.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_export.js"),r=o("./node_modules/core-js/library/modules/_core.js"),n=o("./node_modules/core-js/library/modules/_global.js"),i=o("./node_modules/core-js/library/modules/_species-constructor.js"),l=o("./node_modules/core-js/library/modules/_promise-resolve.js");t(t.P+t.R,"Promise",{finally:function(e){var s=i(this,r.Promise||n.Promise),o="function"==typeof e;return this.then(o?function(o){return l(s,e()).then((function(){return o}))}:e,o?function(o){return l(s,e()).then((function(){throw o}))}:e)}})},"./node_modules/core-js/library/modules/es7.promise.try.js":(e,s,o)=>{var t=o("./node_modules/core-js/library/modules/_export.js"),r=o("./node_modules/core-js/library/modules/_new-promise-capability.js"),n=o("./node_modules/core-js/library/modules/_perform.js");t(t.S,"Promise",{try:function(e){var s=r.f(this),o=n(e);return(o.e?s.reject:s.resolve)(o.v),s.promise}})},"./node_modules/core-js/library/modules/web.dom.iterable.js":(e,s,o)=>{o("./node_modules/core-js/library/modules/es6.array.iterator.js");for(var t=o("./node_modules/core-js/library/modules/_global.js"),r=o("./node_modules/core-js/library/modules/_hide.js"),n=o("./node_modules/core-js/library/modules/_iterators.js"),i=o("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<l.length;a++){var d=l[a],c=t[d],u=c&&c.prototype;u&&!u[i]&&r(u,i,d),n[d]=n.Array}},"../../../config.js":s=>{s.exports=e},"../../../platform.js":e=>{e.exports=s},"../../messages/messageContentType":e=>{e.exports=o},"../../model/conversationType":e=>{e.exports=t},"../../model/nullUserInfo":e=>{e.exports=r},"../../util/longUtil.js":e=>{e.exports=n},"../engine/avenginekit":e=>{e.exports=i},"../engine/avenginekitproxy":e=>{e.exports=l},"../engine/callEndReason":e=>{e.exports=a},"../engine/callSession":e=>{e.exports=d},"../engine/callState":e=>{e.exports=c},"../engine/participantProfile":e=>{e.exports=u},"../engine/subscriber":e=>{e.exports=m},"../messages/addParticipantsMessageContent":e=>{e.exports=f},"../messages/callAnswerMessageContent":e=>{e.exports=_},"../messages/callByeMessageContent":e=>{e.exports=j},"../messages/callModifyMessageContent":e=>{e.exports=p},"../messages/callSignalMessageContent":e=>{e.exports=y},"../messages/callStartMessageContent":e=>{e.exports=h},"../messages/muteVideoMessageContent":e=>{e.exports=b}},S={};function v(e){var s=S[e];if(void 0!==s)return s.exports;var o=S[e]={exports:{}};return g[e](o,o.exports,v),o.exports}v.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return v.d(s,{a:s}),s},v.d=(e,s)=>{for(var o in s)v.o(s,o)&&!v.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})},v.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),v.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var C=v("./av/internal/avenginekitImpl.js"),T=C.WfcAVEngineKitImpl,M=C.default;export{T as WfcAVEngineKitImpl,M as default};
//# sourceMappingURL=engine.min.js.map