!function(e,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o(require("../../../platform.js"),require("../../messages/messageContentType"),require("../../model/conversation"),require("../../model/conversationType"),require("../../util/longUtil.js"),require("../engine/CallSession"),require("../engine/PeerConnectionClient"),require("../engine/avenginekit"),require("../engine/avenginekitproxy"),require("../engine/callEndReason"),require("../engine/callState"),require("../engine/videoProfile"),require("../messages/addParticipantsMessageContent"),require("../messages/callAnswerMessageContent"),require("../messages/callByeMessageContent"),require("../messages/callModifyMessageContent"),require("../messages/callStartMessageContent"),require("../messages/conferenceChangeModeContent"),require("../messages/muteVideoMessageContent"));else if("function"==typeof define&&define.amd)define(["../../../platform.js","../../messages/messageContentType","../../model/conversation","../../model/conversationType","../../util/longUtil.js","../engine/CallSession","../engine/PeerConnectionClient","../engine/avenginekit","../engine/avenginekitproxy","../engine/callEndReason","../engine/callState","../engine/videoProfile","../messages/addParticipantsMessageContent","../messages/callAnswerMessageContent","../messages/callByeMessageContent","../messages/callModifyMessageContent","../messages/callStartMessageContent","../messages/conferenceChangeModeContent","../messages/muteVideoMessageContent"],o);else{var t="object"==typeof exports?o(require("../../../platform.js"),require("../../messages/messageContentType"),require("../../model/conversation"),require("../../model/conversationType"),require("../../util/longUtil.js"),require("../engine/CallSession"),require("../engine/PeerConnectionClient"),require("../engine/avenginekit"),require("../engine/avenginekitproxy"),require("../engine/callEndReason"),require("../engine/callState"),require("../engine/videoProfile"),require("../messages/addParticipantsMessageContent"),require("../messages/callAnswerMessageContent"),require("../messages/callByeMessageContent"),require("../messages/callModifyMessageContent"),require("../messages/callStartMessageContent"),require("../messages/conferenceChangeModeContent"),require("../messages/muteVideoMessageContent")):o(e["../../../platform.js"],e["../../messages/messageContentType"],e["../../model/conversation"],e["../../model/conversationType"],e["../../util/longUtil.js"],e["../engine/CallSession"],e["../engine/PeerConnectionClient"],e["../engine/avenginekit"],e["../engine/avenginekitproxy"],e["../engine/callEndReason"],e["../engine/callState"],e["../engine/videoProfile"],e["../messages/addParticipantsMessageContent"],e["../messages/callAnswerMessageContent"],e["../messages/callByeMessageContent"],e["../messages/callModifyMessageContent"],e["../messages/callStartMessageContent"],e["../messages/conferenceChangeModeContent"],e["../messages/muteVideoMessageContent"]);for(var s in t)("object"==typeof exports?exports:e)[s]=t[s]}}(window,(function(e,o,t,s,r,n,i,a,l,u,d,c,A,f,m,_,p,j,h){return function(e){var o={};function t(s){if(o[s])return o[s].exports;var r=o[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=o,t.d=function(e,o,s){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)t.d(s,r,function(o){return e[o]}.bind(null,r));return s},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s="./av/internal/avenginekitImpl.js")}({"../../../platform.js":function(o,t){o.exports=e},"../../messages/messageContentType":function(e,t){e.exports=o},"../../model/conversation":function(e,o){e.exports=t},"../../model/conversationType":function(e,o){e.exports=s},"../../util/longUtil.js":function(e,o){e.exports=r},"../engine/CallSession":function(e,o){e.exports=n},"../engine/PeerConnectionClient":function(e,o){e.exports=i},"../engine/avenginekit":function(e,o){e.exports=a},"../engine/avenginekitproxy":function(e,o){e.exports=l},"../engine/callEndReason":function(e,o){e.exports=u},"../engine/callState":function(e,o){e.exports=d},"../engine/videoProfile":function(e,o){e.exports=c},"../messages/addParticipantsMessageContent":function(e,o){e.exports=A},"../messages/callAnswerMessageContent":function(e,o){e.exports=f},"../messages/callByeMessageContent":function(e,o){e.exports=m},"../messages/callModifyMessageContent":function(e,o){e.exports=_},"../messages/callStartMessageContent":function(e,o){e.exports=p},"../messages/conferenceChangeModeContent":function(e,o){e.exports=j},"../messages/muteVideoMessageContent":function(e,o){e.exports=h},"./av/internal/CallSessionImpl.js":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=x(t("./node_modules/babel-runtime/helpers/extends.js")),r=x(t("./node_modules/babel-runtime/regenerator/index.js")),n=x(t("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=x(t("./node_modules/babel-runtime/core-js/map.js")),a=x(t("./node_modules/babel-runtime/core-js/get-iterator.js")),l=x(t("./node_modules/babel-runtime/helpers/slicedToArray.js")),u=x(t("./node_modules/babel-runtime/core-js/json/stringify.js")),d=x(t("./node_modules/babel-runtime/core-js/object/get-prototype-of.js")),c=x(t("./node_modules/babel-runtime/helpers/classCallCheck.js")),A=x(t("./node_modules/babel-runtime/helpers/createClass.js")),f=x(t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),m=x(t("./node_modules/babel-runtime/helpers/inherits.js")),_=x(t("../engine/callState")),p=x(t("./av/internal/avenginekitImpl.js")),j=x(t("../engine/callEndReason")),h=x(t("../messages/callByeMessageContent")),y=x(t("./av/internal/PeerConnectionClientImpl.js")),b=t("../../../platform.js"),v=x(t("../engine/CallSession")),g=t("../../util/longUtil.js"),S=x(t("../engine/avenginekit")),C=x(t("../../model/conversationType")),I=x(t("../messages/conferenceChangeModeContent")),E=x(t("../../model/conversation")),M=x(t("./av/internal/roomErrorCode.js")),k=t("./av/internal/soundMeter.js"),T=x(t("../engine/avenginekitproxy")),O=x(t("../messages/muteVideoMessageContent")),w=x(t("../engine/videoProfile"));function x(e){return e&&e.__esModule?e:{default:e}}var R=function(e){function o(){var e,t,s,r;(0,c.default)(this,o);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=s=(0,f.default)(this,(e=o.__proto__||(0,d.default)(o)).call.apply(e,[this].concat(i))),s.audience=!1,s.joinTime=0,s.acceptTime=0,s.status=0,s.isAllBusy=!0,s.videoCamera="user",s.onVoipWindowClose=function(e){s.endCall(j.default.RemoteNetworkError),window.removeEventListener("beforeunload",s.onVoipWindowClose)},s.callTimeout=function(){var e=(new Date).valueOf();s.callTimer||(s.callTimer=setInterval(s.callTimeout,1e3));var o=(0,g.numberValue)(s.joinTime);if(0!==o){if(s.status===_.default.STATUS_INCOMING){if(e-o>6e4)return void s.endCall(j.default.REASON_Timeout)}else if(s.status!==_.default.STATUS_CONNECTED&&e-o>6e4)return void s.endCall(j.default.RemoteTimeout);s.peerConnectionClientMap.forEach((function(o,t){var r=(0,g.gt)(o.acceptTime,o.joinTime)?o.acceptTime:o.joinTime;o.status!==_.default.STATUS_CONNECTED&&(0,g.gt)(r,0)&&e-(0,g.numberValue)(r)>6e4&&(console.log("client timeout",e,(0,g.numberValue)(o.acceptTime),(0,g.numberValue)(o.joinTime)),s.endUserCall(t,j.default.RemoteTimeout))}))}},s.gotRemoteStream=function(e,o){s.sessionCallback&&s.sessionCallback.didReceiveRemoteVideoTrack(e,o.streams[0]);var t=o.streams[0];t.onremovetrack=function(o){console.log("pc remove remote stream",o),s.sessionCallback&&s.sessionCallback.didRemoveRemoteVideoTrack(e)};var r=new k.SoundMeter(window.audioContext);r.connectToSource(t,(function(e){console.log("connect to soundMeter",e)}));var n=s.getPeerConnectionClient(e);n.soundMeter=r,n.stream=o.streams[0],console.log("pc received remote stream",e,o.streams[0],o.streams[0].getVideoTracks().length,o.streams[0].getAudioTracks().length)},s.onIceCandidate=function(e,o,t){if(t.candidate){var r={};if(r.session_id=s.sessionId,e===s.selfUserInfo.uid)r.handle_id=s.handleId;else{var n=s.getClient(e);r.handle_id=n.handleId}var i={};i.candidate=t.candidate.candidate,i.sdpMLineIndex=t.candidate.sdpMLineIndex,i.sdpMid=t.candidate.sdpMid,i.pin=s.pin,r.candidate=i,p.default.sendConferenceRequest(s.sessionId,s.callId,"trickle",(0,u.default)(r),(function(e,o){0!==e&&console.log("conference request, trickle error",e)}))}},s.onIceStateChange=function(e,o,t){if(o){if(s.selfUserInfo.uid===e)return s.connectedTime||(s.connectedTime=(new Date).getTime()),void s.setState(_.default.STATUS_CONNECTED);var r=s.getClient(e);console.log("ICE state change event: ",t),"connected"===o.iceConnectionState&&(s.setState(_.default.STATUS_CONNECTED),r.status=_.default.STATUS_CONNECTED,s.sessionCallback&&s.sessionCallback.didParticipantConnected(e)),"disconnected"===o.iceConnectionState||"failed"===o.iceConnectionState&&(console.log("iceConnectionState failed, endCall"),s.endUserCall(e,j.default.REASON_MediaError))}},r=t,(0,f.default)(s,r)}var t,v,x,R,N,P;return(0,m.default)(o,e),(0,A.default)(o,[{key:"getClient",value:function(e){return this.peerConnectionClientMap.get(e)}},{key:"getParticipantIds",value:function(){var e=[],o=!0,t=!1,s=void 0;try{for(var r,n=(0,a.default)(this.peerConnectionClientMap);!(o=(r=n.next()).done);o=!0){var i=r.value,u=(0,l.default)(i,2),d=u[0];u[1];e.push(d)}}catch(e){t=!0,s=e}finally{try{!o&&n.return&&n.return()}finally{if(t)throw s}}return e}},{key:"setAcceptTime",value:function(e){this.acceptTime||(this.acceptTime=e),this.updateInitiator()}},{key:"setUserAcceptTime",value:function(e,o){console.log("setUserAcceptTime",e,o);var t=this.getClient(e);t?t.acceptTime=o:console.error("setUserAcceptTime undefined",e,this.status,this.peerConnectionClientMap)}},{key:"setUserJoinTime",value:function(e,o){this.getClient(e).joinTime=o}},{key:"getPeerConnectionClient",value:function(e){return this.peerConnectionClientMap.get(e)}},{key:"getPeerConnection",value:function(e){return this.peerConnectionClientMap.get(e).peerConnection}},{key:"answerCall",value:function(e){this.status===_.default.STATUS_INCOMING&&(this.setState(_.default.STATUS_CONNECTING),this.audioOnly&&!e&&(e=!0),this.audioOnly=e,p.default.answerCurrentCall())}},{key:"setState",value:function(e){if(this.status!==e){if(this.status!==_.default.STATUS_CONNECTED||e!==_.default.STATUS_CONNECTING){if(this.status=e,console.log("set status",e,this.startMsgUid),e===_.default.STATUS_IDLE||e===_.default.STATUS_CONNECTED){if(this.startMsgUid){var o={audioOnly:this.audioOnly};o.status=this.endReason,e===_.default.STATUS_CONNECTED?(o.connectTime=(new Date).getTime(),this.startTime=o.connectTime):o.endTime=(new Date).getTime(),p.default.updateCallStartMessageContent(this.startMsgUid,o)}}else e===_.default.STATUS_CONNECTING&&this.joinAndPublish();this.sessionCallback&&this.sessionCallback.didChangeState(e)}}else e===_.default.STATUS_CONNECTED&&this.sessionCallback&&this.sessionCallback.didChangeState(e)}},{key:"initSession",value:function(e,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.moCall=e,this.selfUserInfo=o,this.participantUserInfos=t,this.singleCall=t&&1===t.length,this.groupMemberUserInfos=r;var i=o;!e&&t&&t.length>0&&(i=t.filter((function(e){return e.uid===s.initiatorId}))[0]),this.sessionCallback.onInitial(this,o,i,t,r);var a=[];t&&t.length>0&&t.forEach((function(e){a.push(e.uid)})),this.initParticipantClientMap(a),n||(e?(this.setState(_.default.STATUS_OUTGOING),this.startPreview(this.audioOnly)):(this.setState(_.default.STATUS_INCOMING),this.playIncomingRing())),this.callTimeout(),window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audioContext=new AudioContext,setTimeout((function(){window.addEventListener("beforeunload",s.onVoipWindowClose)}),500),this.pcStatsTimer=setInterval((function(){s.peerConnectionClientMap.forEach((function(e,o){var t=e.peerConnection;t&&t.getStats().then((function(e){e.forEach((function(e){}))}))}));var e=s.publishPeerConnection&&s.publishPeerConnection._soundMeter;if(e){var o=e.instant.toFixed(2);e.slow.toFixed(2),e.clip;s.sessionCallback.didReportAudioVolume(s.selfUserInfo.uid,Number(o))}s.peerConnectionClientMap.forEach((function(e,o){if(e.soundMeter){var t=e.soundMeter.instant.toFixed(2);e.soundMeter.slow.toFixed(2),e.soundMeter.clip;s.sessionCallback.didReportAudioVolume(o,Number(t))}}))}),100)}},{key:"initParticipantClientMap",value:function(e){var o=this;console.log("initParticipantClientMap",e),this.peerConnectionClientMap||(this.peerConnectionClientMap=new i.default),!e||e.length<1||e.forEach((function(e){var t=new y.default(e,o);e===o.selfUserInfo.uid?t.status=_.default.STATUS_OUTGOING:t.status=_.default.STATUS_INCOMING,o.peerConnectionClientMap.set(e,t)}),this)}},{key:"inviteNewParticipants",value:function(e){var o=this;e.length&&(e=e.filter((function(e){return e!==o.selfUserInfo.uid&&o.participantUserInfos.findIndex((function(o){return o.uid===e}))<0}))).length&&(this.singleCall=!1,p.default.inviteNewParticipants(e,this.pin))}},{key:"getExistParticipantsStatus",value:function(){var e=this,o=[];return o.push({userId:this.selfUserInfo.uid,acceptTime:this.acceptTime?(0,g.numberValue)(this.acceptTime):0,joinTime:this.joinTime?(0,g.numberValue)(this.joinTime):0,videoMuted:this.videoMuted}),this.participantUserInfos.forEach((function(t){var s=e.getClient(t.uid);o.push({userId:s.userId,acceptTime:s.acceptTime?(0,g.numberValue)(s.acceptTime):0,joinTime:s.joinTime?(0,g.numberValue)(s.joinTime):0,videoMuted:s.videoMuted})}),this),o}},{key:"didAddNewParticipants",value:function(e,o){var t=this;console.log("didAddNewParticipants",e,o),e.forEach((function(e){var o=new y.default(e,t);o.status=_.default.STATUS_INCOMING,t.peerConnectionClientMap.set(e,o)}),this),o.forEach((function(e){t.participantUserInfos.push(e),t.sessionCallback&&t.sessionCallback.didParticipantJoined(e.uid,e)}),this)}},{key:"updateExistParticipant",value:function(e,o){var t=this;e.forEach((function(e){var s=t.getClient(e.userId);s.status=_.default.STATUS_INCOMING,s.joinTime=o,s.videoMuted=e.videoMuted,s.acceptTime=e.acceptTime}))}},{key:"updateVideoMute",value:function(e,o){var t=this.getClient(e);t&&t.videoMuted!==o&&(t.videoMuted=o,this.sessionCallback&&this.sessionCallback.didVideoMuted(e,o))}},{key:"defaultVideoConstraints",value:function(e){var o=void 0;if(e)o={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1};else{var t=w.default.getVideoProfile(S.default.VIDEO_PROFILE);o={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:{width:{ideal:t.width,max:t.width},height:{ideal:t.height,max:t.height},frameRate:{ideal:t.fps,max:t.fps}}}}return this.audioInputDeviceId&&(o.audio.deviceId={exact:this.audioInputDeviceId}),e||(this.videoInputDeviceId&&(o.video.deviceId={exact:this.videoInputDeviceId}),o.video.facingMode=this.videoCamera),console.log("camera stream constraints",o),o}},{key:"tinyVideoTrackConstraints",value:function(){var e=S.default.SMALL_STREAM_WIDTH?S.default.SMALL_STREAM_WIDTH:200,o=S.default.SMALL_STREAM_HEIGHT?S.default.SMALL_STREAM_HEIGHT:200,t={width:{ideal:e,max:e},height:{ideal:o,max:o}};return S.default.DISABLE_SMALL_STREAM_LOW_FPS?S.default.SMALL_STREAM_FPS&&(t.frameRate={ideal:S.default.SMALL_STREAM_FPS,max:S.default.SMALL_STREAM_FPS}):t.frameRate={max:8,ideal:8},t}},{key:"createLocalCameraVideoStream",value:(P=(0,n.default)(r.default.mark((function e(o){var t,s,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("createLocalCameraVideoStream",o),e.next=4,navigator.mediaDevices.getUserMedia(this.defaultVideoConstraints(o));case 4:return t=e.sent,console.log("Received local stream",t,o),this.sessionCallback&&this.sessionCallback.didCreateLocalVideoTrack(t),s=t.getVideoTracks(),o?s&&s.length>0&&(console.log("audioonly, stop video track"),s.forEach((function(e){return e.stop()}))):s&&s.length>0&&console.log("Using video device: "+s[0].label),(n=t.getAudioTracks()).length>0&&console.log("Using audio device: "+n[0].label),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(0),console.error("getUserMedia error",e.t0),this.sessionCallback&&this.sessionCallback.didCreateLocalVideoTrackError();case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return P.apply(this,arguments)})},{key:"startPreview",value:(N=(0,n.default)(r.default.mark((function e(o){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("start preview"),!this.conference||!this.audience){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.createLocalCameraVideoStream(o);case 5:this.cameraVideoStream=e.sent,this.cameraVideoStream||this.endCall(j.default.REASON_MediaError);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getDesktopSources",value:function(e){return b.desktopCapturer?b.desktopCapturer.getSources({types:e}):null}},{key:"startScreenShare",value:(R=(0,n.default)(r.default.mark((function e(o){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isScreenSharing()&&!this.audioOnly){e.next=2;break}return e.abrupt("return");case 2:if(console.log("start screen share"),console.log("desktopCapturer ",b.desktopCapturer),!b.desktopCapturer){e.next=11;break}return e.next=7,navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:(0,s.default)({chromeMediaSource:"desktop"},o)}});case 7:this.screenShareStream=e.sent,console.log("desktopCapturer screen share stream",this.screenShareStream),e.next=14;break;case 11:return e.next=13,navigator.mediaDevices.getDisplayMedia({audio:!1,video:!0});case 13:this.screenShareStream=e.sent;case 14:if(this.sessionCallback&&this.sessionCallback.didCreateLocalVideoTrack(this.screenShareStream),!this.videoSender){e.next=22;break}if(this.videoSender.replaceTrack(this.screenShareStream.getVideoTracks()[0]),S.default.DISABLE_DUAL_STREAM){e.next=22;break}return t=this.screenShareStream.getVideoTracks()[0].clone(),e.next=21,t.applyConstraints(this.tinyVideoTrackConstraints());case 21:this.smallVideoSender.replaceTrack(t);case 22:this.screenSharing=!0,this._stopVideoTrack(this.cameraVideoStream),this.notifyMuteState();case 25:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"isScreenSharing",value:function(){return!!this.screenShareStream}},{key:"stopScreenShare",value:function(){var e=this;this._stopVideoTrack(this.screenShareStream),this.screenShareStream=null,this.screenSharing=!1,this.videoMuted?this.notifyMuteState():(this.cameraVideoStream=null,(0,n.default)(r.default.mark((function o(){return r.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.createMediaSenders();case 2:e.sessionCallback&&e.sessionCallback.didCreateLocalVideoTrack(e.cameraVideoStream);case 3:case"end":return o.stop()}}),o,e)})))())}},{key:"_stopVideoTrack",value:function(e){e&&e.getTracks().forEach((function(e){"video"===e.kind&&e.stop()})),this.smallVideoSender&&this.smallVideoSender.track.stop()}},{key:"_stopVideoStream",value:function(e){e&&(e.getTracks().forEach((function(e){console.log("stop track",e.kind,e.id),e.stop()})),this.smallVideoSender&&this.smallVideoSender.track.stop())}},{key:"createPeerConnection",value:function(e,o){var t=this,s=this.getSelectedSdpSemantics();console.log("RTCPeerConnection configuration:",s);var r=new RTCPeerConnection(s);if(e!==this.selfUserInfo.uid){var n=this.getClient(e);n.peerConnection=r,n.isInitiator=o}return console.log("Created local peer connection object pc"),r.addEventListener("icecandidate",(function(o){return t.onIceCandidate(e,r,o)})),r.addEventListener("iceconnectionstatechange",(function(o){return t.onIceStateChange(e,r,o)})),r.addEventListener("track",(function(o){return t.gotRemoteStream(e,o)})),r.addEventListener("connectionstatechange",(function(o){return t.onConnectionStateChange(e,r,o)})),console.log("createPeerConnection",e,this.getClient(e)),r}},{key:"getSelectedSdpSemantics",value:function(){return{}}},{key:"call",value:function(){this.answerCall(this.audioOnly)}},{key:"onConnectionStateChange",value:function(e,o,t){console.log("onConnectionStateChange",e,o,t),"failed"===o.connectionState&&(console.log("pc connectionState failed, endCall"),this.endUserCall(e,j.default.REASON_MediaError))}},{key:"hangup",value:function(){console.log("Ending call"),this.endCall(j.default.REASON_Hangup)}},{key:"setAudioOnly",value:function(e){this.audioOnly=e,this.conference||this.sessionCallback&&this.sessionCallback.didChangeMode(e)}},{key:"downgrade2Voice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.status===_.default.STATUS_CONNECTED&&(this._stopVideoTrack(this.cameraVideoStream),e||p.default.downgrade2VoiceCall(),this.setAudioOnly(!0))}},{key:"downToVoice",value:function(){if(console.log("down to voice"),this.stopIncomingRing(),this.status===_.default.STATUS_INCOMING)return this.setAudioOnly(!0),void this.answerCall(!0);this.status===_.default.STATUS_CONNECTED&&(this.audioOnly||(this.setAudioOnly(!0),p.default.downgrade2VoiceCall()))}},{key:"muteVideo",value:function(e){this.setVideoEnabled(!e)}},{key:"setVideoEnabled",value:function(e){if(!this.audioOnly&&!this.isScreenSharing()&&(this.videoMuted=!e,this.mediaStream()||e))if(e?(this.cameraVideoStream=null,this.createMediaSenders()):this._stopVideoTrack(this.cameraVideoStream),this.conference)this.notifyMuteState(),this.sessionCallback&&this.sessionCallback.didMuteStateChanged([this.selfUserInfo.uid]);else{var o=new O.default;o.callId=this.callId,o.videoMuted=this.videoMuted,o.existParticipants=this.getExistParticipantsStatus(),p.default.sendSignalMessage(o,self.currentSession.getParticipantIds(),!0)}}},{key:"muteAudio",value:function(e){this.setAudioEnabled(!e)}},{key:"setAudioEnabled",value:function(e){if(this.cameraVideoStream){var o=this.cameraVideoStream.getAudioTracks();o&&o.length>0&&(o[0].enabled=!o[0].enabled,this.audioMuted=!e,this.conference&&(this.notifyMuteState(),this.sessionCallback&&this.sessionCallback.didMuteStateChanged([this.selfUserInfo.uid])))}}},{key:"endMedia",value:function(e,o){console.log("Ending media"),this.setState(_.default.STATUS_IDLE),this.stopIncomingRing(),this.publishPeerConnection&&(this.publishPeerConnection.close(),this.publishPeerConnection=null),this.cameraVideoStream&&(void 0===this.cameraVideoStream.getTracks?this.cameraVideoStream.stop():this.cameraVideoStream.getTracks().forEach((function(e){e.stop()})),this.cameraVideoStream=null)}},{key:"endUserCall",value:function(e,o){if(console.log("endUserCall",e,o),e!==this.selfUserInfo.uid){if(!this.conference&&e===this.initiatorId){var t=!1,s=!0,r=!1,n=void 0;try{for(var i,u=(0,a.default)(this.peerConnectionClientMap);!(s=(i=u.next()).done);s=!0){var d=i.value,c=(0,l.default)(d,2),A=c[0];if(c[1].acceptTime>0&&e===A){t=!0;break}}}catch(e){r=!0,n=e}finally{try{!s&&u.return&&u.return()}finally{if(r)throw n}}if(!(t=t||this.acceptTime>0))return void this.endCall(o)}var f=this.getClient(e);if(this.peerConnectionClientMap.delete(e),this.participantUserInfos&&(this.participantUserInfos=this.participantUserInfos.filter((function(o){return o.uid!==e}))),f){if(f.peerConnection)f.peerConnection.getSenders().forEach((function(e){return f.peerConnection.removeTrack(e)})),f.peerConnection.close(),f.peerConnection=null;e===this.initiatorId&&this.updateInitiator(),this.sessionCallback&&this.sessionCallback.didParticipantLeft(e,o)}this.isAllBusy=this.isAllBusy&&o===j.default.RemoteBusy,this.conference||0!==this.peerConnectionClientMap.size||(0===this.conversation.type||this.singleCall?this.endCall(o):this.endCall(this.isAllBusy?j.default.RemoteBusy:j.default.REASON_AllLeft))}else this.endCall(o)}},{key:"leaveConference",value:function(e){this.conference?this.endCall(j.default.REASON_Hangup,e):this.endCall(j.default.REASON_Hangup)}},{key:"endCall",value:function(e,o){if(console.log("endCall",e),this.endReason=e,this.status!==_.default.STATUS_IDLE){if(this.setState(_.default.STATUS_IDLE),!this.conference&&e!==j.default.REASON_AcceptByOtherClient&&e!==j.default.REASON_AllLeft&&this.getParticipantIds().length>0){var t=new h.default;t.callId=this.callId,t.inviteMsgUid=this.startMsgUid,t.reason=e,p.default.sendSignalMessage(t,this.getParticipantIds(),!1)}if(e!==j.default.REASON_AcceptByOtherClient){var s={};s.handle_id=this.handleId,(o||e===j.default.REASON_AllLeft||this.conversation&&this.conversation.type===C.default.Single&&[j.default.RemoteBusy,j.default.REASON_RemoteHangup,j.default.RemoteTimeout].indexOf(e)>-1)&&(s.destroy=!0),console.log("leave",(0,u.default)(s)),p.default.sendConferenceRequest(this.sessionId,this.callId,"leave",(0,u.default)(s),(function(e,o){0!==e&&console.log("conference request, leave error",e)}))}var r={callId:this.callId,audioOnly:this.audioOnly,pin:this.pin,host:this.host,title:this.title,desc:this.desc,audience:this.audience,advance:this.advance};this.keepAlive(!1),this.endTime=(new Date).valueOf();var n=!0,i=!1,d=void 0;try{for(var c,A=(0,a.default)(this.peerConnectionClientMap);!(n=(c=A.next()).done);n=!0){var f=c.value,m=(0,l.default)(f,2),y=(m[0],m[1]);y.peerConnection&&(y.peerConnection.close(),y.peerConnection=null)}}catch(e){i=!0,d=e}finally{try{!n&&A.return&&A.return()}finally{if(i)throw d}}p.default.currentSession=null,clearInterval(this.callTimer),clearInterval(this.pcStatsTimer),this.endMedia(e,r),this.sessionCallback&&this.sessionCallback.didCallEndWithReason(e)}}},{key:"defaultPublishMediaConstraints",value:function(){return{offerToReceiveAudio:!1,offerToReceiveVideo:!1}}},{key:"defaultSubscribeMediaConstraints",value:function(){return{offerToReceiveAudio:!0,offerToReceiveVideo:!0}}},{key:"createRoom",value:function(e){var o=this,t={participants:9};t.pin=this.pin,t.publishers=this.audioOnly?S.default.MAX_AUDIO_PARTICIPANT_COUNT:S.default.MAX_VIDEO_PARTICIPANT_COUNT,this.conference||(t.is_private=!0),this.record&&(t.record=!0),console.log("create room"),p.default.sendConferenceRequest(this.sessionId,this.callId,"create_room",(0,u.default)(t),(function(t,s){if(console.log("create_room res",t,s),0===t){var r=JSON.parse(s);o.sessionId=r.session_id,o.handleId=r.handle_id;var n=r.data;o.callId,n.room,o.keepAlive(!0),e(0),o.conference&&o.setState(_.default.STATUS_CONNECTING)}else e(t)}))}},{key:"onConferenceEvent",value:function(e){var o=this,t=void 0;if(t="string"==typeof e?JSON.parse(e):e,this.sessionId===t.session_id){console.log("onConferenceEvent",e);var s=t.data,r=s.videoroom;if("event"===r){var n=s.publishers;this.onPublish(n);var i=s.unpublished;i&&this.onUnpublish(i);var a=s.leaving;a&&("ok"===a&&"kicked"===s.reason?this.onLeave(this.selfUserInfo.uid):this.onLeave(a));var l=s.kicked;l&&this.onLeave(l);var u=s.joining;u&&this.onJoining([u]);var d=s.attendees;this.onJoining(d)}else if("destroyed"===r)this.endCall(j.default.RoomDestroyed);else if("participants"===r){var c=s.attendees;if(c&&c.length>0){var A=c.map((function(e){return{id:e}}));this.onJoining(A)}var f=s.leavings;f&&f.length>0&&f.forEach((function(e){o.onLeave(e)}))}else if("mute"===r){var m=s.mute;this.onMute(m)}else if("slowlink"===r){var _=t.handle_id;this.onSlowLink(this.sessionId,_,s)}else{"hangup"===t.janus?this.endCall(j.default.REASON_MediaError):console.log("unknown event")}}else console.log("on conference event, unknown sessionId",this.sessionId,t.session_id)}},{key:"keepAlive",value:function(e){var o=this;if(e){if(this.keepAliveTimer)return;this.keepAliveTimer=setInterval((function(){p.default.sendConferenceRequest(o.sessionId,o.callId,"keepalive","",(function(e,o){}))}),1e4)}else this.keepAliveTimer&&(clearInterval(this.keepAliveTimer),this.keepAliveTimer=0)}},{key:"joinAndPublish",value:function(){var e=this,o={};o.handle_id=this.handleId,o.user_id=this.selfUserInfo.uid,o.pin=this.pin,p.default.sendConferenceRequest(this.sessionId,this.callId,"join_pub",(0,u.default)(o),(function(o,t){if(console.log("join_pub",o,t),0===o){var s=JSON.parse(t),r=s.data,n=r.error_code;if(n>0)return console.log("conference request, join_pub error",n),void(n===M.default.JANUS_VIDEOROOM_ERROR_NO_SUCH_ROOM?e.endCall(j.default.RoomNotExist):n===M.default.JANUS_VIDEOROOM_ERROR_ID_EXISTS&&setTimeout((function(){console.log("rejoin"),e.joinAndPublish()}),500));e.sessionId=s.session_id,e.handleId=s.handle_id;var i=r.publishers;e.onPublish(i);r.id,r.videoroom;e.privateId=r.private_id;r.description,r.room;var a=r.attendees;e.onJoining(a),e.audience||e.publishMedia(),e.keepAlive(!0)}else e.endCall(j.default.REASON_SignalError)}))}},{key:"updateInitiator",value:function(){var e=this,o=(new Date).getTime()+864e5,t=void 0;(0,g.gt)(this.acceptTime,0)&&(o=this.acceptTime,t=this.selfUserInfo.uid),this.peerConnectionClientMap.forEach((function(e){(0,g.gt)(e.acceptTime,0)&&(0,g.gt)(o,e.acceptTime)&&(o=e.acceptTime,t=e.userId)}));var s=this.initiatorId;this.initiatorId=t,this.peerConnectionClientMap.forEach((function(o){o.isInitiator=e.initiatorId===o.userId})),s!==t&&t!==this.selfUserInfo.uid&&this.sessionCallback&&this.sessionCallback.didChangeInitiator(this.initiatorId)}},{key:"onParticipantPublish",value:function(e){e.talking;var o=e.id,t=!0,s=e.streams,r=!0,n=!1,i=void 0;try{for(var u,d=(0,a.default)(this.peerConnectionClientMap);!(r=(u=d.next()).done);r=!0){var c=u.value,A=(0,l.default)(c,2),f=A[0],m=A[1];if(f===o){m.streams(s),m.subscribe(),m.audience=!1,t=!1;break}}}catch(e){n=!0,i=e}finally{try{!r&&d.return&&d.return()}finally{if(n)throw i}}if(t){var p=new y.default(o,this);this.peerConnectionClientMap.set(p.userId,p);var j=(new Date).valueOf();this.setUserAcceptTime(p.userId,j),this.setUserJoinTime(p.userId,j),p.status=_.default.STATUS_CONNECTED,p.audience=!1,p.streams(s),p.subscribe(),this.sessionCallback&&(this.sessionCallback.didParticipantJoined(p.userId),this.sessionCallback.didChangeType(p.userId,!1))}else this.sessionCallback&&this.sessionCallback.didChangeType(o,!1)}},{key:"onPublish",value:function(e){if(console.log("onPublish",e),e){var o=!0,t=!1,s=void 0;try{for(var r,n=(0,a.default)(e);!(o=(r=n.next()).done);o=!0){var i=r.value;this.onParticipantPublish(i)}}catch(e){t=!0,s=e}finally{try{!o&&n.return&&n.return()}finally{if(t)throw s}}}}},{key:"onJoining",value:function(e){if(e){console.log("onJoining",e);var o=!0,t=!1,s=void 0;try{for(var r,n=(0,a.default)(e);!(o=(r=n.next()).done);o=!0){var i=r.value.id,u=!0,d=!0,c=!1,A=void 0;try{for(var f,m=(0,a.default)(this.peerConnectionClientMap);!(d=(f=m.next()).done);d=!0){var p=f.value,j=(0,l.default)(p,2),h=j[0],b=j[1];if(h===i){b.audience=!0,u=!1;break}}}catch(e){c=!0,A=e}finally{try{!d&&m.return&&m.return()}finally{if(c)throw A}}if(u){var v=new y.default(i,this);this.peerConnectionClientMap.set(v.userId,v);var g=(new Date).valueOf();this.setUserAcceptTime(v.userId,g),this.setUserJoinTime(v.userId,g),v.status=_.default.STATUS_CONNECTED,v.audience=!0,this.sessionCallback&&this.sessionCallback.didParticipantJoined(v.userId)}}}catch(e){t=!0,s=e}finally{try{!o&&n.return&&n.return()}finally{if(t)throw s}}}}},{key:"onUnpublish",value:function(e){var o=!0,t=!1,s=void 0;try{for(var r,n=(0,a.default)(this.peerConnectionClientMap);!(o=(r=n.next()).done);o=!0){var i=r.value,u=(0,l.default)(i,2),d=u[0],c=u[1];if(d===e){c.audience=!0,c.videoMuted=!1,c.audioMuted=!1,c.peerConnection=null;break}}}catch(e){t=!0,s=e}finally{try{!o&&n.return&&n.return()}finally{if(t)throw s}}this.conference&&e!==this.selfUserInfo.uid&&this.sessionCallback&&this.sessionCallback.didChangeType(e,!0)}},{key:"onSlowLink",value:function(e,o,t){if(this.sessionCallback){var s=t.media,r=t.uplink,n=t.lost;if(this.handleId===o)this.sessionCallback.didMediaLostPacket(s,n);else{var i=!0,u=!1,d=void 0;try{for(var c,A=(0,a.default)(this.peerConnectionClientMap);!(i=(c=A.next()).done);i=!0){var f=c.value,m=(0,l.default)(f,2),_=m[0];if(m[1].handleId===o){this.sessionCallback.didUserMediaLostPacket(_,s,n,r);break}}}catch(e){u=!0,d=e}finally{try{!i&&A.return&&A.return()}finally{if(u)throw d}}}}}},{key:"onLeave",value:function(e){this.getClient(e)?this.endUserCall(e,j.default.REASON_RemoteHangup):e===this.selfUserInfo.uid&&this.endCall(j.default.REASON_Hangup,!1)}},{key:"mediaStream",value:function(){return this.screenShareStream?this.screenShareStream:this.cameraVideoStream}},{key:"createDummyVideoStream",value:(x=(0,n.default)(r.default.mark((function e(){var o,t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=document.createElement("video")).autoplay=!0,o.loop=!0,o.volume=.5,o.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABZJtZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE2MSByMzAyNyA0MTIxMjc3IC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAyMCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTYgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAANGWIhAA7//73Tr8Cm1TCKgOSVwr2yqQmWblSawJGXYUqrq2Pk7OdTgAAE+AFwMk12oNQ+eEAAAAMQZokbEO//qmWAAy43gIATGF2YzU4LjkxLjEwMABCIAjBGDgAAAAJQZ5CeIX/AA7pIRAEYIwcIRAEYIwcAAAACQGeYXRCvwAUkCEQBGCMHCEQBGCMHAAAAAkBnmNqQr8AFJEhEARgjBwhEARgjBwAAAASQZpoSahBaJlMCHf//qmWAAy5IRAEYIwcAAAAC0GehkURLC//AA7pIRAEYIwcIRAEYIwcAAAACQGepXRCvwAUkSEQBGCMHCEQBGCMHAAAAAkBnqdqQr8AFJAhEARgjBwhEARgjBwAAAASQZqsSahBbJlMCHf//qmWAAy4IRAEYIwcAAAAC0GeykUVLC//AA7pIRAEYIwcIRAEYIwcAAAACQGe6XRCvwAUkCEQBGCMHCEQBGCMHAAAAAkBnutqQr8AFJAhEARgjBwAAAASQZrwSahBbJlMCG///qeEABlRIRAEYIwcIRAEYIwcAAAAC0GfDkUVLC//AA7pIRAEYIwcIRAEYIwcAAAACQGfLXRCvwAUkSEQBGCMHCEQBGCMHAAAAAkBny9qQr8AFJAhEARgjBwAAAASQZs0SahBbJlMCG///qeEABlQIRAEYIwcIRAEYIwcAAAAC0GfUkUVLC//AA7pIRAEYIwcIRAEYIwcAAAACQGfcXRCvwAUkCEQBGCMHCEQBGCMHAAAAAkBn3NqQr8AFJAhEARgjBwAAAASQZt4SahBbJlMCF///oywAGNBIRAEYIwcIRAEYIwcAAAAC0GflkUVLC//AA7oIRAEYIwcIRAEYIwcAAAACQGftXRCvwAUkSEQBGCMHAAAAAkBn7dqQr8AFJEhEARgjBwhEARgjBwAAAARQZu5SahBbJlMCFf//jhAAYEhEARgjBwhEARgjBwhEARgjBwAAAihbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABBAAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAA/Z0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAMgAAADIAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQQAAAEAAABAAAAAANubWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAAyAAAANABVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAADGW1pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAtlzdGJsAAAArXN0c2QAAAAAAAAAAQAAAJ1hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAMgAyABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAN2F2Y0MBZAAM/+EAGmdkAAys2UNG+WXARAAAAwAEAAADAMg8UKZYAQAGaOvjyyLA/fj4AAAAABBwYXNwAAAAAQAAAAEAAAAYc3R0cwAAAAAAAAABAAAAGgAAAgAAAAAUc3RzcwAAAAAAAAABAAAAAQAAAOBjdHRzAAAAAAAAABoAAAABAAAEAAAAAAEAAAoAAAAAAQAABAAAAAABAAAAAAAAAAEAAAIAAAAAAQAACgAAAAABAAAEAAAAAAEAAAAAAAAAAQAAAgAAAAABAAAKAAAAAAEAAAQAAAAAAQAAAAAAAAABAAACAAAAAAEAAAoAAAAAAQAABAAAAAABAAAAAAAAAAEAAAIAAAAAAQAACgAAAAABAAAEAAAAAAEAAAAAAAAAAQAAAgAAAAABAAAKAAAAAAEAAAQAAAAAAQAAAAAAAAABAAACAAAAAAEAAAQAAAAAKHN0c2MAAAAAAAAAAgAAAAEAAAACAAAAAQAAAAIAAAABAAAAAQAAAHxzdHN6AAAAAAAAAAAAAAAaAAAC6gAAABAAAAANAAAADQAAAA0AAAAWAAAADwAAAA0AAAANAAAAFgAAAA8AAAANAAAADQAAABYAAAAPAAAADQAAAA0AAAAWAAAADwAAAA0AAAANAAAAFgAAAA8AAAANAAAADQAAABUAAAB0c3RjbwAAAAAAAAAZAAAAMAAAA0EAAANaAAADcwAAA4wAAAOoAAADwwAAA9wAAAP1AAAEEQAABCwAAARFAAAEWAAABHoAAASVAAAErgAABMEAAATjAAAE/gAABRcAAAUqAAAFTAAABWcAAAV6AAAFkwAAA9V0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAAA/4AAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPmAAAEAAABAAAAAANNbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAACsRAAAsABVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAAC+G1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAACvHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAACsRAAAAAAANmVzZHMAAAAAA4CAgCUAAgAEgICAF0AVAAAAAAH0AAAACJgFgICABRIQVuUABoCAgAECAAAAGHN0dHMAAAAAAAAAAQAAACwAAAQAAAAAxHN0c2MAAAAAAAAADwAAAAEAAAABAAAAAQAAAAIAAAACAAAAAQAAAAUAAAABAAAAAQAAAAYAAAACAAAAAQAAAAkAAAABAAAAAQAAAAoAAAACAAAAAQAAAAwAAAABAAAAAQAAAA0AAAACAAAAAQAAABAAAAABAAAAAQAAABEAAAACAAAAAQAAABQAAAABAAAAAQAAABUAAAACAAAAAQAAABcAAAABAAAAAQAAABgAAAACAAAAAQAAABkAAAADAAAAAQAAAMRzdHN6AAAAAAAAAAAAAAAsAAAAFwAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAB0c3RjbwAAAAAAAAAZAAADKgAAA04AAANnAAADgAAAA6IAAAO3AAAD0AAAA+kAAAQLAAAEIAAABDkAAARSAAAEbgAABIkAAASiAAAEuwAABNcAAATyAAAFCwAABSQAAAVAAAAFWwAABXQAAAWHAAAFqAAAABpzZ3BkAQAAAHJvbGwAAAACAAAAAf//AAAAHHNiZ3AAAAAAcm9sbAAAAAEAAAAsAAAAAQAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTguNDUuMTAw",o.load(),e.prev=6,e.next=9,o.play();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log("video auto play error",e.t0);case 14:return t=null,o.captureStream?t=o.captureStream():o.mozCaptureStream?t=o.mozCaptureStream():(console.log("video captureStream() not supported, fallback to canvas"),t=document.createElement("canvas").captureStream(60)),e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this,[[6,11]])}))),function(){return x.apply(this,arguments)})},{key:"createMediaSenders",value:(v=(0,n.default)(r.default.mark((function e(){var o,t,s,n,i,a,l,u,d=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0,e.next=3,this.createLocalCameraVideoStream(this.audioOnly||this.videoMuted||this.isScreenSharing());case 3:if(this.cameraVideoStream=e.sent,this.cameraVideoStream){e.next=16;break}if(this.audioOnly){e.next=10;break}return e.next=8,this.createLocalCameraVideoStream(!0);case 8:(t=e.sent)&&(o=t.getAudioTracks()[0]);case 10:return e.next=12,this.createDummyVideoStream();case 12:this.cameraVideoStream=e.sent,o?(s=this.cameraVideoStream.getAudioTracks()[0],this.cameraVideoStream.removeTrack(s),this.cameraVideoStream.addTrack(o)):o=this.cameraVideoStream.getAudioTracks()[0],e.next=17;break;case 16:o=this.cameraVideoStream.getAudioTracks()[0];case 17:if(this.dummyVideoStream){e.next=21;break}return e.next=20,this.createDummyVideoStream();case 20:this.dummyVideoStream=e.sent;case 21:if(o.enabled=!this.audioMuted,o.onended=function(){d.status!==_.default.STATUS_IDLE&&(console.log("audio track ended, re-createMediaSenders"),d.audioInputDeviceId=null,d._stopVideoTrack(d.cameraVideoStream),d.cameraVideoStream=null,d.createMediaSenders())},n=this.publishPeerConnection,i=this.videoMuted?this.dummyVideoStream:this.cameraVideoStream,this.audioOnly){e.next=41;break}if(this.audioSender?this.audioSender.replaceTrack(o):this.audioSender=n.addTrack(o,i),a=w.default.getVideoProfile(S.default.VIDEO_PROFILE),this.isScreenSharing()){e.next=38;break}if(this.videoSender?this.videoSender.replaceTrack(i.getVideoTracks()[0]):this.videoSender=n.addTrack(i.getVideoTracks()[0],i),S.default.DISABLE_DUAL_STREAM){e.next=35;break}return l=i.getVideoTracks()[0].clone(),e.next=34,l.applyConstraints(this.tinyVideoTrackConstraints());case 34:this.smallVideoSender?this.smallVideoSender.replaceTrack(l):this.smallVideoSender=n.addTrack(l,i);case 35:this.setVideoMaxBitrate(a.bitrate),e.next=39;break;case 38:this.setVideoMaxBitrate(a.bitrate);case 39:e.next=42;break;case 41:this.audioSender?this.audioSender.replaceTrack(o):this.audioSender=n.addTrack(o,i);case 42:(u=new k.SoundMeter(window.audioContext)).connectToSource(i,(function(e){console.log("connect to self soundMeter",e)})),this.publishPeerConnection._soundMeter&&this.publishPeerConnection._soundMeter.stop(),this.publishPeerConnection._soundMeter=u,console.log("Added local stream to pc");case 47:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"publishMedia",value:(t=(0,n.default)(r.default.mark((function e(){var o,t,s,n,i=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.publishPeerConnection=this.createPeerConnection(this.selfUserInfo.uid),e.next=3,this.createMediaSenders();case 3:return e.prev=3,e.next=6,this.publishPeerConnection.createOffer(this.defaultPublishMediaConstraints());case 6:return o=e.sent,e.next=9,this.publishPeerConnection.setLocalDescription(o);case 9:(t={}).session_id=this.sessionId,t.handle_id=this.handleId,(s={}).request="configure",s.audio=!0,s.video=!0,s.pin=this.pin,t.body=s,(n={}).sdp=o.sdp,n.type="offer",t.jsep=n,p.default.sendConferenceRequest(this.sessionId,this.callId,"message",(0,u.default)(t),(function(e,o){if(0===e){var t=JSON.parse(o);if(i.sessionId===t.session_id){var s=t.jsep;if(s&&"answer"===s.type)i.publishPeerConnection.setRemoteDescription(s),(i.videoMuted||i.audioMuted)&&i.notifyMuteState();else{var r=t.plugindata;if(r){var n=r.data;n&&(n.error_code===M.default.JANUS_VIDEOROOM_ERROR_PUBLISHERS_FULL?i.status===_.default.STATUS_CONNECTED?(i.audience=!0,i.unPublishMedia(),i.sessionCallback&&i.sessionCallback(i.selfUserInfo.uid,!0)):i.status!==_.default.STATUS_IDLE&&i.endCall(j.default.RoomParticipantsFull):i.endCall(j.default.REASON_SignalError))}}}else console.log("conference request, message unknown sessionId",i.sessionId,t.session_id)}else console.log("conference request, message, error",e)})),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(3),this.endCall(j.default.REASON_MediaError);case 28:case"end":return e.stop()}}),e,this,[[3,25]])}))),function(){return t.apply(this,arguments)})},{key:"unPublishMedia",value:function(){var e=this;this.publishPeerConnection&&(this.publishPeerConnection.close(),this.publishPeerConnection=null,this.audioSender=null,this.videoSender=null,this.smallVideoSender=null);var o=this.mediaStream();o&&(void 0===o.getTracks?o.stop():o.getTracks().forEach((function(e){e.stop()})),this.cameraVideoStream=null,this.screenShareStream=null);var t={};t.handle_id=this.handleId,t.pin=this.pin,p.default.sendConferenceRequest(this.sessionId,this.callId,"unpublish",(0,u.default)(t),(function(o,t){o>0&&e.endCall(j.default.REASON_SignalError)}))}},{key:"requestChangeMode",value:function(e,o){var t=new I.default(this.callId,o),s=new E.default(C.default.Single,e,0);p.default.sendSignalMessageEx(s,t,this.getParticipantIds(),!1)}},{key:"onRequestChangeMode",value:function(e){this.switchAudience(e)}},{key:"onKickoff",value:function(){this.leaveConference(!1)}},{key:"switchAudience",value:function(e){this.conference&&(e?this.audience||(this.audience=!0,this.unPublishMedia(),this.sessionCallback&&this.sessionCallback.didChangeType(this.selfUserInfo.uid,!0)):this.audience&&(this.audience=!1,this.publishMedia(),this.sessionCallback&&this.sessionCallback.didChangeType(this.selfUserInfo.uid,!1)))}},{key:"onMute",value:function(e){var o=[];this.peerConnectionClientMap.forEach((function(t,s){var r,n,i=e[s];r=!(!i||void 0===i.a)&&i.a,n=!(!i||void 0===i.v)&&i.v,t.videoMuted===n&&t.audioMuted===r||(t.videoMuted=n,t.audioMuted=r,o.push(s))})),o.length>0&&this.sessionCallback&&this.sessionCallback.didMuteStateChanged(o)}},{key:"notifyMuteState",value:function(){if(this.conference&&this.status!==_.default.STATUS_IDLE){var e={handle_id:this.handleId,a:this.audioMuted,v:this.videoMuted&&!this.isScreenSharing()};p.default.sendConferenceRequest(this.sessionId,this.callId,"mute",(0,u.default)(e),(function(e,o){console.log("mute res",e,o)}))}}},{key:"kickoffParticipant",value:function(e,o,t){if(this.status===_.default.STATUS_IDLE&&t&&t(-1),this.getClient(e)){var s={handle_id:this.handleId,user:e};p.default.sendConferenceRequest(this.sessionId,this.callId,"kick",(0,u.default)(s),(function(e,s){console.log("kick res",e,s),0===e?o&&o():t&&t(e)}))}}},{key:"closeVoipWindow",value:function(){localStorage.getItem("enable_voip_debug")||(T.default.useIframe?T.default.emitToMain("close-iframe-window"):b.currentWindow?b.currentWindow.close():window.close())}},{key:"setAudioInputDeviceId",value:function(e){console.log("setInputAudioDeviceId",this.audioInputDeviceId,e),this.audioInputDeviceId=e,this.createMediaSenders()}},{key:"setVideoInputDeviceId",value:function(e){this.videoInputDeviceId=e,this._stopVideoStream(this.cameraVideoStream),this.cameraVideoStream=null,this.createMediaSenders()}},{key:"switchCamera",value:function(){return!!navigator.mediaDevices.getSupportedConstraints().facingMode&&("user"===this.videoCamera?this.videoCamera="environment":this.videoCamera="user",console.log("switch camera",this.videoCamera),this._stopVideoStream(this.cameraVideoStream),this.createMediaSenders(),!0)}},{key:"setVideoMaxBitrate",value:function(e){var o=e;2*o<3600?o*=2:o<3600&&(o=3600),this.videoSender&&this.setVideoSenderMaxBitrate(this.videoSender,o),this.smallVideoSender&&this.setVideoSenderMaxBitrate(this.smallVideoSender,40)}},{key:"setVideoSenderMaxBitrate",value:function(e,o){var t=e.getParameters();t.encodings||(t.encodings=[{}]),t.encodings.length<1?console.log("setVideoSenderMaxBitrate error: no encodings"):(t.encodings[0].maxBitrate=1e3*o,e.setParameters(t).catch((function(e){console.log("set maxBitrate error",e)})))}}],[{key:"newSession",value:function(e,t,s,r,n){console.log("newSession");var i=new o;return i.conversation=e,i.initiatorId=t,i.callId=s,i.audioOnly=r,i.sessionCallback=n,i}}]),o}(v.default);o.default=R},"./av/internal/PeerConnectionClientImpl.js":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=m(t("./node_modules/babel-runtime/regenerator/index.js")),r=m(t("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),n=m(t("./node_modules/babel-runtime/core-js/json/stringify.js")),i=m(t("./node_modules/babel-runtime/core-js/object/get-prototype-of.js")),a=m(t("./node_modules/babel-runtime/helpers/classCallCheck.js")),l=m(t("./node_modules/babel-runtime/helpers/createClass.js")),u=m(t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),d=m(t("./node_modules/babel-runtime/helpers/inherits.js")),c=m(t("../engine/PeerConnectionClient")),A=m(t("./av/internal/avenginekitImpl.js")),f=m(t("../engine/avenginekit"));function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function o(e,t){(0,a.default)(this,o);var s=(0,u.default)(this,(o.__proto__||(0,i.default)(o)).call(this));return s.lastFramesDecoded=0,s.tickSinceLastFramesDecoded=0,s.unsubscribing=!1,s.availableVideoMids=[],s.ready=!1,s.userId=e,s.callSession=t,s.availableVideoMids=[],s.useMainVideo=f.default.DEFAULT_USE_MAIN_VIDEO,s}var t;return(0,d.default)(o,e),(0,l.default)(o,[{key:"subscribe",value:function(){var e=this,o={};o.feed=this.userId,o.pin=this.callSession.pin,this.availableVideoMids.length>1&&(o.streams=[{feed:this.userId,mid:this.useMainVideo?this.availableVideoMids[0]:this.availableVideoMids[1]},{feed:this.userId,mid:"0"}]),A.default.sendConferenceRequestEx(this.callSession.sessionId,this.callSession.callId,"join_sub",(0,n.default)(o),this.callSession.advance,(function(o,t){if(0===o){var s=JSON.parse(t),r=s.session_id;if(r===e.callSession.sessionId){e.handleId=s.handle_id;var n=s.jsep;console.log("call subscribeMedia",n),e.subscribeMedia(n)}else console.log("join response, unknown sessionId",e.callSession.sessionId,r)}else console.log("join_sub error",o)}))}},{key:"subscribeMedia",value:(t=(0,r.default)(s.default.mark((function e(o){var t,r,i,a,l=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("subscribeMedia",o),o){e.next=3;break}return e.abrupt("return");case 3:if(this.peerConnection){e.next=6;break}return e.next=6,this.callSession.createPeerConnection(this.userId);case 6:return e.prev=6,e.next=9,this.peerConnection.setRemoteDescription(o);case 9:return e.next=11,this.peerConnection.createAnswer(this.callSession.defaultSubscribeMediaConstraints());case 11:return t=e.sent,e.next=14,this.peerConnection.setLocalDescription(t);case 14:(r={}).session_id=this.callSession.sessionId,r.handle_id=this.handleId,(i={}).request="start",i.room=this.callSession.callId,r.body=i,(a={}).sdp=t.sdp,a.type="answer",r.jsep=a,A.default.sendConferenceRequestEx(this.callSession.sessionId,this.callSession.callId,"message",(0,n.default)(r),this.callSession.advance,(function(e,o){0===e?(JSON.parse(o),l.unsubscribing?l.unsubscribing=!1:l.ready=!0):console.log("conference request, message error",e)})),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(6),console.log("subscribeMedia error",this.userId,e.t0);case 31:case"end":return e.stop()}}),e,this,[[6,28]])}))),function(e){return t.apply(this,arguments)})},{key:"streams",value:function(e){var o=this;e&&(this.availableVideoMids.length=0,e.forEach((function(e){if("video"===e.type){var t=e.mid;o.availableVideoMids.push(t)}})))}},{key:"subscribeStream",value:function(e,o,t,s){var r=this,i={handle_id:this.handleId,feed:this.userId,mid:e};o&&(i.unsub=1),console.log("wfc subscribe stream request",i),A.default.sendConferenceRequestEx(this.callSession.sessionId,this.callSession.callId,"subscribe",(0,n.default)(i),this.callSession.advance,(function(e,n){if(0!==e)return console.log("wfc conference request, message error",e),void(s&&s(e));console.log("wfc subscribe stream response",i);var a=JSON.parse(n).jsep;a&&(o&&(r.unsubscribing=!0),r.subscribeMedia(a)),t&&t()}))}},{key:"setUseMainVideo",value:function(e){var o=this;if(this.useMainVideo!==e&&!(this.availableVideoMids.length<2)&&this.handleId&&this.ready){this.useMainVideo=e;var t=void 0,s=void 0;e?(t=this.availableVideoMids[1],s=this.availableVideoMids[0]):(t=this.availableVideoMids[0],s=this.availableVideoMids[1]),this.ready=!1,this.subscribeStream(t,!0,(function(){setTimeout((function(){o.subscribeStream(s,!1,(function(){}),(function(e){o.ready=!0}))}),200)}),(function(e){o.ready=!0}))}}}]),o}(c.default);o.default=_},"./av/internal/avenginekitImpl.js":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WfcAVEngineKitImpl=void 0;var s=g(t("./node_modules/babel-runtime/core-js/map.js")),r=g(t("./node_modules/babel-runtime/helpers/toConsumableArray.js")),n=g(t("./node_modules/babel-runtime/core-js/object/get-prototype-of.js")),i=g(t("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=g(t("./node_modules/babel-runtime/helpers/createClass.js")),l=g(t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=g(t("./node_modules/babel-runtime/helpers/inherits.js")),d=g(t("../../messages/messageContentType")),c=g(t("../messages/callByeMessageContent")),A=g(t("../messages/callAnswerMessageContent")),f=g(t("../messages/callStartMessageContent")),m=g(t("../messages/callModifyMessageContent")),_=g(t("../../model/conversationType")),p=g(t("../engine/callEndReason")),j=g(t("../engine/avenginekitproxy")),h=g(t("../engine/callState")),y=g(t("./av/internal/CallSessionImpl.js")),b=g(t("../messages/addParticipantsMessageContent")),v=g(t("../engine/avenginekit"));function g(e){return e&&e.__esModule?e:{default:e}}var S=new(o.WfcAVEngineKitImpl=function(e){function o(){(0,i.default)(this,o);var e=(0,l.default)(this,(o.__proto__||(0,n.default)(o)).call(this));return e.sendMessageId=0,e.sendConferenceRequestId=0,e._fixLongSerializedIssue=function(e){return"string"!=typeof e||"string"==typeof(e=JSON.parse(e))&&(e=JSON.parse(e)),e},e.onSendMessage=function(o,t){t=e._fixLongSerializedIssue(t);var s=e.sendMessageCallbackMap.get(t.sendMessageId);s&&s(t.error,t.messageUid,t.timestamp),e.sendMessageCallbackMap.delete(t.sendMessageId)},e.onSendConferenceRequest=function(o,t){t=e._fixLongSerializedIssue(t);var s=e.sendConferenceRequestCallbackMap.get(t.sendConferenceRequestId);s&&s(t.error,t.response),e.sendConferenceRequestCallbackMap.delete(t.sendConferenceRequestId)},e.onConferenceEvent=function(o,t){t=e._fixLongSerializedIssue(t),e.currentSession&&e.currentSession.onConferenceEvent(t)},e.onReceiveMessage=function(o,t){if(t=e._fixLongSerializedIssue(t),console.log("receive voip message ",t),!(t.conversation.type!==_.default.Single&&t.conversation.type!==_.default.Group||1!==t.direction&&t.messageContent.type!==d.default.VOIP_CONTENT_TYPE_ACCEPT&&t.messageContent.type!==d.default.VOIP_CONTENT_TYPE_END)){var s=t.messageContent;if(t.messageContent.type===d.default.VOIP_CONTENT_TYPE_SIGNAL){if(!S.currentSession||S.currentSession.status===h.default.STATUS_IDLE)return;var n=t.messageContent;n.callId!==S.currentSession.callId?S.rejectOtherCall(t.conversation,s.callId,null,t.messageUid):!S.currentSession||S.currentSession.status!==h.default.STATUS_CONNECTING&&S.currentSession.status!==h.default.STATUS_CONNECTED&&S.currentSession.status!==h.default.STATUS_OUTGOING||S.onReceiveData(t.from,n.payload)}else if(t.messageContent.type===d.default.VOIP_CONTENT_TYPE_START){console.log("callstart",t);var i=t.messageContent.targetIds;if(i.findIndex((function(e){return e===t.selfUserInfo.uid}))<0)return;i=(i=i.filter((function(e){return e!==t.selfUserInfo.uid}))).push(t.from),S.currentSession&&S.currentSession.status!==h.default.STATUS_IDLE?S.rejectOtherCall(t.conversation,s.callId,i,t.messageUid):(S.currentSession=y.default.newSession(t.conversation,t.from,s.callId,s.audioOnly,S.sessionCallback),S.currentSession.startMsgUid=t.messageUid,S.currentSession.pin=s.pin,S.currentSession.initSession(!1,t.selfUserInfo,t.participantUserInfos,t.groupMemberUserInfos),S.currentSession.setState(h.default.STATUS_INCOMING),S.currentSession.joinTime=t.timestamp,S.currentSession.setUserJoinTime(t.from,t.timestamp),t.participantUserInfos.forEach((function(e){S.currentSession.setUserJoinTime(e.uid,t.timestamp)})),S.currentSession.setUserAcceptTime(t.from,t.timestamp))}else if(t.messageContent.type===d.default.VOIP_CONTENT_TYPE_ACCEPT||t.messageContent.type===d.default.VOIP_CONTENT_TYPE_ACCEPT_T){if(S.currentSession&&S.currentSession.status!==h.default.STATUS_IDLE){if(s.callId!==S.currentSession.callId)return void(1===t.direction&&S.rejectOtherCall(t.conversation,s.callId,[t.selfUserInfo.uid]));if(0===t.direction&&S.currentSession.status===h.default.STATUS_INCOMING)return void S.currentSession.endCall(p.default.REASON_AcceptByOtherClient);S.currentSession.status===h.default.STATUS_OUTGOING&&S.currentSession.setState(h.default.STATUS_CONNECTING),!S.currentSession.audioOnly&&s.audioOnly&&S.currentSession.setAudioOnly(!0),S.currentSession.setUserAcceptTime(t.from,t.timestamp);var a=S.queueOfferMessageMap.get(t.from);a&&a.forEach((function(e){S.processSignalingMessage(t.from,e)})),S.queueOfferMessageMap.delete(t.from)}}else if(t.messageContent.type===d.default.VOIP_CONTENT_TYPE_END)if(S.currentSession&&S.currentSession.status!==h.default.STATUS_IDLE&&S.currentSession.callId===s.callId){var l=s.reason;if(1===t.direction){switch(s.reason){case p.default.REASON_Unknown:l=p.default.REASON_Unknown;break;case p.default.REASON_Busy:l=p.default.RemoteBusy;break;case p.default.REASON_SignalError:l=p.default.RemoteNetworkError;break;case p.default.REASON_Hangup:l=p.default.REASON_RemoteHangup;break;case p.default.REASON_MediaError:l=p.default.RemoteNetworkError;break;case p.default.REASON_RemoteHangup:l=p.default.REASON_Hangup;break;case p.default.REASON_OpenCameraFailure:l=p.default.RemoteNetworkError;break;case p.default.REASON_Timeout:l=p.default.RemoteTimeout;break;case p.default.REASON_AcceptByOtherClient:l=p.default.REASON_AcceptByOtherClient;break;case p.default.REASON_AllLeft:l=p.default.REASON_AllLeft;break;case p.default.RemoteBusy:l=p.default.REASON_Busy;break;case p.default.RemoteTimeout:l=p.default.REASON_Timeout;break;case p.default.RemoteNetworkError:l=p.default.REASON_SignalError;break;case p.default.RoomDestroyed:l=p.default.RoomDestroyed;break;case p.default.RoomNotExist:l=p.default.RoomNotExist;break;case p.default.RoomParticipantsFull:l=p.default.RoomParticipantsFull;break;default:l=p.default.RemoteNetworkError}S.currentSession.endUserCall(t.from,l)}else S.currentSession.endCall(l)}else console.log("invalid bye message, ignore it");else if(t.messageContent.type===d.default.VOIP_CONTENT_TYPE_MODIFY)S.currentSession&&S.currentSession.status===h.default.STATUS_CONNECTED&&S.currentSession.callId===s.callId&&(s.audioOnly?(S.currentSession.audioOnly=!0,S.currentSession.downgrade2Voice(!0)):console.log("cannot modify voice call to video call"));else if(t.messageContent.type===d.default.VOIP_CONTENT_TYPE_ADD_PARTICIPANT)if(s.participants.indexOf(t.selfUserInfo.uid)>-1){if(S.currentSession&&S.currentSession.status!==h.default.STATUS_IDLE){var u,c,A=[];if((u=A).push.apply(u,(0,r.default)(t.messageContent.participants)),t.messageContent.existParticipants)(c=A).push.apply(c,(0,r.default)(t.messageContent.existParticipants));return A.push(t.from),A=A.filter((function(e){return e!==t.selfUserInfo.uid})),void S.rejectOtherCall(t.conversation,s.callId,A)}S.currentSession=y.default.newSession(t.conversation,t.from,s.callId,s.audioOnly,S.sessionCallback),S.currentSession.pin=s.pin,S.currentSession.startMsgUid=t.messageUid;var f=t.participantUserInfos.filter((function(e){return e.uid!==t.selfUserInfo.uid}));S.currentSession.initSession(!1,t.selfUserInfo,f,t.groupMemberUserInfos),S.currentSession.joinTime=t.timestamp,f.forEach((function(e){S.currentSession.setUserJoinTime(e.uid,t.timestamp)})),S.currentSession.updateExistParticipant(s.existParticipants,t.timestamp)}else if(S.currentSession&&S.currentSession.status!==h.default.STATUS_IDLE&&S.currentSession.callId===s.callId){var m=t.participantUserInfos.filter((function(e){return s.participants.indexOf(e.uid)>-1}));S.currentSession.didAddNewParticipants(s.participants,m),m.forEach((function(e){S.currentSession.setUserJoinTime(e.uid,t.timestamp)}))}else{var j,b,v=[];if((j=v).push.apply(j,(0,r.default)(t.messageContent.participants)),t.messageContent.existParticipants)(b=v).push.apply(b,(0,r.default)(t.messageContent.existParticipants));v.push(t.from),v=v.filter((function(e){return e!==t.selfUserInfo.uid})),S.rejectOtherCall(t.conversation,s.callId,v)}else if(t.messageContent.type===d.default.VOIP_CONTENT_TYPE_MUTE_VIDEO){var g=t.messageContent;S.currentSession&&S.currentSession.callId===g.callId&&S.currentSession.status!==h.default.STATUS_IDLE&&S.currentSession.updateVideoMute(t.from,g.videoMuted)}else if(t.messageContent.type===d.default.CONFERENCE_CONTENT_TYPE_CHANGE_MODE){var C=t.messageContent;S.currentSession&&S.currentSession.callId===C.callId&&S.currentSession.onRequestChangeMode(C.audience)}else if(t.messageContent.type===d.default.CONFERENCE_CONTENT_TYPE_KICKOFF_MEMBER){var I=t.messageContent;S.currentSession&&S.currentSession.callId===I.callId&&S.currentSession.onKickoff()}}},e.startCall=function(o,t){var s=(t=e._fixLongSerializedIssue(t)).conversation,r=t.audioOnly;if(!e.currentSession){console.log("yyyy",s,t.selfUserInfo),e.currentSession=y.default.newSession(s,t.selfUserInfo.uid,t.callId,r,S.sessionCallback),e.currentSession.pin="";for(var n=0;n<6;n++)e.currentSession.pin+=Math.floor(10*Math.random());e.currentSession.initSession(!0,t.selfUserInfo,t.participantUserInfos,t.groupMemberUserInfos),e.currentSession.setState(h.default.STATUS_OUTGOING);var i=new f.default;i.audioOnly=r,i.callId=t.callId,i.pin=e.currentSession.pin,i.targetIds=e.currentSession.getParticipantIds(),e.currentSession.createRoom((function(o){0===o?e.sendSignalMessage(i,e.currentSession.getParticipantIds(),!0,(function(o,t,s){S.currentSession&&(0!==o?e.currentSession.endCall(p.default.REASON_SignalError):(e.currentSession.startMsgUid=t,console.log("startMsgUid",e.currentSession.startMsgUid,t),e.currentSession.joinTime=s,e.currentSession.setAcceptTime(s),i.targetIds.forEach((function(o){e.currentSession.setUserJoinTime(o,s)}),e)))})):e.currentSession.endCall(p.default.REASON_SignalError)}))}},e.startConference=function(o,t){var s=(t=e._fixLongSerializedIssue(t)).audioOnly;e.currentSession||(e.currentSession=y.default.newSession(null,t.selfUserInfo.uid,t.callId,s,S.sessionCallback),e.currentSession.pin=t.pin,e.currentSession.host=t.host,e.currentSession.title=t.title,e.currentSession.desc=t.desc,e.currentSession.conference=!0,e.currentSession.defaultAudience=t.audience,e.currentSession.advance=t.advance,e.currentSession.record=t.record,e.currentSession.extra=t.extra,e.currentSession.initSession(!0,t.selfUserInfo,null,null,!0),e.currentSession.setState(h.default.STATUS_OUTGOING),e.currentSession.createRoom((function(o){0!==o&&e.currentSession.endCall(p.default.REASON_SignalError)})))},e.joinConference=function(o,t){t=e._fixLongSerializedIssue(t),e.currentSession||(console.log("joinConference",t),e.currentSession=y.default.newSession(null,t.selfUserInfo.uid,t.callId,t.audioOnly,S.sessionCallback),e.currentSession.pin=t.pin,e.currentSession.host=t.host,e.currentSession.title=t.title,e.currentSession.desc=t.desc,e.currentSession.defaultAudience=t.audience,t.audience&&t.host===t.selfUserInfo.uid?e.currentSession.audience=!1:e.currentSession.audience=t.audience,e.currentSession.conference=!0,e.currentSession.advance=t.advance,e.currentSession.audioMuted=t.muteAudio,e.currentSession.videoMuted=t.muteVideo,e.currentSession.extra=t.extra,e.currentSession.initSession(!1,t.selfUserInfo,null,null,!0),e.currentSession.setState(h.default.STATUS_CONNECTING))},e}return(0,u.default)(o,e),(0,a.default)(o,[{key:"setup",value:function(e){console.log("wfc avengine-conference"),j.default.listenVoipEvent("message",this.onReceiveMessage),j.default.listenVoipEvent("conferenceEvent",this.onConferenceEvent),j.default.listenVoipEvent("sendMessageResult",this.onSendMessage),j.default.listenVoipEvent("sendConferenceRequestResult",this.onSendConferenceRequest),j.default.listenVoipEvent("startCall",this.startCall),j.default.listenVoipEvent("startConference",this.startConference),j.default.listenVoipEvent("joinConference",this.joinConference),this.sendMessageCallbackMap=new s.default,this.sendConferenceRequestCallbackMap=new s.default,this.queueOfferMessageMap=new s.default,this.sessionCallback=e}},{key:"getCurrentSession",value:function(){return S.currentSession}},{key:"inviteNewParticipants",value:function(e,o){var t=S.currentSession;if(t){var s=new b.default;s.callId=t.callId,s.initiator=t.selfUserInfo.uid,console.log("inviteNewParticipants","initiator "+t.selfUserInfo),s.audioOnly=t.audioOnly,s.pin=o,s.participants=e,s.existParticipants=t.getExistParticipantsStatus();var n=[].concat((0,r.default)(t.getParticipantIds()));n.push.apply(n,(0,r.default)(e)),this.sendSignalMessage(s,n,!0,(function(o,s,r){if(console.log("send invite message success"),0===o){var n=t.groupMemberUserInfos.filter((function(o){return e.findIndex((function(e){return e===o.uid}))>-1}));console.log("didAddNewParticipants av",e,n),t.didAddNewParticipants(e,n),e.forEach((function(e){t.setUserJoinTime(e,r)}))}else console.log("send invite message error",o)}))}}},{key:"updateCallStartMessageContent",value:function(e,o){var t={messageUid:e,content:o};j.default.emitToMain("update-call-start-message",t)}},{key:"clearInviteUnreadStatus",value:function(e){}},{key:"sendSignalMessage",value:function(e,o,t,s){S.currentSession.conversation&&this.sendSignalMessageEx(S.currentSession.conversation,e,o,t,s)}},{key:"sendSignalMessageEx",value:function(e,o,t,s,r){var n={conversation:e,content:o.encode(),toUsers:t};console.log("send signal message",o),r&&(this.sendMessageId++,n.sendMessageId=this.sendMessageId,this.sendMessageCallbackMap.set(this.sendMessageId,r)),j.default.emitToMain("voip-message",n)}},{key:"sendConferenceRequest",value:function(e,o,t,s,r){this.sendConferenceRequestEx(e,o,t,s,this.currentSession.advance,r)}},{key:"sendConferenceRequestEx",value:function(e,o,t,s,r,n){var i={sessionId:e,roomId:o,request:t,data:s,advance:r};n&&(this.sendConferenceRequestId++,i.sendConferenceRequestId=this.sendConferenceRequestId,this.sendConferenceRequestCallbackMap.set(this.sendConferenceRequestId,n)),j.default.emitToMain("conference-request",i)}},{key:"rejectOtherCall",value:function(e,o,t,s){var r=new c.default;r.callId=o,r.inviteMsgUid=s,r.reason=p.default.REASON_Busy,console.log("reject other call");var n={conversation:e,content:r.encode(),toUsers:t};j.default.emitToMain("voip-message",n)}},{key:"onReceiveData",value:function(e,o){var t=JSON.parse(o);if(S.currentSession.getPeerConnection(e))S.processSignalingMessage(e,t);else{console.log("queue signal",e,t);var s=this.queueOfferMessageMap.get(e);s||(s=[],this.queueOfferMessageMap.set(e,s)),s.push(t)}}},{key:"processSignalingMessage",value:function(e,o){console.log("process remote signal:"+o)}},{key:"answerCurrentCall",value:function(){var e=this,o=new A.default;o.audioOnly=S.currentSession.audioOnly,o.callId=S.currentSession.callId,o.inviteMessageUid=S.currentSession.startMsgUid,this.sendSignalMessage(o,this.currentSession.getParticipantIds(),!0,(function(o,t,s){0===o?e.currentSession.setAcceptTime(s):e.currentSession.endCall(p.default.REASON_SignalError)}))}},{key:"downgrade2VoiceCall",value:function(){var e=new m.default;S.currentSession.audioOnly=!0,e.audioOnly=S.currentSession.audioOnly,e.callId=S.currentSession.callId,this.sendSignalMessage(e,this.currentSession.getParticipantIds(),!0)}}]),o}(v.default));o.default=S},"./av/internal/roomErrorCode.js":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s,r=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),n=(s=r)&&s.__esModule?s:{default:s};var i=function e(){(0,n.default)(this,e)};i.JANUS_VIDEOROOM_ERROR_UNKNOWN_ERROR=499,i.JANUS_VIDEOROOM_ERROR_NO_MESSAGE=421,i.JANUS_VIDEOROOM_ERROR_INVALID_JSON=422,i.JANUS_VIDEOROOM_ERROR_INVALID_REQUEST=423,i.JANUS_VIDEOROOM_ERROR_JOIN_FIRST=424,i.JANUS_VIDEOROOM_ERROR_ALREADY_JOINED=425,i.JANUS_VIDEOROOM_ERROR_NO_SUCH_ROOM=426,i.JANUS_VIDEOROOM_ERROR_ROOM_EXISTS=427,i.JANUS_VIDEOROOM_ERROR_NO_SUCH_FEED=428,i.JANUS_VIDEOROOM_ERROR_MISSING_ELEMENT=429,i.JANUS_VIDEOROOM_ERROR_INVALID_ELEMENT=430,i.JANUS_VIDEOROOM_ERROR_INVALID_SDP_TYPE=431,i.JANUS_VIDEOROOM_ERROR_PUBLISHERS_FULL=432,i.JANUS_VIDEOROOM_ERROR_UNAUTHORIZED=433,i.JANUS_VIDEOROOM_ERROR_ALREADY_PUBLISHED=434,i.JANUS_VIDEOROOM_ERROR_NOT_PUBLISHED=435,i.JANUS_VIDEOROOM_ERROR_ID_EXISTS=436,i.JANUS_VIDEOROOM_ERROR_INVALID_SDP=437,o.default=i},"./av/internal/soundMeter.js":function(e,o,t){"use strict";function s(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var o=this;this.script.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0),s=void 0,r=0,n=0;for(s=0;s<t.length;++s)r+=t[s]*t[s],Math.abs(t[s])>.99&&(n+=1);o.instant=Math.sqrt(r/t.length),o.slow=.95*o.slow+.05*o.instant,o.clip=n/t.length}}Object.defineProperty(o,"__esModule",{value:!0}),o.SoundMeter=s,s.prototype.connectToSource=function(e,o){console.log("SoundMeter connecting");try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==o&&o(null)}catch(e){console.error(e),void 0!==o&&o(e)}},s.prototype.stop=function(){console.log("SoundMeter stopping"),this.mic.disconnect(),this.script.disconnect()}},"./node_modules/babel-runtime/core-js/array/from.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/array/from.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/get-iterator.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/get-iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/is-iterable.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/is-iterable.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/json/stringify.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/json/stringify.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/map.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/map.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/assign.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/create.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/define-property.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-prototype-of.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/object/get-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/promise.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/promise.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/symbol/index.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol/iterator.js":function(e,o,t){e.exports={default:t("./node_modules/core-js/library/fn/symbol/iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/asyncToGenerator.js":function(e,o,t){"use strict";o.__esModule=!0;var s,r=t("./node_modules/babel-runtime/core-js/promise.js"),n=(s=r)&&s.__esModule?s:{default:s};o.default=function(e){return function(){var o=e.apply(this,arguments);return new n.default((function(e,t){return function s(r,i){try{var a=o[r](i),l=a.value}catch(e){return void t(e)}if(!a.done)return n.default.resolve(l).then((function(e){s("next",e)}),(function(e){s("throw",e)}));e(l)}("next")}))}}},"./node_modules/babel-runtime/helpers/classCallCheck.js":function(e,o,t){"use strict";o.__esModule=!0,o.default=function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}},"./node_modules/babel-runtime/helpers/createClass.js":function(e,o,t){"use strict";o.__esModule=!0;var s,r=t("./node_modules/babel-runtime/core-js/object/define-property.js"),n=(s=r)&&s.__esModule?s:{default:s};o.default=function(){function e(e,o){for(var t=0;t<o.length;t++){var s=o[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,n.default)(e,s.key,s)}}return function(o,t,s){return t&&e(o.prototype,t),s&&e(o,s),o}}()},"./node_modules/babel-runtime/helpers/extends.js":function(e,o,t){"use strict";o.__esModule=!0;var s,r=t("./node_modules/babel-runtime/core-js/object/assign.js"),n=(s=r)&&s.__esModule?s:{default:s};o.default=n.default||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}},"./node_modules/babel-runtime/helpers/inherits.js":function(e,o,t){"use strict";o.__esModule=!0;var s=i(t("./node_modules/babel-runtime/core-js/object/set-prototype-of.js")),r=i(t("./node_modules/babel-runtime/core-js/object/create.js")),n=i(t("./node_modules/babel-runtime/helpers/typeof.js"));function i(e){return e&&e.__esModule?e:{default:e}}o.default=function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+(void 0===o?"undefined":(0,n.default)(o)));e.prototype=(0,r.default)(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(s.default?(0,s.default)(e,o):e.__proto__=o)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":function(e,o,t){"use strict";o.__esModule=!0;var s,r=t("./node_modules/babel-runtime/helpers/typeof.js"),n=(s=r)&&s.__esModule?s:{default:s};o.default=function(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!==(void 0===o?"undefined":(0,n.default)(o))&&"function"!=typeof o?e:o}},"./node_modules/babel-runtime/helpers/slicedToArray.js":function(e,o,t){"use strict";o.__esModule=!0;var s=n(t("./node_modules/babel-runtime/core-js/is-iterable.js")),r=n(t("./node_modules/babel-runtime/core-js/get-iterator.js"));function n(e){return e&&e.__esModule?e:{default:e}}o.default=function(e,o){if(Array.isArray(e))return e;if((0,s.default)(Object(e)))return function(e,o){var t=[],s=!0,n=!1,i=void 0;try{for(var a,l=(0,r.default)(e);!(s=(a=l.next()).done)&&(t.push(a.value),!o||t.length!==o);s=!0);}catch(e){n=!0,i=e}finally{try{!s&&l.return&&l.return()}finally{if(n)throw i}}return t}(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},"./node_modules/babel-runtime/helpers/toConsumableArray.js":function(e,o,t){"use strict";o.__esModule=!0;var s,r=t("./node_modules/babel-runtime/core-js/array/from.js"),n=(s=r)&&s.__esModule?s:{default:s};o.default=function(e){if(Array.isArray(e)){for(var o=0,t=Array(e.length);o<e.length;o++)t[o]=e[o];return t}return(0,n.default)(e)}},"./node_modules/babel-runtime/helpers/typeof.js":function(e,o,t){"use strict";o.__esModule=!0;var s=i(t("./node_modules/babel-runtime/core-js/symbol/iterator.js")),r=i(t("./node_modules/babel-runtime/core-js/symbol.js")),n="function"==typeof r.default&&"symbol"==typeof s.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function i(e){return e&&e.__esModule?e:{default:e}}o.default="function"==typeof r.default&&"symbol"===n(s.default)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":n(e)}},"./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime-module.js":function(e,o,t){var s=function(){return this}()||Function("return this")(),r=s.regeneratorRuntime&&Object.getOwnPropertyNames(s).indexOf("regeneratorRuntime")>=0,n=r&&s.regeneratorRuntime;if(s.regeneratorRuntime=void 0,e.exports=t("./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime.js"),r)s.regeneratorRuntime=n;else try{delete s.regeneratorRuntime}catch(e){s.regeneratorRuntime=void 0}},"./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime.js":function(e,o){!function(o){"use strict";var t=Object.prototype,s=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag",l="object"==typeof e,u=o.regeneratorRuntime;if(u)l&&(e.exports=u);else{(u=o.regeneratorRuntime=l?e.exports:{}).wrap=_;var d={},c={};c[n]=function(){return this};var A=Object.getPrototypeOf,f=A&&A(A(E([])));f&&f!==t&&s.call(f,n)&&(c=f);var m=y.prototype=j.prototype=Object.create(c);h.prototype=m.constructor=y,y.constructor=h,y[a]=h.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var o="function"==typeof e&&e.constructor;return!!o&&(o===h||"GeneratorFunction"===(o.displayName||o.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(m),e},u.awrap=function(e){return{__await:e}},b(v.prototype),v.prototype[i]=function(){return this},u.AsyncIterator=v,u.async=function(e,o,t,s){var r=new v(_(e,o,t,s));return u.isGeneratorFunction(o)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},b(m),m[a]="Generator",m[n]=function(){return this},m.toString=function(){return"[object Generator]"},u.keys=function(e){var o=[];for(var t in e)o.push(t);return o.reverse(),function t(){for(;o.length;){var s=o.pop();if(s in e)return t.value=s,t.done=!1,t}return t.done=!0,t}},u.values=E,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var o in this)"t"===o.charAt(0)&&s.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var o=this;function t(t,s){return i.type="throw",i.arg=e,o.next=t,s&&(o.method="next",o.arg=void 0),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],i=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var a=s.call(n,"catchLoc"),l=s.call(n,"finallyLoc");if(a&&l){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(e,o){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=o&&o<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=e,i.arg=o,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(i)},complete:function(e,o){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&o&&(this.next=o),d},finish:function(e){for(var o=this.tryEntries.length-1;o>=0;--o){var t=this.tryEntries[o];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),C(t),d}},catch:function(e){for(var o=this.tryEntries.length-1;o>=0;--o){var t=this.tryEntries[o];if(t.tryLoc===e){var s=t.completion;if("throw"===s.type){var r=s.arg;C(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,o,t){return this.delegate={iterator:E(e),resultName:o,nextLoc:t},"next"===this.method&&(this.arg=void 0),d}}}function _(e,o,t,s){var r=o&&o.prototype instanceof j?o:j,n=Object.create(r.prototype),i=new I(s||[]);return n._invoke=function(e,o,t){var s="suspendedStart";return function(r,n){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===r)throw n;return M()}for(t.method=r,t.arg=n;;){var i=t.delegate;if(i){var a=g(i,t);if(a){if(a===d)continue;return a}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===s)throw s="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);s="executing";var l=p(e,o,t);if("normal"===l.type){if(s=t.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:t.done}}"throw"===l.type&&(s="completed",t.method="throw",t.arg=l.arg)}}}(e,t,i),n}function p(e,o,t){try{return{type:"normal",arg:e.call(o,t)}}catch(e){return{type:"throw",arg:e}}}function j(){}function h(){}function y(){}function b(e){["next","throw","return"].forEach((function(o){e[o]=function(e){return this._invoke(o,e)}}))}function v(e){var o;this._invoke=function(t,r){function n(){return new Promise((function(o,n){!function o(t,r,n,i){var a=p(e[t],e,r);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&s.call(u,"__await")?Promise.resolve(u.__await).then((function(e){o("next",e,n,i)}),(function(e){o("throw",e,n,i)})):Promise.resolve(u).then((function(e){l.value=e,n(l)}),i)}i(a.arg)}(t,r,o,n)}))}return o=o?o.then(n,n):n()}}function g(e,o){var t=e.iterator[o.method];if(void 0===t){if(o.delegate=null,"throw"===o.method){if(e.iterator.return&&(o.method="return",o.arg=void 0,g(e,o),"throw"===o.method))return d;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var s=p(t,e.iterator,o.arg);if("throw"===s.type)return o.method="throw",o.arg=s.arg,o.delegate=null,d;var r=s.arg;return r?r.done?(o[e.resultName]=r.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=void 0),o.delegate=null,d):r:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,d)}function S(e){var o={tryLoc:e[0]};1 in e&&(o.catchLoc=e[1]),2 in e&&(o.finallyLoc=e[2],o.afterLoc=e[3]),this.tryEntries.push(o)}function C(e){var o=e.completion||{};o.type="normal",delete o.arg,e.completion=o}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var o=e[n];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,r=function o(){for(;++t<e.length;)if(s.call(e,t))return o.value=e[t],o.done=!1,o;return o.value=void 0,o.done=!0,o};return r.next=r}}return{next:M}}function M(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},"./node_modules/babel-runtime/regenerator/index.js":function(e,o,t){e.exports=t("./node_modules/babel-runtime/node_modules/regenerator-runtime/runtime-module.js")},"./node_modules/core-js/library/fn/array/from.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.string.iterator.js"),t("./node_modules/core-js/library/modules/es6.array.from.js"),e.exports=t("./node_modules/core-js/library/modules/_core.js").Array.from},"./node_modules/core-js/library/fn/get-iterator.js":function(e,o,t){t("./node_modules/core-js/library/modules/web.dom.iterable.js"),t("./node_modules/core-js/library/modules/es6.string.iterator.js"),e.exports=t("./node_modules/core-js/library/modules/core.get-iterator.js")},"./node_modules/core-js/library/fn/is-iterable.js":function(e,o,t){t("./node_modules/core-js/library/modules/web.dom.iterable.js"),t("./node_modules/core-js/library/modules/es6.string.iterator.js"),e.exports=t("./node_modules/core-js/library/modules/core.is-iterable.js")},"./node_modules/core-js/library/fn/json/stringify.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_core.js"),r=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},"./node_modules/core-js/library/fn/map.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.object.to-string.js"),t("./node_modules/core-js/library/modules/es6.string.iterator.js"),t("./node_modules/core-js/library/modules/web.dom.iterable.js"),t("./node_modules/core-js/library/modules/es6.map.js"),t("./node_modules/core-js/library/modules/es7.map.to-json.js"),t("./node_modules/core-js/library/modules/es7.map.of.js"),t("./node_modules/core-js/library/modules/es7.map.from.js"),e.exports=t("./node_modules/core-js/library/modules/_core.js").Map},"./node_modules/core-js/library/fn/object/assign.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.object.assign.js"),e.exports=t("./node_modules/core-js/library/modules/_core.js").Object.assign},"./node_modules/core-js/library/fn/object/create.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.object.create.js");var s=t("./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,o){return s.create(e,o)}},"./node_modules/core-js/library/fn/object/define-property.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.object.define-property.js");var s=t("./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,o,t){return s.defineProperty(e,o,t)}},"./node_modules/core-js/library/fn/object/get-prototype-of.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.object.get-prototype-of.js"),e.exports=t("./node_modules/core-js/library/modules/_core.js").Object.getPrototypeOf},"./node_modules/core-js/library/fn/object/set-prototype-of.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),e.exports=t("./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/fn/promise.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.object.to-string.js"),t("./node_modules/core-js/library/modules/es6.string.iterator.js"),t("./node_modules/core-js/library/modules/web.dom.iterable.js"),t("./node_modules/core-js/library/modules/es6.promise.js"),t("./node_modules/core-js/library/modules/es7.promise.finally.js"),t("./node_modules/core-js/library/modules/es7.promise.try.js"),e.exports=t("./node_modules/core-js/library/modules/_core.js").Promise},"./node_modules/core-js/library/fn/symbol/index.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.symbol.js"),t("./node_modules/core-js/library/modules/es6.object.to-string.js"),t("./node_modules/core-js/library/modules/es7.symbol.async-iterator.js"),t("./node_modules/core-js/library/modules/es7.symbol.observable.js"),e.exports=t("./node_modules/core-js/library/modules/_core.js").Symbol},"./node_modules/core-js/library/fn/symbol/iterator.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.string.iterator.js"),t("./node_modules/core-js/library/modules/web.dom.iterable.js"),e.exports=t("./node_modules/core-js/library/modules/_wks-ext.js").f("iterator")},"./node_modules/core-js/library/modules/_a-function.js":function(e,o){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/library/modules/_add-to-unscopables.js":function(e,o){e.exports=function(){}},"./node_modules/core-js/library/modules/_an-instance.js":function(e,o){e.exports=function(e,o,t,s){if(!(e instanceof o)||void 0!==s&&s in e)throw TypeError(t+": incorrect invocation!");return e}},"./node_modules/core-js/library/modules/_an-object.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/core-js/library/modules/_array-from-iterable.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_for-of.js");e.exports=function(e,o){var t=[];return s(e,!1,t.push,t,o),t}},"./node_modules/core-js/library/modules/_array-includes.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_to-iobject.js"),r=t("./node_modules/core-js/library/modules/_to-length.js"),n=t("./node_modules/core-js/library/modules/_to-absolute-index.js");e.exports=function(e){return function(o,t,i){var a,l=s(o),u=r(l.length),d=n(i,u);if(e&&t!=t){for(;u>d;)if((a=l[d++])!=a)return!0}else for(;u>d;d++)if((e||d in l)&&l[d]===t)return e||d||0;return!e&&-1}}},"./node_modules/core-js/library/modules/_array-methods.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_ctx.js"),r=t("./node_modules/core-js/library/modules/_iobject.js"),n=t("./node_modules/core-js/library/modules/_to-object.js"),i=t("./node_modules/core-js/library/modules/_to-length.js"),a=t("./node_modules/core-js/library/modules/_array-species-create.js");e.exports=function(e,o){var t=1==e,l=2==e,u=3==e,d=4==e,c=6==e,A=5==e||c,f=o||a;return function(o,a,m){for(var _,p,j=n(o),h=r(j),y=s(a,m,3),b=i(h.length),v=0,g=t?f(o,b):l?f(o,0):void 0;b>v;v++)if((A||v in h)&&(p=y(_=h[v],v,j),e))if(t)g[v]=p;else if(p)switch(e){case 3:return!0;case 5:return _;case 6:return v;case 2:g.push(_)}else if(d)return!1;return c?-1:u||d?d:g}}},"./node_modules/core-js/library/modules/_array-species-constructor.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_is-object.js"),r=t("./node_modules/core-js/library/modules/_is-array.js"),n=t("./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e){var o;return r(e)&&("function"!=typeof(o=e.constructor)||o!==Array&&!r(o.prototype)||(o=void 0),s(o)&&null===(o=o[n])&&(o=void 0)),void 0===o?Array:o}},"./node_modules/core-js/library/modules/_array-species-create.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_array-species-constructor.js");e.exports=function(e,o){return new(s(e))(o)}},"./node_modules/core-js/library/modules/_classof.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_cof.js"),r=t("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),n="Arguments"==s(function(){return arguments}());e.exports=function(e){var o,t,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,o){try{return e[o]}catch(e){}}(o=Object(e),r))?t:n?s(o):"Object"==(i=s(o))&&"function"==typeof o.callee?"Arguments":i}},"./node_modules/core-js/library/modules/_cof.js":function(e,o){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"./node_modules/core-js/library/modules/_collection-strong.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_object-dp.js").f,r=t("./node_modules/core-js/library/modules/_object-create.js"),n=t("./node_modules/core-js/library/modules/_redefine-all.js"),i=t("./node_modules/core-js/library/modules/_ctx.js"),a=t("./node_modules/core-js/library/modules/_an-instance.js"),l=t("./node_modules/core-js/library/modules/_for-of.js"),u=t("./node_modules/core-js/library/modules/_iter-define.js"),d=t("./node_modules/core-js/library/modules/_iter-step.js"),c=t("./node_modules/core-js/library/modules/_set-species.js"),A=t("./node_modules/core-js/library/modules/_descriptors.js"),f=t("./node_modules/core-js/library/modules/_meta.js").fastKey,m=t("./node_modules/core-js/library/modules/_validate-collection.js"),_=A?"_s":"size",p=function(e,o){var t,s=f(o);if("F"!==s)return e._i[s];for(t=e._f;t;t=t.n)if(t.k==o)return t};e.exports={getConstructor:function(e,o,t,u){var d=e((function(e,s){a(e,d,o,"_i"),e._t=o,e._i=r(null),e._f=void 0,e._l=void 0,e[_]=0,null!=s&&l(s,t,e[u],e)}));return n(d.prototype,{clear:function(){for(var e=m(this,o),t=e._i,s=e._f;s;s=s.n)s.r=!0,s.p&&(s.p=s.p.n=void 0),delete t[s.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var t=m(this,o),s=p(t,e);if(s){var r=s.n,n=s.p;delete t._i[s.i],s.r=!0,n&&(n.n=r),r&&(r.p=n),t._f==s&&(t._f=r),t._l==s&&(t._l=n),t[_]--}return!!s},forEach:function(e){m(this,o);for(var t,s=i(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(s(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!p(m(this,o),e)}}),A&&s(d.prototype,"size",{get:function(){return m(this,o)[_]}}),d},def:function(e,o,t){var s,r,n=p(e,o);return n?n.v=t:(e._l=n={i:r=f(o,!0),k:o,v:t,p:s=e._l,n:void 0,r:!1},e._f||(e._f=n),s&&(s.n=n),e[_]++,"F"!==r&&(e._i[r]=n)),e},getEntry:p,setStrong:function(e,o,t){u(e,o,(function(e,t){this._t=m(e,o),this._k=t,this._l=void 0}),(function(){for(var e=this._k,o=this._l;o&&o.r;)o=o.p;return this._t&&(this._l=o=o?o.n:this._t._f)?d(0,"keys"==e?o.k:"values"==e?o.v:[o.k,o.v]):(this._t=void 0,d(1))}),t?"entries":"values",!t,!0),c(o)}}},"./node_modules/core-js/library/modules/_collection-to-json.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_classof.js"),r=t("./node_modules/core-js/library/modules/_array-from-iterable.js");e.exports=function(e){return function(){if(s(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},"./node_modules/core-js/library/modules/_collection.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_global.js"),r=t("./node_modules/core-js/library/modules/_export.js"),n=t("./node_modules/core-js/library/modules/_meta.js"),i=t("./node_modules/core-js/library/modules/_fails.js"),a=t("./node_modules/core-js/library/modules/_hide.js"),l=t("./node_modules/core-js/library/modules/_redefine-all.js"),u=t("./node_modules/core-js/library/modules/_for-of.js"),d=t("./node_modules/core-js/library/modules/_an-instance.js"),c=t("./node_modules/core-js/library/modules/_is-object.js"),A=t("./node_modules/core-js/library/modules/_set-to-string-tag.js"),f=t("./node_modules/core-js/library/modules/_object-dp.js").f,m=t("./node_modules/core-js/library/modules/_array-methods.js")(0),_=t("./node_modules/core-js/library/modules/_descriptors.js");e.exports=function(e,o,t,p,j,h){var y=s[e],b=y,v=j?"set":"add",g=b&&b.prototype,S={};return _&&"function"==typeof b&&(h||g.forEach&&!i((function(){(new b).entries().next()})))?(b=o((function(o,t){d(o,b,e,"_c"),o._c=new y,null!=t&&u(t,j,o[v],o)})),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var o="add"==e||"set"==e;e in g&&(!h||"clear"!=e)&&a(b.prototype,e,(function(t,s){if(d(this,b,e),!o&&h&&!c(t))return"get"==e&&void 0;var r=this._c[e](0===t?0:t,s);return o?this:r}))})),h||f(b.prototype,"size",{get:function(){return this._c.size}})):(b=p.getConstructor(o,e,j,v),l(b.prototype,t),n.NEED=!0),A(b,e),S[e]=b,r(r.G+r.W+r.F,S),h||p.setStrong(b,e,j),b}},"./node_modules/core-js/library/modules/_core.js":function(e,o){var t=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=t)},"./node_modules/core-js/library/modules/_create-property.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_object-dp.js"),r=t("./node_modules/core-js/library/modules/_property-desc.js");e.exports=function(e,o,t){o in e?s.f(e,o,r(0,t)):e[o]=t}},"./node_modules/core-js/library/modules/_ctx.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_a-function.js");e.exports=function(e,o,t){if(s(e),void 0===o)return e;switch(t){case 1:return function(t){return e.call(o,t)};case 2:return function(t,s){return e.call(o,t,s)};case 3:return function(t,s,r){return e.call(o,t,s,r)}}return function(){return e.apply(o,arguments)}}},"./node_modules/core-js/library/modules/_defined.js":function(e,o){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"./node_modules/core-js/library/modules/_descriptors.js":function(e,o,t){e.exports=!t("./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_dom-create.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_is-object.js"),r=t("./node_modules/core-js/library/modules/_global.js").document,n=s(r)&&s(r.createElement);e.exports=function(e){return n?r.createElement(e):{}}},"./node_modules/core-js/library/modules/_enum-bug-keys.js":function(e,o){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/library/modules/_enum-keys.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_object-keys.js"),r=t("./node_modules/core-js/library/modules/_object-gops.js"),n=t("./node_modules/core-js/library/modules/_object-pie.js");e.exports=function(e){var o=s(e),t=r.f;if(t)for(var i,a=t(e),l=n.f,u=0;a.length>u;)l.call(e,i=a[u++])&&o.push(i);return o}},"./node_modules/core-js/library/modules/_export.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_global.js"),r=t("./node_modules/core-js/library/modules/_core.js"),n=t("./node_modules/core-js/library/modules/_ctx.js"),i=t("./node_modules/core-js/library/modules/_hide.js"),a=t("./node_modules/core-js/library/modules/_has.js"),l=function(e,o,t){var u,d,c,A=e&l.F,f=e&l.G,m=e&l.S,_=e&l.P,p=e&l.B,j=e&l.W,h=f?r:r[o]||(r[o]={}),y=h.prototype,b=f?s:m?s[o]:(s[o]||{}).prototype;for(u in f&&(t=o),t)(d=!A&&b&&void 0!==b[u])&&a(h,u)||(c=d?b[u]:t[u],h[u]=f&&"function"!=typeof b[u]?t[u]:p&&d?n(c,s):j&&b[u]==c?function(e){var o=function(o,t,s){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(o);case 2:return new e(o,t)}return new e(o,t,s)}return e.apply(this,arguments)};return o.prototype=e.prototype,o}(c):_&&"function"==typeof c?n(Function.call,c):c,_&&((h.virtual||(h.virtual={}))[u]=c,e&l.R&&y&&!y[u]&&i(y,u,c)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"./node_modules/core-js/library/modules/_fails.js":function(e,o){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"./node_modules/core-js/library/modules/_for-of.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_ctx.js"),r=t("./node_modules/core-js/library/modules/_iter-call.js"),n=t("./node_modules/core-js/library/modules/_is-array-iter.js"),i=t("./node_modules/core-js/library/modules/_an-object.js"),a=t("./node_modules/core-js/library/modules/_to-length.js"),l=t("./node_modules/core-js/library/modules/core.get-iterator-method.js"),u={},d={};(o=e.exports=function(e,o,t,c,A){var f,m,_,p,j=A?function(){return e}:l(e),h=s(t,c,o?2:1),y=0;if("function"!=typeof j)throw TypeError(e+" is not iterable!");if(n(j)){for(f=a(e.length);f>y;y++)if((p=o?h(i(m=e[y])[0],m[1]):h(e[y]))===u||p===d)return p}else for(_=j.call(e);!(m=_.next()).done;)if((p=r(_,h,m.value,o))===u||p===d)return p}).BREAK=u,o.RETURN=d},"./node_modules/core-js/library/modules/_global.js":function(e,o){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},"./node_modules/core-js/library/modules/_has.js":function(e,o){var t={}.hasOwnProperty;e.exports=function(e,o){return t.call(e,o)}},"./node_modules/core-js/library/modules/_hide.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_object-dp.js"),r=t("./node_modules/core-js/library/modules/_property-desc.js");e.exports=t("./node_modules/core-js/library/modules/_descriptors.js")?function(e,o,t){return s.f(e,o,r(1,t))}:function(e,o,t){return e[o]=t,e}},"./node_modules/core-js/library/modules/_html.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_global.js").document;e.exports=s&&s.documentElement},"./node_modules/core-js/library/modules/_ie8-dom-define.js":function(e,o,t){e.exports=!t("./node_modules/core-js/library/modules/_descriptors.js")&&!t("./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty(t("./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_invoke.js":function(e,o){e.exports=function(e,o,t){var s=void 0===t;switch(o.length){case 0:return s?e():e.call(t);case 1:return s?e(o[0]):e.call(t,o[0]);case 2:return s?e(o[0],o[1]):e.call(t,o[0],o[1]);case 3:return s?e(o[0],o[1],o[2]):e.call(t,o[0],o[1],o[2]);case 4:return s?e(o[0],o[1],o[2],o[3]):e.call(t,o[0],o[1],o[2],o[3])}return e.apply(t,o)}},"./node_modules/core-js/library/modules/_iobject.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)}},"./node_modules/core-js/library/modules/_is-array-iter.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_iterators.js"),r=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),n=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||n[r]===e)}},"./node_modules/core-js/library/modules/_is-array.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_cof.js");e.exports=Array.isArray||function(e){return"Array"==s(e)}},"./node_modules/core-js/library/modules/_is-object.js":function(e,o){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/core-js/library/modules/_iter-call.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_an-object.js");e.exports=function(e,o,t,r){try{return r?o(s(t)[0],t[1]):o(t)}catch(o){var n=e.return;throw void 0!==n&&s(n.call(e)),o}}},"./node_modules/core-js/library/modules/_iter-create.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_object-create.js"),r=t("./node_modules/core-js/library/modules/_property-desc.js"),n=t("./node_modules/core-js/library/modules/_set-to-string-tag.js"),i={};t("./node_modules/core-js/library/modules/_hide.js")(i,t("./node_modules/core-js/library/modules/_wks.js")("iterator"),(function(){return this})),e.exports=function(e,o,t){e.prototype=s(i,{next:r(1,t)}),n(e,o+" Iterator")}},"./node_modules/core-js/library/modules/_iter-define.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_library.js"),r=t("./node_modules/core-js/library/modules/_export.js"),n=t("./node_modules/core-js/library/modules/_redefine.js"),i=t("./node_modules/core-js/library/modules/_hide.js"),a=t("./node_modules/core-js/library/modules/_iterators.js"),l=t("./node_modules/core-js/library/modules/_iter-create.js"),u=t("./node_modules/core-js/library/modules/_set-to-string-tag.js"),d=t("./node_modules/core-js/library/modules/_object-gpo.js"),c=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),A=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,o,t,m,_,p,j){l(t,o,m);var h,y,b,v=function(e){if(!A&&e in I)return I[e];switch(e){case"keys":case"values":return function(){return new t(this,e)}}return function(){return new t(this,e)}},g=o+" Iterator",S="values"==_,C=!1,I=e.prototype,E=I[c]||I["@@iterator"]||_&&I[_],M=E||v(_),k=_?S?v("entries"):M:void 0,T="Array"==o&&I.entries||E;if(T&&(b=d(T.call(new e)))!==Object.prototype&&b.next&&(u(b,g,!0),s||"function"==typeof b[c]||i(b,c,f)),S&&E&&"values"!==E.name&&(C=!0,M=function(){return E.call(this)}),s&&!j||!A&&!C&&I[c]||i(I,c,M),a[o]=M,a[g]=f,_)if(h={values:S?M:v("values"),keys:p?M:v("keys"),entries:k},j)for(y in h)y in I||n(I,y,h[y]);else r(r.P+r.F*(A||C),o,h);return h}},"./node_modules/core-js/library/modules/_iter-detect.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),r=!1;try{var n=[7][s]();n.return=function(){r=!0},Array.from(n,(function(){throw 2}))}catch(e){}e.exports=function(e,o){if(!o&&!r)return!1;var t=!1;try{var n=[7],i=n[s]();i.next=function(){return{done:t=!0}},n[s]=function(){return i},e(n)}catch(e){}return t}},"./node_modules/core-js/library/modules/_iter-step.js":function(e,o){e.exports=function(e,o){return{value:o,done:!!e}}},"./node_modules/core-js/library/modules/_iterators.js":function(e,o){e.exports={}},"./node_modules/core-js/library/modules/_library.js":function(e,o){e.exports=!0},"./node_modules/core-js/library/modules/_meta.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_uid.js")("meta"),r=t("./node_modules/core-js/library/modules/_is-object.js"),n=t("./node_modules/core-js/library/modules/_has.js"),i=t("./node_modules/core-js/library/modules/_object-dp.js").f,a=0,l=Object.isExtensible||function(){return!0},u=!t("./node_modules/core-js/library/modules/_fails.js")((function(){return l(Object.preventExtensions({}))})),d=function(e){i(e,s,{value:{i:"O"+ ++a,w:{}}})},c=e.exports={KEY:s,NEED:!1,fastKey:function(e,o){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,s)){if(!l(e))return"F";if(!o)return"E";d(e)}return e[s].i},getWeak:function(e,o){if(!n(e,s)){if(!l(e))return!0;if(!o)return!1;d(e)}return e[s].w},onFreeze:function(e){return u&&c.NEED&&l(e)&&!n(e,s)&&d(e),e}}},"./node_modules/core-js/library/modules/_microtask.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_global.js"),r=t("./node_modules/core-js/library/modules/_task.js").set,n=s.MutationObserver||s.WebKitMutationObserver,i=s.process,a=s.Promise,l="process"==t("./node_modules/core-js/library/modules/_cof.js")(i);e.exports=function(){var e,o,t,u=function(){var s,r;for(l&&(s=i.domain)&&s.exit();e;){r=e.fn,e=e.next;try{r()}catch(s){throw e?t():o=void 0,s}}o=void 0,s&&s.enter()};if(l)t=function(){i.nextTick(u)};else if(!n||s.navigator&&s.navigator.standalone)if(a&&a.resolve){var d=a.resolve(void 0);t=function(){d.then(u)}}else t=function(){r.call(s,u)};else{var c=!0,A=document.createTextNode("");new n(u).observe(A,{characterData:!0}),t=function(){A.data=c=!c}}return function(s){var r={fn:s,next:void 0};o&&(o.next=r),e||(e=r,t()),o=r}}},"./node_modules/core-js/library/modules/_new-promise-capability.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_a-function.js");function r(e){var o,t;this.promise=new e((function(e,s){if(void 0!==o||void 0!==t)throw TypeError("Bad Promise constructor");o=e,t=s})),this.resolve=s(o),this.reject=s(t)}e.exports.f=function(e){return new r(e)}},"./node_modules/core-js/library/modules/_object-assign.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_descriptors.js"),r=t("./node_modules/core-js/library/modules/_object-keys.js"),n=t("./node_modules/core-js/library/modules/_object-gops.js"),i=t("./node_modules/core-js/library/modules/_object-pie.js"),a=t("./node_modules/core-js/library/modules/_to-object.js"),l=t("./node_modules/core-js/library/modules/_iobject.js"),u=Object.assign;e.exports=!u||t("./node_modules/core-js/library/modules/_fails.js")((function(){var e={},o={},t=Symbol(),s="abcdefghijklmnopqrst";return e[t]=7,s.split("").forEach((function(e){o[e]=e})),7!=u({},e)[t]||Object.keys(u({},o)).join("")!=s}))?function(e,o){for(var t=a(e),u=arguments.length,d=1,c=n.f,A=i.f;u>d;)for(var f,m=l(arguments[d++]),_=c?r(m).concat(c(m)):r(m),p=_.length,j=0;p>j;)f=_[j++],s&&!A.call(m,f)||(t[f]=m[f]);return t}:u},"./node_modules/core-js/library/modules/_object-create.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_an-object.js"),r=t("./node_modules/core-js/library/modules/_object-dps.js"),n=t("./node_modules/core-js/library/modules/_enum-bug-keys.js"),i=t("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),a=function(){},l=function(){var e,o=t("./node_modules/core-js/library/modules/_dom-create.js")("iframe"),s=n.length;for(o.style.display="none",t("./node_modules/core-js/library/modules/_html.js").appendChild(o),o.src="javascript:",(e=o.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;s--;)delete l.prototype[n[s]];return l()};e.exports=Object.create||function(e,o){var t;return null!==e?(a.prototype=s(e),t=new a,a.prototype=null,t[i]=e):t=l(),void 0===o?t:r(t,o)}},"./node_modules/core-js/library/modules/_object-dp.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_an-object.js"),r=t("./node_modules/core-js/library/modules/_ie8-dom-define.js"),n=t("./node_modules/core-js/library/modules/_to-primitive.js"),i=Object.defineProperty;o.f=t("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(e,o,t){if(s(e),o=n(o,!0),s(t),r)try{return i(e,o,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[o]=t.value),e}},"./node_modules/core-js/library/modules/_object-dps.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_object-dp.js"),r=t("./node_modules/core-js/library/modules/_an-object.js"),n=t("./node_modules/core-js/library/modules/_object-keys.js");e.exports=t("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function(e,o){r(e);for(var t,i=n(o),a=i.length,l=0;a>l;)s.f(e,t=i[l++],o[t]);return e}},"./node_modules/core-js/library/modules/_object-gopd.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_object-pie.js"),r=t("./node_modules/core-js/library/modules/_property-desc.js"),n=t("./node_modules/core-js/library/modules/_to-iobject.js"),i=t("./node_modules/core-js/library/modules/_to-primitive.js"),a=t("./node_modules/core-js/library/modules/_has.js"),l=t("./node_modules/core-js/library/modules/_ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;o.f=t("./node_modules/core-js/library/modules/_descriptors.js")?u:function(e,o){if(e=n(e),o=i(o,!0),l)try{return u(e,o)}catch(e){}if(a(e,o))return r(!s.f.call(e,o),e[o])}},"./node_modules/core-js/library/modules/_object-gopn-ext.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_to-iobject.js"),r=t("./node_modules/core-js/library/modules/_object-gopn.js").f,n={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return i&&"[object Window]"==n.call(e)?function(e){try{return r(e)}catch(e){return i.slice()}}(e):r(s(e))}},"./node_modules/core-js/library/modules/_object-gopn.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_object-keys-internal.js"),r=t("./node_modules/core-js/library/modules/_enum-bug-keys.js").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(e){return s(e,r)}},"./node_modules/core-js/library/modules/_object-gops.js":function(e,o){o.f=Object.getOwnPropertySymbols},"./node_modules/core-js/library/modules/_object-gpo.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_has.js"),r=t("./node_modules/core-js/library/modules/_to-object.js"),n=t("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),s(e,n)?e[n]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},"./node_modules/core-js/library/modules/_object-keys-internal.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_has.js"),r=t("./node_modules/core-js/library/modules/_to-iobject.js"),n=t("./node_modules/core-js/library/modules/_array-includes.js")(!1),i=t("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,o){var t,a=r(e),l=0,u=[];for(t in a)t!=i&&s(a,t)&&u.push(t);for(;o.length>l;)s(a,t=o[l++])&&(~n(u,t)||u.push(t));return u}},"./node_modules/core-js/library/modules/_object-keys.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_object-keys-internal.js"),r=t("./node_modules/core-js/library/modules/_enum-bug-keys.js");e.exports=Object.keys||function(e){return s(e,r)}},"./node_modules/core-js/library/modules/_object-pie.js":function(e,o){o.f={}.propertyIsEnumerable},"./node_modules/core-js/library/modules/_object-sap.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_export.js"),r=t("./node_modules/core-js/library/modules/_core.js"),n=t("./node_modules/core-js/library/modules/_fails.js");e.exports=function(e,o){var t=(r.Object||{})[e]||Object[e],i={};i[e]=o(t),s(s.S+s.F*n((function(){t(1)})),"Object",i)}},"./node_modules/core-js/library/modules/_perform.js":function(e,o){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},"./node_modules/core-js/library/modules/_promise-resolve.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_an-object.js"),r=t("./node_modules/core-js/library/modules/_is-object.js"),n=t("./node_modules/core-js/library/modules/_new-promise-capability.js");e.exports=function(e,o){if(s(e),r(o)&&o.constructor===e)return o;var t=n.f(e);return(0,t.resolve)(o),t.promise}},"./node_modules/core-js/library/modules/_property-desc.js":function(e,o){e.exports=function(e,o){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:o}}},"./node_modules/core-js/library/modules/_redefine-all.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_hide.js");e.exports=function(e,o,t){for(var r in o)t&&e[r]?e[r]=o[r]:s(e,r,o[r]);return e}},"./node_modules/core-js/library/modules/_redefine.js":function(e,o,t){e.exports=t("./node_modules/core-js/library/modules/_hide.js")},"./node_modules/core-js/library/modules/_set-collection-from.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_export.js"),r=t("./node_modules/core-js/library/modules/_a-function.js"),n=t("./node_modules/core-js/library/modules/_ctx.js"),i=t("./node_modules/core-js/library/modules/_for-of.js");e.exports=function(e){s(s.S,e,{from:function(e){var o,t,s,a,l=arguments[1];return r(this),(o=void 0!==l)&&r(l),null==e?new this:(t=[],o?(s=0,a=n(l,arguments[2],2),i(e,!1,(function(e){t.push(a(e,s++))}))):i(e,!1,t.push,t),new this(t))}})}},"./node_modules/core-js/library/modules/_set-collection-of.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_export.js");e.exports=function(e){s(s.S,e,{of:function(){for(var e=arguments.length,o=new Array(e);e--;)o[e]=arguments[e];return new this(o)}})}},"./node_modules/core-js/library/modules/_set-proto.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_is-object.js"),r=t("./node_modules/core-js/library/modules/_an-object.js"),n=function(e,o){if(r(e),!s(o)&&null!==o)throw TypeError(o+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,o,s){try{(s=t("./node_modules/core-js/library/modules/_ctx.js")(Function.call,t("./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2))(e,[]),o=!(e instanceof Array)}catch(e){o=!0}return function(e,t){return n(e,t),o?e.__proto__=t:s(e,t),e}}({},!1):void 0),check:n}},"./node_modules/core-js/library/modules/_set-species.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_global.js"),r=t("./node_modules/core-js/library/modules/_core.js"),n=t("./node_modules/core-js/library/modules/_object-dp.js"),i=t("./node_modules/core-js/library/modules/_descriptors.js"),a=t("./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e){var o="function"==typeof r[e]?r[e]:s[e];i&&o&&!o[a]&&n.f(o,a,{configurable:!0,get:function(){return this}})}},"./node_modules/core-js/library/modules/_set-to-string-tag.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_object-dp.js").f,r=t("./node_modules/core-js/library/modules/_has.js"),n=t("./node_modules/core-js/library/modules/_wks.js")("toStringTag");e.exports=function(e,o,t){e&&!r(e=t?e:e.prototype,n)&&s(e,n,{configurable:!0,value:o})}},"./node_modules/core-js/library/modules/_shared-key.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_shared.js")("keys"),r=t("./node_modules/core-js/library/modules/_uid.js");e.exports=function(e){return s[e]||(s[e]=r(e))}},"./node_modules/core-js/library/modules/_shared.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_core.js"),r=t("./node_modules/core-js/library/modules/_global.js"),n=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,o){return n[e]||(n[e]=void 0!==o?o:{})})("versions",[]).push({version:s.version,mode:t("./node_modules/core-js/library/modules/_library.js")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/library/modules/_species-constructor.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_an-object.js"),r=t("./node_modules/core-js/library/modules/_a-function.js"),n=t("./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e,o){var t,i=s(e).constructor;return void 0===i||null==(t=s(i)[n])?o:r(t)}},"./node_modules/core-js/library/modules/_string-at.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_to-integer.js"),r=t("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return function(o,t){var n,i,a=String(r(o)),l=s(t),u=a.length;return l<0||l>=u?e?"":void 0:(n=a.charCodeAt(l))<55296||n>56319||l+1===u||(i=a.charCodeAt(l+1))<56320||i>57343?e?a.charAt(l):n:e?a.slice(l,l+2):i-56320+(n-55296<<10)+65536}}},"./node_modules/core-js/library/modules/_task.js":function(e,o,t){var s,r,n,i=t("./node_modules/core-js/library/modules/_ctx.js"),a=t("./node_modules/core-js/library/modules/_invoke.js"),l=t("./node_modules/core-js/library/modules/_html.js"),u=t("./node_modules/core-js/library/modules/_dom-create.js"),d=t("./node_modules/core-js/library/modules/_global.js"),c=d.process,A=d.setImmediate,f=d.clearImmediate,m=d.MessageChannel,_=d.Dispatch,p=0,j={},h=function(){var e=+this;if(j.hasOwnProperty(e)){var o=j[e];delete j[e],o()}},y=function(e){h.call(e.data)};A&&f||(A=function(e){for(var o=[],t=1;arguments.length>t;)o.push(arguments[t++]);return j[++p]=function(){a("function"==typeof e?e:Function(e),o)},s(p),p},f=function(e){delete j[e]},"process"==t("./node_modules/core-js/library/modules/_cof.js")(c)?s=function(e){c.nextTick(i(h,e,1))}:_&&_.now?s=function(e){_.now(i(h,e,1))}:m?(n=(r=new m).port2,r.port1.onmessage=y,s=i(n.postMessage,n,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(s=function(e){d.postMessage(e+"","*")},d.addEventListener("message",y,!1)):s="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),h.call(e)}}:function(e){setTimeout(i(h,e,1),0)}),e.exports={set:A,clear:f}},"./node_modules/core-js/library/modules/_to-absolute-index.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_to-integer.js"),r=Math.max,n=Math.min;e.exports=function(e,o){return(e=s(e))<0?r(e+o,0):n(e,o)}},"./node_modules/core-js/library/modules/_to-integer.js":function(e,o){var t=Math.ceil,s=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?s:t)(e)}},"./node_modules/core-js/library/modules/_to-iobject.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_iobject.js"),r=t("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return s(r(e))}},"./node_modules/core-js/library/modules/_to-length.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_to-integer.js"),r=Math.min;e.exports=function(e){return e>0?r(s(e),9007199254740991):0}},"./node_modules/core-js/library/modules/_to-object.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return Object(s(e))}},"./node_modules/core-js/library/modules/_to-primitive.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,o){if(!s(e))return e;var t,r;if(o&&"function"==typeof(t=e.toString)&&!s(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!s(r=t.call(e)))return r;if(!o&&"function"==typeof(t=e.toString)&&!s(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/_uid.js":function(e,o){var t=0,s=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+s).toString(36))}},"./node_modules/core-js/library/modules/_user-agent.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_global.js").navigator;e.exports=s&&s.userAgent||""},"./node_modules/core-js/library/modules/_validate-collection.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,o){if(!s(e)||e._t!==o)throw TypeError("Incompatible receiver, "+o+" required!");return e}},"./node_modules/core-js/library/modules/_wks-define.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_global.js"),r=t("./node_modules/core-js/library/modules/_core.js"),n=t("./node_modules/core-js/library/modules/_library.js"),i=t("./node_modules/core-js/library/modules/_wks-ext.js"),a=t("./node_modules/core-js/library/modules/_object-dp.js").f;e.exports=function(e){var o=r.Symbol||(r.Symbol=n?{}:s.Symbol||{});"_"==e.charAt(0)||e in o||a(o,e,{value:i.f(e)})}},"./node_modules/core-js/library/modules/_wks-ext.js":function(e,o,t){o.f=t("./node_modules/core-js/library/modules/_wks.js")},"./node_modules/core-js/library/modules/_wks.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_shared.js")("wks"),r=t("./node_modules/core-js/library/modules/_uid.js"),n=t("./node_modules/core-js/library/modules/_global.js").Symbol,i="function"==typeof n;(e.exports=function(e){return s[e]||(s[e]=i&&n[e]||(i?n:r)("Symbol."+e))}).store=s},"./node_modules/core-js/library/modules/core.get-iterator-method.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_classof.js"),r=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),n=t("./node_modules/core-js/library/modules/_iterators.js");e.exports=t("./node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||n[s(e)]}},"./node_modules/core-js/library/modules/core.get-iterator.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_an-object.js"),r=t("./node_modules/core-js/library/modules/core.get-iterator-method.js");e.exports=t("./node_modules/core-js/library/modules/_core.js").getIterator=function(e){var o=r(e);if("function"!=typeof o)throw TypeError(e+" is not iterable!");return s(o.call(e))}},"./node_modules/core-js/library/modules/core.is-iterable.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_classof.js"),r=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),n=t("./node_modules/core-js/library/modules/_iterators.js");e.exports=t("./node_modules/core-js/library/modules/_core.js").isIterable=function(e){var o=Object(e);return void 0!==o[r]||"@@iterator"in o||n.hasOwnProperty(s(o))}},"./node_modules/core-js/library/modules/es6.array.from.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_ctx.js"),r=t("./node_modules/core-js/library/modules/_export.js"),n=t("./node_modules/core-js/library/modules/_to-object.js"),i=t("./node_modules/core-js/library/modules/_iter-call.js"),a=t("./node_modules/core-js/library/modules/_is-array-iter.js"),l=t("./node_modules/core-js/library/modules/_to-length.js"),u=t("./node_modules/core-js/library/modules/_create-property.js"),d=t("./node_modules/core-js/library/modules/core.get-iterator-method.js");r(r.S+r.F*!t("./node_modules/core-js/library/modules/_iter-detect.js")((function(e){Array.from(e)})),"Array",{from:function(e){var o,t,r,c,A=n(e),f="function"==typeof this?this:Array,m=arguments.length,_=m>1?arguments[1]:void 0,p=void 0!==_,j=0,h=d(A);if(p&&(_=s(_,m>2?arguments[2]:void 0,2)),null==h||f==Array&&a(h))for(t=new f(o=l(A.length));o>j;j++)u(t,j,p?_(A[j],j):A[j]);else for(c=h.call(A),t=new f;!(r=c.next()).done;j++)u(t,j,p?i(c,_,[r.value,j],!0):r.value);return t.length=j,t}})},"./node_modules/core-js/library/modules/es6.array.iterator.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_add-to-unscopables.js"),r=t("./node_modules/core-js/library/modules/_iter-step.js"),n=t("./node_modules/core-js/library/modules/_iterators.js"),i=t("./node_modules/core-js/library/modules/_to-iobject.js");e.exports=t("./node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",(function(e,o){this._t=i(e),this._i=0,this._k=o}),(function(){var e=this._t,o=this._k,t=this._i++;return!e||t>=e.length?(this._t=void 0,r(1)):r(0,"keys"==o?t:"values"==o?e[t]:[t,e[t]])}),"values"),n.Arguments=n.Array,s("keys"),s("values"),s("entries")},"./node_modules/core-js/library/modules/es6.map.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_collection-strong.js"),r=t("./node_modules/core-js/library/modules/_validate-collection.js");e.exports=t("./node_modules/core-js/library/modules/_collection.js")("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var o=s.getEntry(r(this,"Map"),e);return o&&o.v},set:function(e,o){return s.def(r(this,"Map"),0===e?0:e,o)}},s,!0)},"./node_modules/core-js/library/modules/es6.object.assign.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_export.js");s(s.S+s.F,"Object",{assign:t("./node_modules/core-js/library/modules/_object-assign.js")})},"./node_modules/core-js/library/modules/es6.object.create.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_export.js");s(s.S,"Object",{create:t("./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.define-property.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_export.js");s(s.S+s.F*!t("./node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:t("./node_modules/core-js/library/modules/_object-dp.js").f})},"./node_modules/core-js/library/modules/es6.object.get-prototype-of.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_to-object.js"),r=t("./node_modules/core-js/library/modules/_object-gpo.js");t("./node_modules/core-js/library/modules/_object-sap.js")("getPrototypeOf",(function(){return function(e){return r(s(e))}}))},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_export.js");s(s.S,"Object",{setPrototypeOf:t("./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/core-js/library/modules/es6.object.to-string.js":function(e,o){},"./node_modules/core-js/library/modules/es6.promise.js":function(e,o,t){"use strict";var s,r,n,i,a=t("./node_modules/core-js/library/modules/_library.js"),l=t("./node_modules/core-js/library/modules/_global.js"),u=t("./node_modules/core-js/library/modules/_ctx.js"),d=t("./node_modules/core-js/library/modules/_classof.js"),c=t("./node_modules/core-js/library/modules/_export.js"),A=t("./node_modules/core-js/library/modules/_is-object.js"),f=t("./node_modules/core-js/library/modules/_a-function.js"),m=t("./node_modules/core-js/library/modules/_an-instance.js"),_=t("./node_modules/core-js/library/modules/_for-of.js"),p=t("./node_modules/core-js/library/modules/_species-constructor.js"),j=t("./node_modules/core-js/library/modules/_task.js").set,h=t("./node_modules/core-js/library/modules/_microtask.js")(),y=t("./node_modules/core-js/library/modules/_new-promise-capability.js"),b=t("./node_modules/core-js/library/modules/_perform.js"),v=t("./node_modules/core-js/library/modules/_user-agent.js"),g=t("./node_modules/core-js/library/modules/_promise-resolve.js"),S=l.TypeError,C=l.process,I=C&&C.versions,E=I&&I.v8||"",M=l.Promise,k="process"==d(C),T=function(){},O=r=y.f,w=!!function(){try{var e=M.resolve(1),o=(e.constructor={})[t("./node_modules/core-js/library/modules/_wks.js")("species")]=function(e){e(T,T)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof o&&0!==E.indexOf("6.6")&&-1===v.indexOf("Chrome/66")}catch(e){}}(),x=function(e){var o;return!(!A(e)||"function"!=typeof(o=e.then))&&o},R=function(e,o){if(!e._n){e._n=!0;var t=e._c;h((function(){for(var s=e._v,r=1==e._s,n=0,i=function(o){var t,n,i,a=r?o.ok:o.fail,l=o.resolve,u=o.reject,d=o.domain;try{a?(r||(2==e._h&&U(e),e._h=1),!0===a?t=s:(d&&d.enter(),t=a(s),d&&(d.exit(),i=!0)),t===o.promise?u(S("Promise-chain cycle")):(n=x(t))?n.call(t,l,u):l(t)):u(s)}catch(e){d&&!i&&d.exit(),u(e)}};t.length>n;)i(t[n++]);e._c=[],e._n=!1,o&&!e._h&&N(e)}))}},N=function(e){j.call(l,(function(){var o,t,s,r=e._v,n=P(e);if(n&&(o=b((function(){k?C.emit("unhandledRejection",r,e):(t=l.onunhandledrejection)?t({promise:e,reason:r}):(s=l.console)&&s.error&&s.error("Unhandled promise rejection",r)})),e._h=k||P(e)?2:1),e._a=void 0,n&&o.e)throw o.v}))},P=function(e){return 1!==e._h&&0===(e._a||e._c).length},U=function(e){j.call(l,(function(){var o;k?C.emit("rejectionHandled",e):(o=l.onrejectionhandled)&&o({promise:e,reason:e._v})}))},V=function(e){var o=this;o._d||(o._d=!0,(o=o._w||o)._v=e,o._s=2,o._a||(o._a=o._c.slice()),R(o,!0))},B=function(e){var o,t=this;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw S("Promise can't be resolved itself");(o=x(e))?h((function(){var s={_w:t,_d:!1};try{o.call(e,u(B,s,1),u(V,s,1))}catch(e){V.call(s,e)}})):(t._v=e,t._s=1,R(t,!1))}catch(e){V.call({_w:t,_d:!1},e)}}};w||(M=function(e){m(this,M,"Promise","_h"),f(e),s.call(this);try{e(u(B,this,1),u(V,this,1))}catch(e){V.call(this,e)}},(s=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=t("./node_modules/core-js/library/modules/_redefine-all.js")(M.prototype,{then:function(e,o){var t=O(p(this,M));return t.ok="function"!=typeof e||e,t.fail="function"==typeof o&&o,t.domain=k?C.domain:void 0,this._c.push(t),this._a&&this._a.push(t),this._s&&R(this,!1),t.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new s;this.promise=e,this.resolve=u(B,e,1),this.reject=u(V,e,1)},y.f=O=function(e){return e===M||e===i?new n(e):r(e)}),c(c.G+c.W+c.F*!w,{Promise:M}),t("./node_modules/core-js/library/modules/_set-to-string-tag.js")(M,"Promise"),t("./node_modules/core-js/library/modules/_set-species.js")("Promise"),i=t("./node_modules/core-js/library/modules/_core.js").Promise,c(c.S+c.F*!w,"Promise",{reject:function(e){var o=O(this);return(0,o.reject)(e),o.promise}}),c(c.S+c.F*(a||!w),"Promise",{resolve:function(e){return g(a&&this===i?M:this,e)}}),c(c.S+c.F*!(w&&t("./node_modules/core-js/library/modules/_iter-detect.js")((function(e){M.all(e).catch(T)}))),"Promise",{all:function(e){var o=this,t=O(o),s=t.resolve,r=t.reject,n=b((function(){var t=[],n=0,i=1;_(e,!1,(function(e){var a=n++,l=!1;t.push(void 0),i++,o.resolve(e).then((function(e){l||(l=!0,t[a]=e,--i||s(t))}),r)})),--i||s(t)}));return n.e&&r(n.v),t.promise},race:function(e){var o=this,t=O(o),s=t.reject,r=b((function(){_(e,!1,(function(e){o.resolve(e).then(t.resolve,s)}))}));return r.e&&s(r.v),t.promise}})},"./node_modules/core-js/library/modules/es6.string.iterator.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_string-at.js")(!0);t("./node_modules/core-js/library/modules/_iter-define.js")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,o=this._t,t=this._i;return t>=o.length?{value:void 0,done:!0}:(e=s(o,t),this._i+=e.length,{value:e,done:!1})}))},"./node_modules/core-js/library/modules/es6.symbol.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_global.js"),r=t("./node_modules/core-js/library/modules/_has.js"),n=t("./node_modules/core-js/library/modules/_descriptors.js"),i=t("./node_modules/core-js/library/modules/_export.js"),a=t("./node_modules/core-js/library/modules/_redefine.js"),l=t("./node_modules/core-js/library/modules/_meta.js").KEY,u=t("./node_modules/core-js/library/modules/_fails.js"),d=t("./node_modules/core-js/library/modules/_shared.js"),c=t("./node_modules/core-js/library/modules/_set-to-string-tag.js"),A=t("./node_modules/core-js/library/modules/_uid.js"),f=t("./node_modules/core-js/library/modules/_wks.js"),m=t("./node_modules/core-js/library/modules/_wks-ext.js"),_=t("./node_modules/core-js/library/modules/_wks-define.js"),p=t("./node_modules/core-js/library/modules/_enum-keys.js"),j=t("./node_modules/core-js/library/modules/_is-array.js"),h=t("./node_modules/core-js/library/modules/_an-object.js"),y=t("./node_modules/core-js/library/modules/_is-object.js"),b=t("./node_modules/core-js/library/modules/_to-object.js"),v=t("./node_modules/core-js/library/modules/_to-iobject.js"),g=t("./node_modules/core-js/library/modules/_to-primitive.js"),S=t("./node_modules/core-js/library/modules/_property-desc.js"),C=t("./node_modules/core-js/library/modules/_object-create.js"),I=t("./node_modules/core-js/library/modules/_object-gopn-ext.js"),E=t("./node_modules/core-js/library/modules/_object-gopd.js"),M=t("./node_modules/core-js/library/modules/_object-gops.js"),k=t("./node_modules/core-js/library/modules/_object-dp.js"),T=t("./node_modules/core-js/library/modules/_object-keys.js"),O=E.f,w=k.f,x=I.f,R=s.Symbol,N=s.JSON,P=N&&N.stringify,U=f("_hidden"),V=f("toPrimitive"),B={}.propertyIsEnumerable,L=d("symbol-registry"),D=d("symbols"),G=d("op-symbols"),q=Object.prototype,Q="function"==typeof R&&!!M.f,F=s.QObject,J=!F||!F.prototype||!F.prototype.findChild,Y=n&&u((function(){return 7!=C(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a}))?function(e,o,t){var s=O(q,o);s&&delete q[o],w(e,o,t),s&&e!==q&&w(q,o,s)}:w,H=function(e){var o=D[e]=C(R.prototype);return o._k=e,o},W=Q&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},Z=function(e,o,t){return e===q&&Z(G,o,t),h(e),o=g(o,!0),h(t),r(D,o)?(t.enumerable?(r(e,U)&&e[U][o]&&(e[U][o]=!1),t=C(t,{enumerable:S(0,!1)})):(r(e,U)||w(e,U,S(1,{})),e[U][o]=!0),Y(e,o,t)):w(e,o,t)},X=function(e,o){h(e);for(var t,s=p(o=v(o)),r=0,n=s.length;n>r;)Z(e,t=s[r++],o[t]);return e},z=function(e){var o=B.call(this,e=g(e,!0));return!(this===q&&r(D,e)&&!r(G,e))&&(!(o||!r(this,e)||!r(D,e)||r(this,U)&&this[U][e])||o)},K=function(e,o){if(e=v(e),o=g(o,!0),e!==q||!r(D,o)||r(G,o)){var t=O(e,o);return!t||!r(D,o)||r(e,U)&&e[U][o]||(t.enumerable=!0),t}},$=function(e){for(var o,t=x(v(e)),s=[],n=0;t.length>n;)r(D,o=t[n++])||o==U||o==l||s.push(o);return s},ee=function(e){for(var o,t=e===q,s=x(t?G:v(e)),n=[],i=0;s.length>i;)!r(D,o=s[i++])||t&&!r(q,o)||n.push(D[o]);return n};Q||(a((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=A(arguments.length>0?arguments[0]:void 0),o=function(t){this===q&&o.call(G,t),r(this,U)&&r(this[U],e)&&(this[U][e]=!1),Y(this,e,S(1,t))};return n&&J&&Y(q,e,{configurable:!0,set:o}),H(e)}).prototype,"toString",(function(){return this._k})),E.f=K,k.f=Z,t("./node_modules/core-js/library/modules/_object-gopn.js").f=I.f=$,t("./node_modules/core-js/library/modules/_object-pie.js").f=z,M.f=ee,n&&!t("./node_modules/core-js/library/modules/_library.js")&&a(q,"propertyIsEnumerable",z,!0),m.f=function(e){return H(f(e))}),i(i.G+i.W+i.F*!Q,{Symbol:R});for(var oe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;oe.length>te;)f(oe[te++]);for(var se=T(f.store),re=0;se.length>re;)_(se[re++]);i(i.S+i.F*!Q,"Symbol",{for:function(e){return r(L,e+="")?L[e]:L[e]=R(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var o in L)if(L[o]===e)return o},useSetter:function(){J=!0},useSimple:function(){J=!1}}),i(i.S+i.F*!Q,"Object",{create:function(e,o){return void 0===o?C(e):X(C(e),o)},defineProperty:Z,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var ne=u((function(){M.f(1)}));i(i.S+i.F*ne,"Object",{getOwnPropertySymbols:function(e){return M.f(b(e))}}),N&&i(i.S+i.F*(!Q||u((function(){var e=R();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))}))),"JSON",{stringify:function(e){for(var o,t,s=[e],r=1;arguments.length>r;)s.push(arguments[r++]);if(t=o=s[1],(y(o)||void 0!==e)&&!W(e))return j(o)||(o=function(e,o){if("function"==typeof t&&(o=t.call(this,e,o)),!W(o))return o}),s[1]=o,P.apply(N,s)}}),R.prototype[V]||t("./node_modules/core-js/library/modules/_hide.js")(R.prototype,V,R.prototype.valueOf),c(R,"Symbol"),c(Math,"Math",!0),c(s.JSON,"JSON",!0)},"./node_modules/core-js/library/modules/es7.map.from.js":function(e,o,t){t("./node_modules/core-js/library/modules/_set-collection-from.js")("Map")},"./node_modules/core-js/library/modules/es7.map.of.js":function(e,o,t){t("./node_modules/core-js/library/modules/_set-collection-of.js")("Map")},"./node_modules/core-js/library/modules/es7.map.to-json.js":function(e,o,t){var s=t("./node_modules/core-js/library/modules/_export.js");s(s.P+s.R,"Map",{toJSON:t("./node_modules/core-js/library/modules/_collection-to-json.js")("Map")})},"./node_modules/core-js/library/modules/es7.promise.finally.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_export.js"),r=t("./node_modules/core-js/library/modules/_core.js"),n=t("./node_modules/core-js/library/modules/_global.js"),i=t("./node_modules/core-js/library/modules/_species-constructor.js"),a=t("./node_modules/core-js/library/modules/_promise-resolve.js");s(s.P+s.R,"Promise",{finally:function(e){var o=i(this,r.Promise||n.Promise),t="function"==typeof e;return this.then(t?function(t){return a(o,e()).then((function(){return t}))}:e,t?function(t){return a(o,e()).then((function(){throw t}))}:e)}})},"./node_modules/core-js/library/modules/es7.promise.try.js":function(e,o,t){"use strict";var s=t("./node_modules/core-js/library/modules/_export.js"),r=t("./node_modules/core-js/library/modules/_new-promise-capability.js"),n=t("./node_modules/core-js/library/modules/_perform.js");s(s.S,"Promise",{try:function(e){var o=r.f(this),t=n(e);return(t.e?o.reject:o.resolve)(t.v),o.promise}})},"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js":function(e,o,t){t("./node_modules/core-js/library/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/library/modules/es7.symbol.observable.js":function(e,o,t){t("./node_modules/core-js/library/modules/_wks-define.js")("observable")},"./node_modules/core-js/library/modules/web.dom.iterable.js":function(e,o,t){t("./node_modules/core-js/library/modules/es6.array.iterator.js");for(var s=t("./node_modules/core-js/library/modules/_global.js"),r=t("./node_modules/core-js/library/modules/_hide.js"),n=t("./node_modules/core-js/library/modules/_iterators.js"),i=t("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var u=a[l],d=s[u],c=d&&d.prototype;c&&!c[i]&&r(c,i,u),n[u]=n.Array}}})}));
//# sourceMappingURL=engine-conference.min.js.map